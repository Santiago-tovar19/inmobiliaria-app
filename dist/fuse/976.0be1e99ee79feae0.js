(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[976],{5976:(S,E,r)=>{"use strict";r.r(E),r.d(E,{default:()=>j});var d=r(9401),I=r(2480),A=r(8288),b=r(7579),_=r(2722),f=r(8467),p=r(1292),i=r(430),l=r(1728),n=r(9609),e=r(9114),s=r(2494),o=r(4755),a=r(2342),t=r(2223),g=r(8951),h=r(4031);const C=["signInNgForm"];function F(c,v){if(1&c&&(t.TgZ(0,"fuse-alert",22),t._uU(1),t.qZA()),2&c){const u=t.oxw();t.Q6J("appearance","outline")("showIcon",!1)("type",u.alert.type)("@shake","error"===u.alert.type),t.xp6(1),t.hij(" ",u.alert.message," ")}}function w(c,v){1&c&&(t.TgZ(0,"mat-error",23),t._uU(1,"Este campo es obligatorio"),t.qZA())}function U(c,v){1&c&&t._UZ(0,"mat-icon",24),2&c&&t.Q6J("svgIcon","heroicons_solid:eye")}function O(c,v){1&c&&t._UZ(0,"mat-icon",24),2&c&&t.Q6J("svgIcon","heroicons_solid:eye-off")}function M(c,v){1&c&&(t.TgZ(0,"mat-error",25),t._uU(1,"La contrase\xf1a es obligatoria"),t.qZA())}function R(c,v){1&c&&(t.TgZ(0,"span"),t._uU(1," Ingresar "),t.qZA())}function Z(c,v){1&c&&t._UZ(0,"mat-progress-spinner",26),2&c&&t.Q6J("diameter",24)("mode","indeterminate")}const L=function(){return["/forgot-password"]},j=[{path:"",component:(()=>{class c{constructor(u,m,y,x,T,D){this._activatedRoute=u,this._authService=m,this._formBuilder=y,this._router=x,this._globalService=T,this._matSnackBar=D,this.alert={type:"success",message:""},this.showAlert=!1,this.submitted=!1,this._unsubscribeAll=new b.x}ngOnInit(){const u=this._activatedRoute.snapshot.queryParamMap?.get("message"),m=this._activatedRoute.snapshot.queryParamMap?.get("messageType");u&&m&&(this.alert={type:m,message:u},this.showAlert=!0),this.signInForm=this._formBuilder.group({email:["",[d.kI.required]],password:["",d.kI.required],rememberMe:[!1]})}signIn(){this.signInForm.invalid||(this.signInForm.disable(),this.signInForm.updateValueAndValidity(),this.showAlert=!1,this.submitted=!0,this._authService.signIn(this.signInForm.value).pipe((0,_.R)(this._unsubscribeAll)).subscribe(u=>{let x="dashboard";4===u.data.user.role_id&&(x="/"),this._router.navigateByUrl(x)},u=>{this.signInForm.enable(),this.signInForm=this._globalService.getValidationErrors(this.signInForm,u),this.alert={type:"error",message:`${u.message}`},this.showAlert=!0}))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}}return c.\u0275fac=function(u){return new(u||c)(t.Y36(I.gz),t.Y36(g.e),t.Y36(d.qu),t.Y36(I.F0),t.Y36(h.U),t.Y36(a.ux))},c.\u0275cmp=t.Xpm({type:c,selectors:[["auth-sign-in"]],viewQuery:function(u,m){if(1&u&&t.Gf(C,5),2&u){let y;t.iGM(y=t.CRH())&&(m.signInNgForm=y.first)}},standalone:!0,features:[t.jDz],decls:31,vars:16,consts:[[1,"flex","flex-col","flex-auto","items-center","sm:justify-center","min-w-0"],[1,"w-full","sm:w-auto","py-8","px-4","sm:p-12","sm:rounded-2xl","sm:shadow","sm:bg-card"],[1,"w-full","max-w-80","sm:w-80","mx-auto","sm:mx-0"],[1,"w-12"],[1,"mt-8","text-4xl","font-extrabold","tracking-tight","leading-tight"],["class","mt-8 -mb-4",3,"appearance","showIcon","type",4,"ngIf"],[1,"mt-8",3,"formGroup"],["signInNgForm","ngForm"],[1,"w-full"],["id","email","matInput","",3,"formControlName"],["id","email-error-required-msg",4,"ngIf"],["id","password","matInput","","type","password",3,"formControlName"],["passwordField",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],["id","password-error-required-msg",4,"ngIf"],[1,"inline-flex","items-end","justify-between","w-full","mt-1.5"],[3,"color","formControlName"],[1,"text-md","font-medium","text-primary-500","hover:underline",3,"routerLink"],["id","submit","mat-flat-button","",1,"fuse-mat-button-large","w-full","mt-6",3,"color","disabled","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[1,"mt-8","-mb-4",3,"appearance","showIcon","type"],["id","email-error-required-msg"],[1,"icon-size-5",3,"svgIcon"],["id","password-error-required-msg"],[3,"diameter","mode"]],template:function(u,m){if(1&u){const y=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"div",4),t._uU(5,"Login"),t.qZA(),t.YNc(6,F,2,5,"fuse-alert",5),t.TgZ(7,"form",6,7)(9,"mat-form-field",8)(10,"mat-label"),t._uU(11,"Email"),t.qZA(),t._UZ(12,"input",9),t.YNc(13,w,2,0,"mat-error",10),t.qZA(),t.TgZ(14,"mat-form-field",8)(15,"mat-label"),t._uU(16,"Password"),t.qZA(),t._UZ(17,"input",11,12),t.TgZ(19,"button",13),t.NdJ("click",function(){t.CHM(y);const T=t.MAs(18);return t.KtG(T.type="password"===T.type?"text":"password")}),t.YNc(20,U,1,1,"mat-icon",14),t.YNc(21,O,1,1,"mat-icon",14),t.qZA(),t.YNc(22,M,2,0,"mat-error",15),t.qZA(),t.TgZ(23,"div",16)(24,"mat-checkbox",17),t._uU(25," Recuerdame "),t.qZA(),t.TgZ(26,"a",18),t._uU(27,"\xbfOlvidaste tu contrase\xf1a? "),t.qZA()(),t.TgZ(28,"button",19),t.NdJ("click",function(){return m.signIn()}),t.YNc(29,R,2,0,"span",20),t.YNc(30,Z,1,2,"mat-progress-spinner",21),t.qZA()()()()()}if(2&u){const y=t.MAs(18);t.xp6(6),t.Q6J("ngIf",m.showAlert),t.xp6(1),t.Q6J("formGroup",m.signInForm),t.xp6(5),t.Q6J("formControlName","email"),t.xp6(1),t.Q6J("ngIf",m.signInForm.get("email").hasError("required")),t.xp6(4),t.Q6J("formControlName","password"),t.xp6(3),t.Q6J("ngIf","password"===y.type),t.xp6(1),t.Q6J("ngIf","text"===y.type),t.xp6(1),t.Q6J("ngIf",m.signInForm.get("password").hasError("required")),t.xp6(2),t.Q6J("color","primary")("formControlName","rememberMe"),t.xp6(2),t.Q6J("routerLink",t.DdM(15,L)),t.xp6(2),t.Q6J("color","primary")("disabled",m.signInForm.disabled),t.xp6(1),t.Q6J("ngIf",!m.signInForm.disabled),t.xp6(1),t.Q6J("ngIf",m.signInForm.disabled)}},dependencies:[o.O5,s.W,d.u5,d._Y,d.Fj,d.JJ,d.JL,d.UX,d.sg,d.u,e.lN,e.KE,e.hX,e.TO,e.R9,n.c,n.Nt,l.ot,l.lW,l.RK,i.Ps,i.Hw,p.p9,p.oG,I.rH,a.ZX,f.Cq,f.Ou],encapsulation:2,data:{animation:A.L}}),c})()}]},4031:(S,E,r)=>{"use strict";r.d(E,{U:()=>_});var d=r(4327),I=r.n(d),A=r(2223),b=r(7495);let _=(()=>{class f{constructor(i,l){this._userService=i,this._ngZone=l,this.httpValidationErrorMessage="Hay errores en el formulario",this.httpGeneralErrorMessage="Ocurrio un error inesperado"}getValidationErrors(i,l){return Object.entries(l.errors?l.errors:{}).map(e=>{try{const s={};e[1].forEach((o,a)=>{s[a]=o}),i.get(e[0]).setErrors(s)}catch{}}),i}getValidationErrorsFormArray(i,l){return Object.entries(l.errors?l.errors:{}).map(e=>{try{const s={},o=e[0].split(".")[1],a=e[0].split(".")[2];e[1].forEach((t,g)=>{s[g]=t.replace(e[0],a)}),i.controls[o].get(a).setErrors(s)}catch{}}),i}errorsLength(i){return i.errors&&Object.keys(i.errors).map((l,n)=>n.toFixed(0)),[]}openSnackBar(i,l,n=3e3,e="success"){i.open(l,null,{horizontalPosition:"center",verticalPosition:"top",duration:n,panelClass:"success"===e?["bg-green-700","text-white"]:["bg-red-700","text-red-100"]})}formatDataForChart(i,l,n,e,s){const o=l.map(t=>{let g=new Date(t[n]);return g=new Date(g.getTime()-144e5),{x:g,y:t[e]}}),a=JSON.parse(JSON.stringify(i));return a.series={main:[{name:s,data:o}]},a}saveDataAsCSV(i,l){const n=(g,h)=>null===h?"":h,e=Object.keys(i[0]),s=i.map(g=>e.map(h=>JSON.stringify(g[h],n)).join(";"));s.unshift(e.join(";"));const o=s.join("\r\n"),a=new Blob([o],{type:"text/csv"});let t=new Date;t=`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()} ${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}`,I()(a,`${l} ${t}.csv`)}}return f.\u0275fac=function(i){return new(i||f)(A.LFG(b.K),A.LFG(A.R0b))},f.\u0275prov=A.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},4327:function(S,E){var r,I;void 0!==(I="function"==typeof(r=function(){"use strict";function b(n,e,s){var o=new XMLHttpRequest;o.open("GET",n),o.responseType="blob",o.onload=function(){l(o.response,e,s)},o.onerror=function(){console.error("could not download file")},o.send()}function _(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return 200<=e.status&&299>=e.status}function f(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var p="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=p.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=p.saveAs||("object"!=typeof window||window!==p?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(n,e,s){var o=p.URL||p.webkitURL,a=document.createElement("a");a.download=e=e||n.name||"download",a.rel="noopener","string"==typeof n?(a.href=n,a.origin===location.origin?f(a):_(a.href)?b(n,e,s):f(a,a.target="_blank")):(a.href=o.createObjectURL(n),setTimeout(function(){o.revokeObjectURL(a.href)},4e4),setTimeout(function(){f(a)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,s){if(e=e||n.name||"download","string"!=typeof n)navigator.msSaveOrOpenBlob(function A(n,e){return typeof e>"u"?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\ufeff",n],{type:n.type}):n}(n,s),e);else if(_(n))b(n,e,s);else{var o=document.createElement("a");o.href=n,o.target="_blank",setTimeout(function(){f(o)})}}:function(n,e,s,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof n)return b(n,e,s);var a="application/octet-stream"===n.type,t=/constructor/i.test(p.HTMLElement)||p.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||a&&t||i)&&typeof FileReader<"u"){var h=new FileReader;h.onloadend=function(){var w=h.result;w=g?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=w:location=w,o=null},h.readAsDataURL(n)}else{var C=p.URL||p.webkitURL,F=C.createObjectURL(n);o?o.location=F:location.href=F,o=null,setTimeout(function(){C.revokeObjectURL(F)},4e4)}});p.saveAs=l.saveAs=l,S.exports=l})?r.apply(E,[]):r)&&(S.exports=I)}}]);
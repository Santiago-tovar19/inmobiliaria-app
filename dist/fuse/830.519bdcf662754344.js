(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[830],{9419:(yo,Mn,q)=>{"use strict";q.r(Mn),q.d(Mn,{PropertiesModule:()=>Iv});var te=q(6895),it=q(4364);function hr(i,n,t,e,r,o,a){try{var l=i[o](a),u=l.value}catch(c){return void t(c)}l.done?n(u):Promise.resolve(u).then(e,r)}function le(i){return function(){var n=this,t=arguments;return new Promise(function(e,r){var o=i.apply(n,t);function a(u){hr(o,e,r,a,l,"next",u)}function l(u){hr(o,e,r,a,l,"throw",u)}a(void 0)})}}var ft=q(4006),wt=q(2340),s=q(4650),fr=q(7326),Pn=q(1481),Ne=q(4031),tn=q(7495),ue=q(7392),qt=q(4826),ye=q(7084),m=q(4859),E=q(3848),R=function(){function i(){this.disposed=!1}return i.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},i.prototype.disposeInternal=function(){},i}();const L=R;function P(i,n){return i>n?1:i<n?-1:0}function V(i,n,t){var e=i.length;if(i[0]<=n)return 0;if(n<=i[e-1])return e-1;var r=void 0;if(t>0){for(r=1;r<e;++r)if(i[r]<n)return r-1}else if(t<0){for(r=1;r<e;++r)if(i[r]<=n)return r}else for(r=1;r<e;++r){if(i[r]==n)return r;if(i[r]<n)return"function"==typeof t?t(n,i[r-1],i[r])>0?r-1:r:i[r-1]-n<n-i[r]?r-1:r}return e-1}function et(i,n,t){for(;n<t;){var e=i[n];i[n]=i[t],i[t]=e,++n,--t}}function tt(i,n){for(var t=Array.isArray(n)?n:[n],e=t.length,r=0;r<e;r++)i[i.length]=t[r]}function lt(i,n){var t=i.length;if(t!==n.length)return!1;for(var e=0;e<t;e++)if(i[e]!==n[e])return!1;return!0}function Dt(){return!0}function nn(){return!1}function Ut(){}function H(){return function(){throw new Error("Unimplemented abstract method.")}()}var il=0;function rt(i){return i.ol_uid||(i.ol_uid=String(++il))}var i,Ce=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",ol=-1!==Ce.indexOf("firefox"),sl=(-1!==Ce.indexOf("safari")&&-1==Ce.indexOf("chrom")&&(Ce.indexOf("version/15.4")>=0||Ce.match(/cpu (os|iphone os) 15_4 like mac os x/)),-1!==Ce.indexOf("webkit")&&-1==Ce.indexOf("edge")),ll=-1!==Ce.indexOf("macintosh"),mo=typeof devicePixelRatio<"u"?devicePixelRatio:1,dr=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,ul=typeof Image<"u"&&Image.prototype.decode,xo=function(){var i=!1;try{var n=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,n),window.removeEventListener("_",null,n)}catch{}return i}(),cl=(i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)},function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),hl=function(i){function n(t){var e=this,o="Assertion failed. See https://openlayers.org/en/v"+"6.15.1".split("-")[0]+"/doc/errors/#"+t+" for details.";return(e=i.call(this,o)||this).code=t,e.name="AssertionError",e.message=o,e}return cl(n,i),n}(Error);const Co=hl;function J(i,n){if(!i)throw new Co(n)}var Eo;function _t(i,n){var t=n[0],e=n[1];return n[0]=i[0]*t+i[2]*e+i[4],n[1]=i[1]*t+i[3]*e+i[5],n}function ee(i,n,t,e,r,o,a,l){var u=Math.sin(o),c=Math.cos(o);return i[0]=e*c,i[1]=r*u,i[2]=-e*u,i[3]=r*c,i[4]=a*e*c-l*e*u+n,i[5]=a*r*u+l*r*c+t,i}function pr(i,n){var t=function pl(i){return i[0]*i[3]-i[1]*i[2]}(n);J(0!==t,32);var e=n[0],r=n[1],o=n[2],a=n[3],l=n[4],u=n[5];return i[0]=a/t,i[1]=-r/t,i[2]=-o/t,i[3]=e/t,i[4]=(o*u-a*l)/t,i[5]=-(e*u-r*l)/t,i}function ui(i){var n="matrix("+i.join(", ")+")";if(dr)return n;var t=Eo||(Eo=document.createElement("div"));return t.style.transform=n,t.style.transform}new Array(6);function To(i){for(var n=[1/0,1/0,-1/0,-1/0],t=0,e=i.length;t<e;++t)an(n,i[t]);return n}function ci(i,n,t){return t?(t[0]=i[0]-n,t[1]=i[1]-n,t[2]=i[2]+n,t[3]=i[3]+n,t):[i[0]-n,i[1]-n,i[2]+n,i[3]+n]}function wo(i,n){return n?(n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n):i.slice()}function Oo(i,n,t){var e,r;return(e=n<i[0]?i[0]-n:i[2]<n?n-i[2]:0)*e+(r=t<i[1]?i[1]-t:i[3]<t?t-i[3]:0)*r}function Ln(i,n){return Io(i,n[0],n[1])}function rn(i,n){return i[0]<=n[0]&&n[2]<=i[2]&&i[1]<=n[1]&&n[3]<=i[3]}function Io(i,n,t){return i[0]<=n&&n<=i[2]&&i[1]<=t&&t<=i[3]}function hi(i,n){var a=n[0],l=n[1],u=0;return a<i[0]?u|=16:a>i[2]&&(u|=4),l<i[1]?u|=8:l>i[3]&&(u|=2),0===u&&(u=1),u}function ne(i,n,t,e,r){return r?(r[0]=i,r[1]=n,r[2]=t,r[3]=e,r):[i,n,t,e]}function on(i){return ne(1/0,1/0,-1/0,-1/0,i)}function Fn(i,n){return i[0]==n[0]&&i[2]==n[2]&&i[1]==n[1]&&i[3]==n[3]}function an(i,n){n[0]<i[0]&&(i[0]=n[0]),n[0]>i[2]&&(i[2]=n[0]),n[1]<i[1]&&(i[1]=n[1]),n[1]>i[3]&&(i[3]=n[1])}function Ro(i,n,t,e,r){for(;t<e;t+=r)xl(i,n[t],n[t+1]);return i}function xl(i,n,t){i[0]=Math.min(i[0],n),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],n),i[3]=Math.max(i[3],t)}function Mo(i,n){var t;return!!((t=n(gr(i)))||(t=n(_r(i)),t)||(t=n(yr(i)),t)||(t=n(Ge(i)),t))&&t}function vr(i){var n=0;return pi(i)||(n=ut(i)*bt(i)),n}function gr(i){return[i[0],i[1]]}function _r(i){return[i[2],i[1]]}function sn(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function Cl(i,n){var t;return"bottom-left"===n?t=gr(i):"bottom-right"===n?t=_r(i):"top-left"===n?t=Ge(i):"top-right"===n?t=yr(i):J(!1,13),t}function fi(i,n,t,e,r){var o=di(i,n,t,e),a=o[0],l=o[1],u=o[2],c=o[3],h=o[4],d=o[5],f=o[6],p=o[7];return ne(Math.min(a,u,h,f),Math.min(l,c,d,p),Math.max(a,u,h,f),Math.max(l,c,d,p),r)}function di(i,n,t,e){var r=n*e[0]/2,o=n*e[1]/2,a=Math.cos(t),l=Math.sin(t),u=r*a,c=r*l,h=o*a,d=o*l,f=i[0],p=i[1];return[f-u+d,p-c-h,f-u-d,p-c+h,f+u-d,p+c+h,f+u+d,p+c-h,f-u+d,p-c-h]}function bt(i){return i[3]-i[1]}function ln(i,n,t){var e=t||[1/0,1/0,-1/0,-1/0];return Pt(i,n)?(e[0]=i[0]>n[0]?i[0]:n[0],e[1]=i[1]>n[1]?i[1]:n[1],e[2]=i[2]<n[2]?i[2]:n[2],e[3]=i[3]<n[3]?i[3]:n[3]):on(e),e}function Ge(i){return[i[0],i[3]]}function yr(i){return[i[2],i[3]]}function ut(i){return i[2]-i[0]}function Pt(i,n){return i[0]<=n[2]&&i[2]>=n[0]&&i[1]<=n[3]&&i[3]>=n[1]}function pi(i){return i[2]<i[0]||i[3]<i[1]}function Po(i,n){var t=n.getExtent(),e=sn(i);if(n.canWrapX()&&(e[0]<t[0]||e[0]>=t[2])){var r=ut(t),a=Math.floor((e[0]-t[0])/r)*r;i[0]-=a,i[2]-=a}return i}function yt(i,n,t){return Math.min(Math.max(i,n),t)}var Il="cosh"in Math?Math.cosh:function(n){var t=Math.exp(n);return(t+1/t)/2},Sl="log2"in Math?Math.log2:function(n){return Math.log(n)*Math.LOG2E};function Rl(i,n,t,e,r,o){var a=r-t,l=o-e;if(0!==a||0!==l){var u=((i-t)*a+(n-e)*l)/(a*a+l*l);u>1?(t=r,e=o):u>0&&(t+=a*u,e+=l*u)}return un(i,n,t,e)}function un(i,n,t,e){var r=t-i,o=e-n;return r*r+o*o}function mr(i){return i*Math.PI/180}function cn(i,n){var t=i%n;return t*n<0?t+n:t}function Ue(i,n,t){return i+t*(n-i)}function vi(i,n){var t=Math.pow(10,n);return Math.round(i*t)/t}function xr(i,n){return Math.floor(vi(i,n))}function Cr(i,n){return Math.ceil(vi(i,n))}var Ao=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Lo=/^([a-z]*)$|^hsla?\(.*\)$/i;function Fo(i){return"string"==typeof i?i:Zo(i)}var n,t,Pl=(n={},t=0,function(e){var r;if(n.hasOwnProperty(e))r=n[e];else{if(t>=1024){var o=0;for(var a in n)0==(3&o++)&&(delete n[a],--t)}r=function Al(i){var n,t,e,r,o;if(Lo.exec(i)&&(i=function Do(i){var n=document.createElement("div");if(n.style.color=i,""!==n.style.color){document.body.appendChild(n);var t=getComputedStyle(n).color;return document.body.removeChild(n),t}return""}(i)),Ao.exec(i)){var l,a=i.length-1;l=a<=4?1:2;var u=4===a||8===a;n=parseInt(i.substr(1+0*l,l),16),t=parseInt(i.substr(1+1*l,l),16),e=parseInt(i.substr(1+2*l,l),16),r=u?parseInt(i.substr(1+3*l,l),16):255,1==l&&(n=(n<<4)+n,t=(t<<4)+t,e=(e<<4)+e,u&&(r=(r<<4)+r)),o=[n,t,e,r/255]}else 0==i.indexOf("rgba(")?bo(o=i.slice(5,-1).split(",").map(Number)):0==i.indexOf("rgb(")?((o=i.slice(4,-1).split(",").map(Number)).push(1),bo(o)):J(!1,14);return o}(e),n[e]=r,++t}return r});function Er(i){return Array.isArray(i)?i:Pl(i)}function bo(i){return i[0]=yt(i[0]+.5|0,0,255),i[1]=yt(i[1]+.5|0,0,255),i[2]=yt(i[2]+.5|0,0,255),i[3]=yt(i[3],0,1),i}function Zo(i){var n=i[0];n!=(0|n)&&(n=n+.5|0);var t=i[1];t!=(0|t)&&(t=t+.5|0);var e=i[2];return e!=(0|e)&&(e=e+.5|0),"rgba("+n+","+t+","+e+","+(void 0===i[3]?1:Math.round(100*i[3])/100)+")"}var Ll=function(){function i(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return i.prototype.clear=function(){this.cache_={},this.cacheSize_=0},i.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},i.prototype.expire=function(){if(this.canExpireCache()){var n=0;for(var t in this.cache_)0==(3&n++)&&!this.cache_[t].hasListener()&&(delete this.cache_[t],--this.cacheSize_)}},i.prototype.get=function(n,t,e){var r=No(n,t,e);return r in this.cache_?this.cache_[r]:null},i.prototype.set=function(n,t,e,r){var o=No(n,t,e);this.cache_[o]=r,++this.cacheSize_},i.prototype.setSize=function(n){this.maxCacheSize_=n,this.expire()},i}();function No(i,n,t){return n+":"+i+":"+(t?Fo(t):"null")}var Tr=new Ll,Fl=function(){function i(n){this.type=n,this.target=null}return i.prototype.preventDefault=function(){this.defaultPrevented=!0},i.prototype.stopPropagation=function(){this.propagationStopped=!0},i}();const ce=Fl;var xt="function"==typeof Object.assign?Object.assign:function(i,n){if(null==i)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(i),e=1,r=arguments.length;e<r;++e){var o=arguments[e];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(t[a]=o[a])}return t};function Dn(i){for(var n in i)delete i[n]}var ko="function"==typeof Object.values?Object.values:function(i){var n=[];for(var t in i)n.push(i[t]);return n};function bn(i){var n;for(n in i)return!1;return!n}var Dl=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),bl=function(i){function n(t){var e=i.call(this)||this;return e.eventTarget_=t,e.pendingRemovals_=null,e.dispatching_=null,e.listeners_=null,e}return Dl(n,i),n.prototype.addEventListener=function(t,e){if(t&&e){var r=this.listeners_||(this.listeners_={}),o=r[t]||(r[t]=[]);-1===o.indexOf(e)&&o.push(e)}},n.prototype.dispatchEvent=function(t){var e="string"==typeof t,r=e?t:t.type,o=this.listeners_&&this.listeners_[r];if(o){var a=e?new ce(t):t;a.target||(a.target=this.eventTarget_||this);var l=this.dispatching_||(this.dispatching_={}),u=this.pendingRemovals_||(this.pendingRemovals_={});r in l||(l[r]=0,u[r]=0),++l[r];for(var c,h=0,d=o.length;h<d;++h)if(!1===(c="handleEvent"in o[h]?o[h].handleEvent(a):o[h].call(this,a))||a.propagationStopped){c=!1;break}if(0==--l[r]){var f=u[r];for(delete u[r];f--;)this.removeEventListener(r,Ut);delete l[r]}return c}},n.prototype.disposeInternal=function(){this.listeners_&&Dn(this.listeners_)},n.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},n.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},n.prototype.removeEventListener=function(t,e){var r=this.listeners_&&this.listeners_[t];if(r){var o=r.indexOf(e);-1!==o&&(this.pendingRemovals_&&t in this.pendingRemovals_?(r[o]=Ut,++this.pendingRemovals_[t]):(r.splice(o,1),0===r.length&&delete this.listeners_[t]))}},n}(L);const fn=bl;function nt(i,n,t,e,r){if(e&&e!==i&&(t=t.bind(e)),r){var o=t;t=function(){i.removeEventListener(n,t),o.apply(this,arguments)}}var a={target:i,type:n,listener:t};return i.addEventListener(n,t),a}function wr(i,n,t,e){return nt(i,n,t,e,!0)}function dt(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),Dn(i))}var Zl=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Or=function(i){function n(){var t=i.call(this)||this;return t.on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return Zl(n,i),n.prototype.changed=function(){++this.revision_,this.dispatchEvent("change")},n.prototype.getRevision=function(){return this.revision_},n.prototype.onInternal=function(t,e){if(Array.isArray(t)){for(var r=t.length,o=new Array(r),a=0;a<r;++a)o[a]=nt(this,t[a],e);return o}return nt(this,t,e)},n.prototype.onceInternal=function(t,e){var r;if(Array.isArray(t)){var o=t.length;r=new Array(o);for(var a=0;a<o;++a)r[a]=wr(this,t[a],e)}else r=wr(this,t,e);return e.ol_key=r,r},n.prototype.unInternal=function(t,e){var r=e.ol_key;if(r)!function Nl(i){if(Array.isArray(i))for(var n=0,t=i.length;n<t;++n)dt(i[n]);else dt(i)}(r);else if(Array.isArray(t))for(var o=0,a=t.length;o<a;++o)this.removeEventListener(t[o],e);else this.removeEventListener(t,e)},n}(fn);const Go=Or;var Uo=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),jo=function(i){function n(t,e,r){var o=i.call(this,t)||this;return o.key=e,o.oldValue=r,o}return Uo(n,i),n}(ce),kl=function(i){function n(t){var e=i.call(this)||this;return rt(e),e.values_=null,void 0!==t&&e.setProperties(t),e}return Uo(n,i),n.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},n.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},n.prototype.getProperties=function(){return this.values_&&xt({},this.values_)||{}},n.prototype.hasProperties=function(){return!!this.values_},n.prototype.notify=function(t,e){var r;r="change:".concat(t),this.hasListener(r)&&this.dispatchEvent(new jo(r,t,e)),this.hasListener(r="propertychange")&&this.dispatchEvent(new jo(r,t,e))},n.prototype.addChangeListener=function(t,e){this.addEventListener("change:".concat(t),e)},n.prototype.removeChangeListener=function(t,e){this.removeEventListener("change:".concat(t),e)},n.prototype.set=function(t,e,r){var o=this.values_||(this.values_={});if(r)o[t]=e;else{var a=o[t];o[t]=e,a!==e&&this.notify(t,a)}},n.prototype.setProperties=function(t,e){for(var r in t)this.set(r,t[r],e)},n.prototype.applyProperties=function(t){!t.values_||xt(this.values_||(this.values_={}),t.values_)},n.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var r=this.values_[t];delete this.values_[t],bn(this.values_)&&(this.values_=null),e||this.notify(t,r)}},n}(Go);const re=kl;var Gl=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ul=function(i){function n(t){var e=i.call(this)||this;e.background_=t.background;var r=xt({},t);return"object"==typeof t.properties&&(delete r.properties,xt(r,t.properties)),r.opacity=void 0!==t.opacity?t.opacity:1,J("number"==typeof r.opacity,64),r.visible=void 0===t.visible||t.visible,r.zIndex=t.zIndex,r.maxResolution=void 0!==t.maxResolution?t.maxResolution:1/0,r.minResolution=void 0!==t.minResolution?t.minResolution:0,r.minZoom=void 0!==t.minZoom?t.minZoom:-1/0,r.maxZoom=void 0!==t.maxZoom?t.maxZoom:1/0,e.className_=void 0!==r.className?r.className:"ol-layer",delete r.className,e.setProperties(r),e.state_=null,e}return Gl(n,i),n.prototype.getBackground=function(){return this.background_},n.prototype.getClassName=function(){return this.className_},n.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},r=this.getZIndex();return e.opacity=yt(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==r||e.managed?r:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},n.prototype.getLayersArray=function(t){return H()},n.prototype.getLayerStatesArray=function(t){return H()},n.prototype.getExtent=function(){return this.get("extent")},n.prototype.getMaxResolution=function(){return this.get("maxResolution")},n.prototype.getMinResolution=function(){return this.get("minResolution")},n.prototype.getMinZoom=function(){return this.get("minZoom")},n.prototype.getMaxZoom=function(){return this.get("maxZoom")},n.prototype.getOpacity=function(){return this.get("opacity")},n.prototype.getSourceState=function(){return H()},n.prototype.getVisible=function(){return this.get("visible")},n.prototype.getZIndex=function(){return this.get("zIndex")},n.prototype.setBackground=function(t){this.background_=t,this.changed()},n.prototype.setExtent=function(t){this.set("extent",t)},n.prototype.setMaxResolution=function(t){this.set("maxResolution",t)},n.prototype.setMinResolution=function(t){this.set("minResolution",t)},n.prototype.setMaxZoom=function(t){this.set("maxZoom",t)},n.prototype.setMinZoom=function(t){this.set("minZoom",t)},n.prototype.setOpacity=function(t){J("number"==typeof t,64),this.set("opacity",t)},n.prototype.setVisible=function(t){this.set("visible",t)},n.prototype.setZIndex=function(t){this.set("zIndex",t)},n.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),i.prototype.disposeInternal.call(this)},n}(re);const Bo=Ul;var jl=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bl=function(i){function n(t){var e=this,r=xt({},t);return delete r.source,(e=i.call(this,r)||this).mapPrecomposeKey_=null,e.mapRenderKey_=null,e.sourceChangeKey_=null,e.renderer_=null,e.rendered=!1,t.render&&(e.render=t.render),t.map&&e.setMap(t.map),e.addChangeListener("source",e.handleSourcePropertyChange_),e.setSource(t.source?t.source:null),e}return jl(n,i),n.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},n.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},n.prototype.getSource=function(){return this.get("source")||null},n.prototype.getRenderSource=function(){return this.getSource()},n.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():"undefined"},n.prototype.handleSourceChange_=function(){this.changed()},n.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(dt(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=nt(t,"change",this.handleSourceChange_,this)),this.changed()},n.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(function(e){return e([])})},n.prototype.getData=function(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null},n.prototype.render=function(t,e){var r=this.getRenderer();if(r.prepareFrame(t))return this.rendered=!0,r.renderFrame(t,e)},n.prototype.unrender=function(){this.rendered=!1},n.prototype.setMapInternal=function(t){t||this.unrender(),this.set("map",t)},n.prototype.getMapInternal=function(){return this.get("map")},n.prototype.setMap=function(t){this.mapPrecomposeKey_&&(dt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(dt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=nt(t,"precompose",function(e){var o=e.frameState.layerStatesArray,a=this.getLayerState(!1);J(!o.some(function(l){return l.layer===a.layer}),67),o.push(a)},this),this.mapRenderKey_=nt(this,"change",t.render,t),this.changed())},n.prototype.setSource=function(t){this.set("source",t)},n.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},n.prototype.hasRenderer=function(){return!!this.renderer_},n.prototype.createRenderer=function(){return null},n.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),i.prototype.disposeInternal.call(this)},n}(Bo);function Ir(i,n){if(!i.visible)return!1;var t=n.resolution;if(t<i.minResolution||t>=i.maxResolution)return!1;var e=n.zoom;return e>i.minZoom&&e<=i.maxZoom}const Sr=Bl;function Rr(i,n){for(var t=!0,e=i.length-1;e>=0;--e)if(i[e]!=n[e]){t=!1;break}return t}function gi(i,n){var t=Math.cos(n),e=Math.sin(n),o=i[1]*t+i[0]*e;return i[0]=i[0]*t-i[1]*e,i[1]=o,i}function zo(i,n){if(n.canWrapX()){var t=ut(n.getExtent()),e=function Vl(i,n,t){var e=n.getExtent(),r=0;if(n.canWrapX()&&(i[0]<e[0]||i[0]>e[2])){var o=t||ut(e);r=Math.floor((i[0]-e[0])/o)}return r}(i,n,t);e&&(i[0]-=e*t)}return i}var Kl=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hl=function(i){function n(t){var e=i.call(this)||this;return e.map_=t,e}return Kl(n,i),n.prototype.dispatchRenderEvent=function(t,e){H()},n.prototype.calculateMatrices2D=function(t){var e=t.viewState,r=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;ee(r,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),pr(o,r)},n.prototype.forEachFeatureAtCoordinate=function(t,e,r,o,a,l,u,c){var h,d=e.viewState;function f(W,B,N,k){return a.call(l,B,W?N:null,k)}var p=d.projection,v=zo(t.slice(),p),g=[[0,0]];if(p.canWrapX()&&o){var C=ut(p.getExtent());g.push([-C,0],[C,0])}for(var y=e.layerStatesArray,x=y.length,T=[],w=[],S=0;S<g.length;S++)for(var O=x-1;O>=0;--O){var M=y[O],A=M.layer;if(A.hasRenderer()&&Ir(M,d)&&u.call(c,A)){var b=A.getRenderer(),j=A.getSource();if(b&&j){var Y=j.getWrapX()?v:t,D=f.bind(null,M.managed);w[0]=Y[0]+g[S][0],w[1]=Y[1]+g[S][1],h=b.forEachFeatureAtCoordinate(w,e,r,D,T)}if(h)return h}}if(0!==T.length){var z=1/T.length;return T.forEach(function(W,B){return W.distanceSq+=B*z}),T.sort(function(W,B){return W.distanceSq-B.distanceSq}),T.some(function(W){return h=W.callback(W.feature,W.layer,W.geometry)}),h}},n.prototype.forEachLayerAtPixel=function(t,e,r,o,a){return H()},n.prototype.hasFeatureAtCoordinate=function(t,e,r,o,a,l){return void 0!==this.forEachFeatureAtCoordinate(t,e,r,o,Dt,this,a,l)},n.prototype.getMap=function(){return this.map_},n.prototype.renderFrame=function(t){H()},n.prototype.scheduleExpireIconCache=function(t){Tr.canExpireCache()&&t.postRenderFunctions.push(Jl)},n}(L);function Jl(i,n){Tr.expire()}const Ql=Hl;var $l=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),tu=function(i){function n(t,e,r,o){var a=i.call(this,t)||this;return a.inversePixelTransform=e,a.frameState=r,a.context=o,a}return $l(n,i),n}(ce);const Wo=tu;var Mr="ol-hidden",Pr="ol-unselectable",_i="ol-control",qo="ol-collapsed",eu=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Vo=["style","variant","weight","size","lineHeight","family"],Ko=function(i){var n=i.match(eu);if(!n)return null;for(var t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},e=0,r=Vo.length;e<r;++e){var o=n[e+1];void 0!==o&&(t[Vo[e]]=o)}return t.families=t.family.split(/,\s?/),t};function Zt(i,n,t,e){var r;return r=t&&t.length?t.shift():dr?new OffscreenCanvas(i||300,n||300):document.createElement("canvas"),i&&(r.width=i),n&&(r.height=n),r.getContext("2d",e)}function Ho(i){var n=i.canvas;n.width=1,n.height=1,i.clearRect(0,0,1,1)}function Jo(i,n){var t=n.parentNode;t&&t.replaceChild(i,n)}function yi(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}var Qo="10px sans-serif",he="#000",Ar="round",Zn=[],dn="round",Gn="#000",Un="center",Lr="middle",je=[0,0,0,0],fe=new re;(new fn).setSize=function(){console.warn("labelCache is deprecated.")};var mi,pn=null,xi={},ou=function(){var o,a,n="32px ",t=["monospace","serif"],e=t.length,r="wmytzilWMYTZIL@#/&?$%10\uf013";function l(c,h,d){for(var f=!0,p=0;p<e;++p){var v=t[p];if(a=Fr(c+" "+h+" "+n+v,r),d!=v){var g=Fr(c+" "+h+" "+n+d+","+v,r);f=f&&g!=a}}return!!f}function u(){for(var c=!0,h=fe.getKeys(),d=0,f=h.length;d<f;++d){var p=h[d];fe.get(p)<100&&(l.apply(this,p.split("\n"))?(Dn(xi),pn=null,mi=void 0,fe.set(p,100)):(fe.set(p,fe.get(p)+1,!0),c=!1))}c&&(clearInterval(o),o=void 0)}return function(c){var h=Ko(c);if(h)for(var d=h.families,f=0,p=d.length;f<p;++f){var v=d[f],g=h.style+"\n"+h.weight+"\n"+v;void 0===fe.get(g)&&(fe.set(g,100,!0),l(h.style,h.weight,v)||(fe.set(g,0,!0),void 0===o&&(o=setInterval(u,32))))}}}(),au=function(){var i;return function(n){var t=xi[n];if(null==t){if(dr){var e=Ko(n),r=$o(n,"\u017dg");t=(isNaN(Number(e.lineHeight))?1.2:Number(e.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else i||((i=document.createElement("div")).innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=n,document.body.appendChild(i),t=i.offsetHeight,document.body.removeChild(i);xi[n]=t}return t}}();function $o(i,n){return pn||(pn=Zt(1,1)),i!=mi&&(pn.font=i,mi=pn.font),pn.measureText(n)}function Fr(i,n){return $o(i,n).width}function ta(i,n,t){if(n in t)return t[n];var e=n.split("\n").reduce(function(r,o){return Math.max(r,Fr(i,o))},0);return t[n]=e,e}var cu=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),hu=function(i){function n(t){var e=i.call(this,t)||this;e.fontChangeListenerKey_=nt(fe,"propertychange",t.redrawText.bind(t)),e.element_=document.createElement("div");var r=e.element_.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",e.element_.className=Pr+" ol-layers";var o=t.getViewport();return o.insertBefore(e.element_,o.firstChild||null),e.children_=[],e.renderedVisible_=!0,e}return cu(n,i),n.prototype.dispatchRenderEvent=function(t,e){var r=this.getMap();if(r.hasListener(t)){var o=new Wo(t,void 0,e);r.dispatchEvent(o)}},n.prototype.disposeInternal=function(){dt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),i.prototype.disposeInternal.call(this)},n.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent("precompose",t);var e=t.layerStatesArray.sort(function(p,v){return p.zIndex-v.zIndex}),r=t.viewState;this.children_.length=0;for(var o=[],a=null,l=0,u=e.length;l<u;++l){var c=e[l];t.layerIndex=l;var h=c.layer,d=h.getSourceState();if(!Ir(c,r)||"ready"!=d&&"undefined"!=d)h.unrender();else{var f=h.render(t,a);!f||(f!==a&&(this.children_.push(f),a=f),"getDeclutter"in h&&o.push(h))}}for(l=o.length-1;l>=0;--l)o[l].renderDeclutter(t);(function ru(i,n){for(var t=i.childNodes,e=0;;++e){var r=t[e],o=n[e];if(!r&&!o)break;if(r!==o){if(!r){i.appendChild(o);continue}if(!o){i.removeChild(r),--e;continue}i.insertBefore(o,r)}}})(this.element_,this.children_),this.dispatchRenderEvent("postcompose",t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},n.prototype.forEachLayerAtPixel=function(t,e,r,o,a){for(var l=e.viewState,u=e.layerStatesArray,h=u.length-1;h>=0;--h){var d=u[h],f=d.layer;if(f.hasRenderer()&&Ir(d,l)&&a(f)){var v=f.getRenderer().getDataAtPixel(t,e,r);if(v){var g=o(f,v);if(g)return g}}}},n}(Ql);const fu=hu;var ea=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Dr=function(i){function n(t,e,r){var o=i.call(this,t)||this;return o.element=e,o.index=r,o}return ea(n,i),n}(ce),du=function(i){function n(t,e){var r=i.call(this)||this;if(r.unique_=!!(e||{}).unique,r.array_=t||[],r.unique_)for(var a=0,l=r.array_.length;a<l;++a)r.assertUnique_(r.array_[a],a);return r.updateLength_(),r}return ea(n,i),n.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},n.prototype.extend=function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this},n.prototype.forEach=function(t){for(var e=this.array_,r=0,o=e.length;r<o;++r)t(e[r],r,e)},n.prototype.getArray=function(){return this.array_},n.prototype.item=function(t){return this.array_[t]},n.prototype.getLength=function(){return this.get("length")},n.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Dr("add",e,t))},n.prototype.pop=function(){return this.removeAt(this.getLength()-1)},n.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},n.prototype.remove=function(t){for(var e=this.array_,r=0,o=e.length;r<o;++r)if(e[r]===t)return this.removeAt(r)},n.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Dr("remove",e,t)),e},n.prototype.setAt=function(t,e){var r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(e,t);var o=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Dr("remove",o,t)),this.dispatchEvent(new Dr("add",e,t))}else{for(var a=r;a<t;++a)this.insertAt(a,void 0);this.insertAt(t,e)}},n.prototype.updateLength_=function(){this.set("length",this.array_.length)},n.prototype.assertUnique_=function(t,e){for(var r=0,o=this.array_.length;r<o;++r)if(this.array_[r]===t&&r!==e)throw new Co(58)},n}(re);const Bt=du;var ra=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Te=function(i){function n(t,e){var r=i.call(this,t)||this;return r.layer=e,r}return ra(n,i),n}(ce),pu=function(i){function n(t){var e=this,r=t||{},o=xt({},r);delete o.layers;var a=r.layers;return(e=i.call(this,o)||this).layersListenerKeys_=[],e.listenerKeys_={},e.addChangeListener("layers",e.handleLayersChanged_),a?Array.isArray(a)?a=new Bt(a.slice(),{unique:!0}):J("function"==typeof a.getArray,43):a=new Bt(void 0,{unique:!0}),e.setLayers(a),e}return ra(n,i),n.prototype.handleLayerChange_=function(){this.changed()},n.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(dt),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(nt(t,"add",this.handleLayersAdd_,this),nt(t,"remove",this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(dt);Dn(this.listenerKeys_);for(var r=t.getArray(),o=0,a=r.length;o<a;o++){var l=r[o];this.registerLayerListeners_(l),this.dispatchEvent(new Te("addlayer",l))}this.changed()},n.prototype.registerLayerListeners_=function(t){var e=[nt(t,"propertychange",this.handleLayerChange_,this),nt(t,"change",this.handleLayerChange_,this)];t instanceof n&&e.push(nt(t,"addlayer",this.handleLayerGroupAdd_,this),nt(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[rt(t)]=e},n.prototype.handleLayerGroupAdd_=function(t){this.dispatchEvent(new Te("addlayer",t.layer))},n.prototype.handleLayerGroupRemove_=function(t){this.dispatchEvent(new Te("removelayer",t.layer))},n.prototype.handleLayersAdd_=function(t){var e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Te("addlayer",e)),this.changed()},n.prototype.handleLayersRemove_=function(t){var e=t.element,r=rt(e);this.listenerKeys_[r].forEach(dt),delete this.listenerKeys_[r],this.dispatchEvent(new Te("removelayer",e)),this.changed()},n.prototype.getLayers=function(){return this.get("layers")},n.prototype.setLayers=function(t){var e=this.getLayers();if(e)for(var r=e.getArray(),o=0,a=r.length;o<a;++o)this.dispatchEvent(new Te("removelayer",r[o]));this.set("layers",t)},n.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(r){r.getLayersArray(e)}),e},n.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],r=e.length;this.getLayers().forEach(function(h){h.getLayerStatesArray(e)});var o=this.getLayerState(),a=o.zIndex;!t&&void 0===o.zIndex&&(a=0);for(var l=r,u=e.length;l<u;l++){var c=e[l];c.opacity*=o.opacity,c.visible=c.visible&&o.visible,c.maxResolution=Math.min(c.maxResolution,o.maxResolution),c.minResolution=Math.max(c.minResolution,o.minResolution),c.minZoom=Math.max(c.minZoom,o.minZoom),c.maxZoom=Math.min(c.maxZoom,o.maxZoom),void 0!==o.extent&&(c.extent=void 0!==c.extent?ln(c.extent,o.extent):o.extent),void 0===c.zIndex&&(c.zIndex=a)}return e},n.prototype.getSourceState=function(){return"ready"},n}(Bo);const br=pu;var vu=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),gu=function(i){function n(t,e,r){var o=i.call(this,t)||this;return o.map=e,o.frameState=void 0!==r?r:null,o}return vu(n,i),n}(ce);const vn=gu;var _u=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),yu=function(i){function n(t,e,r,o,a,l){var u=i.call(this,t,e,a)||this;return u.originalEvent=r,u.pixel_=null,u.coordinate_=null,u.dragging=void 0!==o&&o,u.activePointers=l,u}return _u(n,i),Object.defineProperty(n.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),n.prototype.preventDefault=function(){i.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},n.prototype.stopPropagation=function(){i.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},n}(vn);const we=yu,vt={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var mu=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),xu=function(i){function n(t,e){var r=i.call(this,t)||this;r.map_=t,r.emulateClicks_=!1,r.dragging_=!1,r.dragListenerKeys_=[],r.moveTolerance_=void 0===e?1:e,r.down_=null;var o=r.map_.getViewport();return r.activePointers_=[],r.trackedTouches_={},r.element_=o,r.pointerdownListenerKey_=nt(o,"pointerdown",r.handlePointerDown_,r),r.relayedListenerKey_=nt(o,"pointermove",r.relayMoveEvent_,r),r.boundHandleTouchMove_=r.handleTouchMove_.bind(r),r.element_.addEventListener("touchmove",r.boundHandleTouchMove_,!!xo&&{passive:!1}),r}return mu(n,i),n.prototype.emulateClick_=function(t){var e=new we(vt.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new we(vt.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var r=new we(vt.SINGLECLICK,this.map_,t);this.dispatchEvent(r)}.bind(this),250)},n.prototype.updateActivePointers_=function(t){var e=t,r=e.pointerId;if(e.type==vt.POINTERUP||e.type==vt.POINTERCANCEL){for(var o in delete this.trackedTouches_[r],this.trackedTouches_)if(this.trackedTouches_[o].target!==e.target){delete this.trackedTouches_[o];break}}else(e.type==vt.POINTERDOWN||e.type==vt.POINTERMOVE)&&(this.trackedTouches_[r]=e);this.activePointers_=ko(this.trackedTouches_)},n.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new we(vt.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(dt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},n.prototype.isMouseActionButton_=function(t){return 0===t.button},n.prototype.handlePointerDown_=function(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);var e=new we(vt.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);for(var r in this.dispatchEvent(e),this.down_={},t){var o=t[r];this.down_[r]="function"==typeof o?Ut:o}if(0===this.dragListenerKeys_.length){var a=this.map_.getOwnerDocument();this.dragListenerKeys_.push(nt(a,vt.POINTERMOVE,this.handlePointerMove_,this),nt(a,vt.POINTERUP,this.handlePointerUp_,this),nt(this.element_,vt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==a&&this.dragListenerKeys_.push(nt(this.element_.getRootNode(),vt.POINTERUP,this.handlePointerUp_,this))}},n.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;var e=new we(vt.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}},n.prototype.relayMoveEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new we(vt.POINTERMOVE,this.map_,t,e))},n.prototype.handleTouchMove_=function(t){var e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&("boolean"!=typeof t.cancelable||!0===t.cancelable)&&t.preventDefault()},n.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},n.prototype.disposeInternal=function(){this.relayedListenerKey_&&(dt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(dt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(dt),this.dragListenerKeys_.length=0,this.element_=null,i.prototype.disposeInternal.call(this)},n}(fn);const Cu=xu;var Zr=1/0,Eu=function(){function i(n,t){this.priorityFunction_=n,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return i.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Dn(this.queuedElements_)},i.prototype.dequeue=function(){var n=this.elements_,t=this.priorities_,e=n[0];1==n.length?(n.length=0,t.length=0):(n[0]=n.pop(),t[0]=t.pop(),this.siftUp_(0));var r=this.keyFunction_(e);return delete this.queuedElements_[r],e},i.prototype.enqueue=function(n){J(!(this.keyFunction_(n)in this.queuedElements_),31);var t=this.priorityFunction_(n);return t!=Zr&&(this.elements_.push(n),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(n)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},i.prototype.getCount=function(){return this.elements_.length},i.prototype.getLeftChildIndex_=function(n){return 2*n+1},i.prototype.getRightChildIndex_=function(n){return 2*n+2},i.prototype.getParentIndex_=function(n){return n-1>>1},i.prototype.heapify_=function(){var n;for(n=(this.elements_.length>>1)-1;n>=0;n--)this.siftUp_(n)},i.prototype.isEmpty=function(){return 0===this.elements_.length},i.prototype.isKeyQueued=function(n){return n in this.queuedElements_},i.prototype.isQueued=function(n){return this.isKeyQueued(this.keyFunction_(n))},i.prototype.siftUp_=function(n){for(var t=this.elements_,e=this.priorities_,r=t.length,o=t[n],a=e[n],l=n;n<r>>1;){var u=this.getLeftChildIndex_(n),c=this.getRightChildIndex_(n),h=c<r&&e[c]<e[u]?c:u;t[n]=t[h],e[n]=e[h],n=h}t[n]=o,e[n]=a,this.siftDown_(l,n)},i.prototype.siftDown_=function(n,t){for(var e=this.elements_,r=this.priorities_,o=e[t],a=r[t];t>n;){var l=this.getParentIndex_(t);if(!(r[l]>a))break;e[t]=e[l],r[t]=r[l],t=l}e[t]=o,r[t]=a},i.prototype.reprioritize=function(){var a,l,u,n=this.priorityFunction_,t=this.elements_,e=this.priorities_,r=0,o=t.length;for(l=0;l<o;++l)(u=n(a=t[l]))==Zr?delete this.queuedElements_[this.keyFunction_(a)]:(e[r]=u,t[r++]=a);t.length=r,e.length=r,this.heapify_()},i}();const Tu=Eu;var wu=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ou=function(i){function n(t,e){var r=i.call(this,function(o){return t.apply(null,o)},function(o){return o[0].getKey()})||this;return r.boundHandleTileChange_=r.handleTileChange.bind(r),r.tileChangeCallback_=e,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return wu(n,i),n.prototype.enqueue=function(t){var e=i.prototype.enqueue.call(this,t);return e&&t[0].addEventListener("change",this.boundHandleTileChange_),e},n.prototype.getTilesLoading=function(){return this.tilesLoading_},n.prototype.handleTileChange=function(t){var e=t.target,r=e.getState();if(2===r||3===r||4===r){e.removeEventListener("change",this.boundHandleTileChange_);var o=e.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},n.prototype.loadMoreTiles=function(t,e){for(var a,l,r=0;this.tilesLoading_<t&&r<e&&this.getCount()>0;)l=(a=this.dequeue()[0]).getKey(),0===a.getState()&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++r,a.load())},n}(Tu);const Iu=Ou;var Ht={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Yt={};Yt[Ht.RADIANS]=6370997/(2*Math.PI),Yt[Ht.DEGREES]=2*Math.PI*6370997/360,Yt[Ht.FEET]=.3048,Yt[Ht.METERS]=1,Yt[Ht.USFEET]=1200/3937;const Ie=Ht,Jt={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var Pu=function(){function i(n){this.code_=n.code,this.units_=n.units,this.extent_=void 0!==n.extent?n.extent:null,this.worldExtent_=void 0!==n.worldExtent?n.worldExtent:null,this.axisOrientation_=void 0!==n.axisOrientation?n.axisOrientation:"enu",this.global_=void 0!==n.global&&n.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=n.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=n.metersPerUnit}return i.prototype.canWrapX=function(){return this.canWrapX_},i.prototype.getCode=function(){return this.code_},i.prototype.getExtent=function(){return this.extent_},i.prototype.getUnits=function(){return this.units_},i.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Yt[this.units_]},i.prototype.getWorldExtent=function(){return this.worldExtent_},i.prototype.getAxisOrientation=function(){return this.axisOrientation_},i.prototype.isGlobal=function(){return this.global_},i.prototype.setGlobal=function(n){this.global_=n,this.canWrapX_=!(!n||!this.extent_)},i.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},i.prototype.setDefaultTileGrid=function(n){this.defaultTileGrid_=n},i.prototype.setExtent=function(n){this.extent_=n,this.canWrapX_=!(!this.global_||!n)},i.prototype.setWorldExtent=function(n){this.worldExtent_=n},i.prototype.setGetPointResolution=function(n){this.getPointResolutionFunc_=n},i.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},i}();const ia=Pu;var Au=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bn=6378137,gn=Math.PI*Bn,Lu=[-gn,-gn,gn,gn],Fu=[-180,-85,180,85],Nr=Bn*Math.log(Math.tan(Math.PI/2)),_n=function(i){function n(t){return i.call(this,{code:t,units:Ie.METERS,extent:Lu,global:!0,worldExtent:Fu,getPointResolution:function(e,r){return e/Il(r[1]/Bn)}})||this}return Au(n,i),n}(ia),oa=[new _n("EPSG:3857"),new _n("EPSG:102100"),new _n("EPSG:102113"),new _n("EPSG:900913"),new _n("http://www.opengis.net/def/crs/EPSG/0/3857"),new _n("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Du(i,n,t){var e=i.length,r=t>1?t:2,o=n;void 0===o&&(o=r>2?i.slice():new Array(e));for(var a=0;a<e;a+=r){o[a]=gn*i[a]/180;var l=Bn*Math.log(Math.tan(Math.PI*(+i[a+1]+90)/360));l>Nr?l=Nr:l<-Nr&&(l=-Nr),o[a+1]=l}return o}function bu(i,n,t){var e=i.length,r=t>1?t:2,o=n;void 0===o&&(o=r>2?i.slice():new Array(e));for(var a=0;a<e;a+=r)o[a]=180*i[a]/gn,o[a+1]=360*Math.atan(Math.exp(i[a+1]/Bn))/Math.PI-90;return o}var Zu=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),aa=[-180,-90,180,90],ku=6378137*Math.PI/180,Be=function(i){function n(t,e){return i.call(this,{code:t,units:Ie.DEGREES,extent:aa,axisOrientation:e,global:!0,metersPerUnit:ku,worldExtent:aa})||this}return Zu(n,i),n}(ia),sa=[new Be("CRS:84"),new Be("EPSG:4326","neu"),new Be("urn:ogc:def:crs:OGC:1.3:CRS84"),new Be("urn:ogc:def:crs:OGC:2:84"),new Be("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Be("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Be("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],kr={},Qt={};function Gr(i,n,t){var e=i.getCode(),r=n.getCode();e in Qt||(Qt[e]={}),Qt[e][r]=t}function wi(i,n,t){var e=t||6371008.8,r=mr(i[1]),o=mr(n[1]),a=(o-r)/2,l=mr(n[0]-i[0])/2,u=Math.sin(a)*Math.sin(a)+Math.sin(l)*Math.sin(l)*Math.cos(r)*Math.cos(o);return 2*e*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}var Ii=!0;function la(i){Ii=!(void 0===i||i)}function Si(i,n,t){var e;if(void 0!==n){for(var r=0,o=i.length;r<o;++r)n[r]=i[r];e=n}else e=i.slice();return e}function ua(i,n,t){if(void 0!==n&&i!==n){for(var e=0,r=i.length;e<r;++e)n[e]=i[e];i=n}return i}function Xu(i){(function Uu(i,n){kr[i]=n})(i.getCode(),i),Gr(i,i,Si)}function St(i){return"string"==typeof i?function Gu(i){return kr[i]||kr[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(i):i||null}function ca(i,n,t,e){var r,o=(i=St(i)).getPointResolutionFunc();if(o)r=o(n,t),e&&e!==i.getUnits()&&(a=i.getMetersPerUnit())&&(r=r*a/Yt[e]);else{var l=i.getUnits();if(l==Ie.DEGREES&&!e||e==Ie.DEGREES)r=n;else{var a,u=Yn(i,St("EPSG:4326"));if(u===ua&&l!==Ie.DEGREES)r=n*i.getMetersPerUnit();else{var c=[t[0]-n/2,t[1],t[0]+n/2,t[1],t[0],t[1]-n/2,t[0],t[1]+n/2];r=(wi((c=u(c,c,2)).slice(0,2),c.slice(2,4))+wi(c.slice(4,6),c.slice(6,8)))/2}void 0!==(a=e?Yt[e]:i.getMetersPerUnit())&&(r/=a)}}return r}function ha(i){(function zu(i){i.forEach(Xu)})(i),i.forEach(function(n){i.forEach(function(t){n!==t&&Gr(n,t,Si)})})}function Ri(i,n){return i?"string"==typeof i?St(i):i:St(n)}function Mi(i,n){return la(),Ye(i,"EPSG:4326",void 0!==n?n:"EPSG:3857")}function yn(i,n){if(i===n)return!0;var t=i.getUnits()===n.getUnits();return(i.getCode()===n.getCode()||Yn(i,n)===Si)&&t}function Yn(i,n){var r=function ju(i,n){var t;return i in Qt&&n in Qt[i]&&(t=Qt[i][n]),t}(i.getCode(),n.getCode());return r||(r=ua),r}function Xn(i,n){return Yn(St(i),St(n))}function Ye(i,n,t){return Xn(n,t)(i,void 0,i.length)}var Rt=null;function pa(){return Rt}function Pi(i,n){return i}function de(i,n){return Ii&&!Rr(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(Ii=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function Ai(i,n){return i}function Xe(i,n){return i}function Vu(i,n){return i}function va(i,n,t){return function(e,r,o,a,l){if(e){if(!r&&!n)return e;var u=n?0:o[0]*r,c=n?0:o[1]*r,h=l?l[0]:0,d=l?l[1]:0,f=i[0]+u/2+h,p=i[2]-u/2+h,v=i[1]+c/2+d,g=i[3]-c/2+d;f>p&&(p=f=(p+f)/2),v>g&&(g=v=(g+v)/2);var _=yt(e[0],f,p),C=yt(e[1],v,g);if(a&&t&&r){var y=30*r;_+=-y*Math.log(1+Math.max(0,f-e[0])/y)+y*Math.log(1+Math.max(0,e[0]-p)/y),C+=-y*Math.log(1+Math.max(0,v-e[1])/y)+y*Math.log(1+Math.max(0,e[1]-g)/y)}return[_,C]}}}function Hu(i){return i}function Li(i,n,t,e){var r=ut(n)/t[0],o=bt(n)/t[1];return e?Math.min(i,Math.max(r,o)):Math.min(i,Math.min(r,o))}function Fi(i,n,t){var e=Math.min(i,n);return e*=Math.log(1+50*Math.max(0,i/n-1))/50+1,t&&(e=Math.max(e,t),e/=Math.log(1+50*Math.max(0,t/i-1))/50+1),yt(e,t/2,2*n)}function ga(i,n,t,e,r){return function(o,a,l,u){if(void 0!==o){var c=e?Li(i,e,l,r):i;return(void 0===t||t)&&u?Fi(o,c,n):yt(o,n,c)}}}function Di(i){if(void 0!==i)return 0}function _a(i){if(void 0!==i)return i}function ya(i){return Math.pow(i,3)}function mn(i){return 1-ya(1-i)}function bi(i){return 3*i*i-2*i*i*i}function ec(i){return i}!function Ku(){ha(oa),ha(sa),function Wu(i,n,t,e){i.forEach(function(r){n.forEach(function(o){Gr(r,o,t),Gr(o,r,e)})})}(sa,oa,Du,bu)}();function ze(i,n,t,e,r,o){for(var a=o||[],l=0,u=n;u<t;u+=e){var c=i[u],h=i[u+1];a[l++]=r[0]*c+r[2]*h+r[4],a[l++]=r[1]*c+r[3]*h+r[5]}return o&&a.length!=l&&(a.length=l),a}function ma(i,n,t,e,r,o,a){for(var l=a||[],u=Math.cos(r),c=Math.sin(r),h=o[0],d=o[1],f=0,p=n;p<t;p+=e){var v=i[p]-h,g=i[p+1]-d;l[f++]=h+v*u-g*c,l[f++]=d+v*c+g*u;for(var _=p+2;_<p+e;++_)l[f++]=i[_]}return a&&l.length!=f&&(l.length=f),l}var ic=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),xa=[1,0,0,1,0,0],oc=function(i){function n(){var t=i.call(this)||this;return t.extent_=[1/0,1/0,-1/0,-1/0],t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=function ke(i){var t,e,r,n=!1;return function(){var o=Array.prototype.slice.call(arguments);return(!n||this!==r||!lt(o,e))&&(n=!0,r=this,e=o,t=i.apply(this,arguments)),t}}(function(e,r,o){if(!o)return this.getSimplifiedGeometry(r);var a=this.clone();return a.applyTransform(o),a.getSimplifiedGeometry(r)}),t}return ic(n,i),n.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},n.prototype.clone=function(){return H()},n.prototype.closestPointXY=function(t,e,r,o){return H()},n.prototype.containsXY=function(t,e){var r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e},n.prototype.getClosestPoint=function(t,e){var r=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r},n.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},n.prototype.computeExtent=function(t){return H()},n.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&on(e),this.extentRevision_=this.getRevision()}return function El(i,n){return n?(n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n):i}(this.extent_,t)},n.prototype.rotate=function(t,e){H()},n.prototype.scale=function(t,e,r){H()},n.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},n.prototype.getSimplifiedGeometry=function(t){return H()},n.prototype.getType=function(){return H()},n.prototype.applyTransform=function(t){H()},n.prototype.intersectsExtent=function(t){return H()},n.prototype.translate=function(t,e){H()},n.prototype.transform=function(t,e){var r=St(t),o=r.getUnits()==Ie.TILE_PIXELS?function(a,l,u){var c=r.getExtent(),h=r.getWorldExtent(),d=bt(h)/bt(c);return ee(xa,h[0],h[3],d,-d,0,0,0),ze(a,0,a.length,u,xa,l),Xn(r,e)(a,l,u)}:Xn(r,e);return this.applyTransform(o),this},n}(re);const ac=oc;var sc=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),lc=function(i){function n(){var t=i.call(this)||this;return t.layout="XY",t.stride=2,t.flatCoordinates=null,t}return sc(n,i),n.prototype.computeExtent=function(t){return function _l(i,n,t,e,r){return Ro(on(r),i,n,t,e)}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},n.prototype.getCoordinates=function(){return H()},n.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},n.prototype.getFlatCoordinates=function(){return this.flatCoordinates},n.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},n.prototype.getLayout=function(){return this.layout},n.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},n.prototype.getSimplifiedGeometryInternal=function(t){return this},n.prototype.getStride=function(){return this.stride},n.prototype.setFlatCoordinates=function(t,e){this.stride=Ca(t),this.layout=t,this.flatCoordinates=e},n.prototype.setCoordinates=function(t,e){H()},n.prototype.setLayout=function(t,e,r){var o;if(t)o=Ca(t);else{for(var a=0;a<r;++a){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}t=function uc(i){var n;return 2==i?n="XY":3==i?n="XYZ":4==i&&(n="XYZM"),n}(o=e.length)}this.layout=t,this.stride=o},n.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},n.prototype.rotate=function(t,e){var r=this.getFlatCoordinates();if(r){var o=this.getStride();ma(r,0,r.length,o,t,e,r),this.changed()}},n.prototype.scale=function(t,e,r){var o=e;void 0===o&&(o=t);var a=r;a||(a=sn(this.getExtent()));var l=this.getFlatCoordinates();if(l){var u=this.getStride();(function nc(i,n,t,e,r,o,a,l){for(var u=l||[],c=a[0],h=a[1],d=0,f=n;f<t;f+=e){var v=i[f+1]-h;u[d++]=c+r*(i[f]-c),u[d++]=h+o*v;for(var g=f+2;g<f+e;++g)u[d++]=i[g]}l&&u.length!=d&&(u.length=d)})(l,0,l.length,u,t,o,a,l),this.changed()}},n.prototype.translate=function(t,e){var r=this.getFlatCoordinates();if(r){var o=this.getStride();(function rc(i,n,t,e,r,o,a){for(var l=a||[],u=0,c=n;c<t;c+=e){l[u++]=i[c]+r,l[u++]=i[c+1]+o;for(var h=c+2;h<c+e;++h)l[u++]=i[h]}a&&l.length!=u&&(l.length=u)})(r,0,r.length,o,t,e,r),this.changed()}},n}(ac);function Ca(i){var n;return"XY"==i?n=2:"XYZ"==i||"XYM"==i?n=3:"XYZM"==i&&(n=4),n}const Zi=lc;function Ea(i,n,t,e,r,o,a){var d,l=i[n],u=i[n+1],c=i[t]-l,h=i[t+1]-u;if(0===c&&0===h)d=n;else{var f=((r-l)*c+(o-u)*h)/(c*c+h*h);if(f>1)d=t;else{if(f>0){for(var p=0;p<e;++p)a[p]=Ue(i[n+p],i[t+p],f);return void(a.length=e)}d=n}}for(p=0;p<e;++p)a[p]=i[d+p];a.length=e}function Ta(i,n,t,e,r){var o=i[n],a=i[n+1];for(n+=e;n<t;n+=e){var l=i[n],u=i[n+1],c=un(o,a,l,u);c>r&&(r=c),o=l,a=u}return r}function Oa(i,n,t,e,r,o,a,l,u,c,h){if(n==t)return c;var d,f;if(0===r){if((f=un(a,l,i[n],i[n+1]))<c){for(d=0;d<e;++d)u[d]=i[n+d];return u.length=e,f}return c}for(var p=h||[NaN,NaN],v=n+e;v<t;)if(Ea(i,v-e,v,e,a,l,p),(f=un(a,l,p[0],p[1]))<c){for(c=f,d=0;d<e;++d)u[d]=p[d];u.length=e,v+=e}else v+=e*Math.max((Math.sqrt(f)-Math.sqrt(c))/r|0,1);if(o&&(Ea(i,t-e,n,e,a,l,p),(f=un(a,l,p[0],p[1]))<c)){for(c=f,d=0;d<e;++d)u[d]=p[d];u.length=e}return c}function Sa(i,n,t,e){for(var r=0,o=t.length;r<o;++r)for(var a=t[r],l=0;l<e;++l)i[n++]=a[l];return n}function We(i,n){return n*Math.round(i/n)}function pc(i,n,t,e,r,o,a){if(n==t)return a;var c,h,l=We(i[n],r),u=We(i[n+1],r);n+=e,o[a++]=l,o[a++]=u;do{if(c=We(i[n],r),h=We(i[n+1],r),(n+=e)==t)return o[a++]=c,o[a++]=h,a}while(c==l&&h==u);for(;n<t;){var d=We(i[n],r),f=We(i[n+1],r);if(n+=e,d!=c||f!=h){var p=c-l,v=h-u,g=d-l,_=f-u;if(p*_==v*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(v<0&&_<v||v==_||v>0&&_>v)){c=d,h=f;continue}o[a++]=c,o[a++]=h,l=c,u=h,c=d,h=f}}return o[a++]=c,o[a++]=h,a}function xn(i,n,t,e,r){for(var o=void 0!==r?r:[],a=0,l=n;l<t;l+=e)o[a++]=i.slice(l,l+e);return o.length=a,o}function Br(i,n,t,e,r){for(var o=void 0!==r?r:[],a=0,l=0,u=t.length;l<u;++l){var c=t[l];o[a++]=xn(i,n,c,e,o[a]),n=c}return o.length=a,o}function Pa(i,n,t,e,r){for(var o=void 0!==r?r:[],a=0,l=0,u=t.length;l<u;++l){var c=t[l];o[a++]=Br(i,n,c,e,o[a]),n=c[c.length-1]}return o.length=a,o}function Aa(i,n,t,e){for(var r=0,o=i[t-e],a=i[t-e+1];n<t;n+=e){var l=i[n],u=i[n+1];r+=a*l-o*u,o=l,a=u}return r/2}var vc=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),gc=function(i){function n(t,e){var r=i.call(this)||this;return r.maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?r.setCoordinates(t,e):r.setFlatCoordinates(e,t),r}return vc(n,i),n.prototype.clone=function(){return new n(this.flatCoordinates.slice(),this.layout)},n.prototype.closestPointXY=function(t,e,r,o){return o<Oo(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Oa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,r,o))},n.prototype.getArea=function(){return Aa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getCoordinates=function(){return xn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},n.prototype.getSimplifiedGeometryInternal=function(t){var e=[];return e.length=function Ni(i,n,t,e,r,o,a){var l=(t-n)/e;if(l<3){for(;n<t;n+=e)o[a++]=i[n],o[a++]=i[n+1];return a}var u=new Array(l);u[0]=1,u[l-1]=1;for(var c=[n,t-e],h=0;c.length>0;){for(var d=c.pop(),f=c.pop(),p=0,v=i[f],g=i[f+1],_=i[d],C=i[d+1],y=f+e;y<d;y+=e){var w=Rl(i[y],i[y+1],v,g,_,C);w>p&&(h=y,p=w)}p>r&&(u[(h-n)/e]=1,f+e<h&&c.push(f,h),h+e<d&&c.push(h,d))}for(y=0;y<l;++y)u[y]&&(o[a++]=i[n+y*e],o[a++]=i[n+y*e+1]);return a}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new n(e,"XY")},n.prototype.getType=function(){return"LinearRing"},n.prototype.intersectsExtent=function(t){return!1},n.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Sa(this.flatCoordinates,0,t,this.stride),this.changed()},n}(Zi);const Fa=gc;var _c=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),yc=function(i){function n(t,e){var r=i.call(this)||this;return r.setCoordinates(t,e),r}return _c(n,i),n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,e,r,o){var a=this.flatCoordinates,l=un(t,e,a[0],a[1]);if(l<o){for(var u=this.stride,c=0;c<u;++c)r[c]=a[c];return r.length=u,l}return o},n.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},n.prototype.computeExtent=function(t){return function gl(i,n){var t=i[0],e=i[1];return ne(t,e,t,e,n)}(this.flatCoordinates,t)},n.prototype.getType=function(){return"Point"},n.prototype.intersectsExtent=function(t){return Io(t,this.flatCoordinates[0],this.flatCoordinates[1])},n.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function hc(i,n,t,e){for(var r=0,o=t.length;r<o;++r)i[n++]=t[r];return n}(this.flatCoordinates,0,t),this.changed()},n}(Zi);const Yr=yc;function mc(i,n,t,e,r){return!Mo(r,function(a){return!qe(i,n,t,e,a[0],a[1])})}function qe(i,n,t,e,r,o){for(var a=0,l=i[t-e],u=i[t-e+1];n<t;n+=e){var c=i[n],h=i[n+1];u<=o?h>o&&(c-l)*(o-u)-(r-l)*(h-u)>0&&a++:h<=o&&(c-l)*(o-u)-(r-l)*(h-u)<0&&a--,l=c,u=h}return 0!==a}function ki(i,n,t,e,r,o){if(0===t.length||!qe(i,n,t[0],e,r,o))return!1;for(var a=1,l=t.length;a<l;++a)if(qe(i,t[a-1],t[a],e,r,o))return!1;return!0}function Gi(i,n,t,e,r){var o=Ro([1/0,1/0,-1/0,-1/0],i,n,t,e);return!!Pt(r,o)&&(!!(rn(r,o)||o[0]>=r[0]&&o[2]<=r[2]||o[1]>=r[1]&&o[3]<=r[3])||function xc(i,n,t,e,r){var o;for(n+=e;n<t;n+=e)if(o=r(i.slice(n-e,n),i.slice(n,n+e)))return o;return!1}(i,n,t,e,function(a,l){return function Tl(i,n,t){var e=!1,r=hi(i,n),o=hi(i,t);if(1===r||1===o)e=!0;else{var a=i[0],l=i[1],u=i[2],c=i[3],f=t[0],p=t[1],v=(p-n[1])/(f-n[0]),g=void 0,_=void 0;!!(2&o)&&!(2&r)&&(e=(g=f-(p-c)/v)>=a&&g<=u),e||!(4&o)||4&r||(e=(_=p-(f-u)*v)>=l&&_<=c),e||!(8&o)||8&r||(e=(g=f-(p-l)/v)>=a&&g<=u),!e&&16&o&&!(16&r)&&(e=(_=p-(f-a)*v)>=l&&_<=c)}return e}(r,a,l)}))}function ba(i,n,t,e,r){return!!(Gi(i,n,t,e,r)||qe(i,n,t,e,r[0],r[1])||qe(i,n,t,e,r[0],r[3])||qe(i,n,t,e,r[2],r[1])||qe(i,n,t,e,r[2],r[3]))}function Cc(i,n,t,e){for(;n<t-e;){for(var r=0;r<e;++r){var o=i[n+r];i[n+r]=i[t-e+r],i[t-e+r]=o}n+=e,t-=e}}function Ui(i,n,t,e){for(var r=0,o=i[t-e],a=i[t-e+1];n<t;n+=e){var l=i[n],u=i[n+1];r+=(l-o)*(u+a),o=l,a=u}return 0===r?void 0:r>0}function ji(i,n,t,e,r){for(var o=void 0!==r&&r,a=0,l=t.length;a<l;++a){var u=t[a],c=Ui(i,n,u,e);(0===a?o&&c||!o&&!c:o&&!c||!o&&c)&&Cc(i,n,u,e),n=u}return n}var Ec=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xr=function(i){function n(t,e,r){var o=i.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,void 0!==e&&r?(o.setFlatCoordinates(e,t),o.ends_=r):o.setCoordinates(t,e),o}return Ec(n,i),n.prototype.appendLinearRing=function(t){this.flatCoordinates?tt(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},n.prototype.clone=function(){var t=new n(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},n.prototype.closestPointXY=function(t,e,r,o){return o<Oo(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function wa(i,n,t,e,r){for(var o=0,a=t.length;o<a;++o){var l=t[o];r=Ta(i,n,l,e,r),n=l}return r}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function Ia(i,n,t,e,r,o,a,l,u,c,h){for(var d=h||[NaN,NaN],f=0,p=t.length;f<p;++f){var v=t[f];c=Oa(i,n,v,e,r,o,a,l,u,c,d),n=v}return c}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,r,o))},n.prototype.containsXY=function(t,e){return ki(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},n.prototype.getArea=function(){return function La(i,n,t,e){for(var r=0,o=0,a=t.length;o<a;++o){var l=t[o];r+=Aa(i,n,l,e),n=l}return r}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},n.prototype.getCoordinates=function(t){var e;return void 0!==t?ji(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,Br(e,0,this.ends_,this.stride)},n.prototype.getEnds=function(){return this.ends_},n.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=sn(this.getExtent());this.flatInteriorPoint_=function Da(i,n,t,e,r,o,a){for(var l,u,c,h,d,f,p,v=r[o+1],g=[],_=0,C=t.length;_<C;++_){var y=t[_];for(h=i[y-e],f=i[y-e+1],l=n;l<y;l+=e)d=i[l],p=i[l+1],(v<=f&&p<=v||f<=v&&v<=p)&&g.push(c=(v-f)/(p-f)*(d-h)+h),h=d,f=p}var x=NaN,T=-1/0;for(g.sort(P),h=g[0],l=1,u=g.length;l<u;++l){d=g[l];var w=Math.abs(d-h);w>T&&ki(i,n,t,e,c=(h+d)/2,v)&&(x=c,T=w),h=d}return isNaN(x)&&(x=r[o]),a?(a.push(x,v,T),a):[x,v,T]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},n.prototype.getInteriorPoint=function(){return new Yr(this.getFlatInteriorPoint(),"XYM")},n.prototype.getLinearRingCount=function(){return this.ends_.length},n.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Fa(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},n.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.ends_,o=[],a=0,l=0,u=r.length;l<u;++l){var c=r[l],h=new Fa(e.slice(a,c),t);o.push(h),a=c}return o},n.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function Na(i,n,t,e,r){for(var o=void 0!==r&&r,a=0,l=t.length;a<l;++a){var u=t[a],c=Ui(i,n,u,e);if(0===a){if(o&&c||!o&&!c)return!1}else if(o&&!c||!o&&c)return!1;n=u}return!0}(t,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ji(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},n.prototype.getSimplifiedGeometryInternal=function(t){var e=[],r=[];return e.length=function Ma(i,n,t,e,r,o,a,l){for(var u=0,c=t.length;u<c;++u){var h=t[u];a=pc(i,n,h,e,r,o,a),l.push(a),n=h}return a}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,r),new n(e,"XY",r)},n.prototype.getType=function(){return"Polygon"},n.prototype.intersectsExtent=function(t){return function Za(i,n,t,e,r){if(!ba(i,n,t[0],e,r))return!1;if(1===t.length)return!0;for(var o=1,a=t.length;o<a;++o)if(mc(i,t[o-1],t[o],e,r)&&!Gi(i,t[o-1],t[o],e,r))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},n.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=function Ra(i,n,t,e,r){for(var o=r||[],a=0,l=0,u=t.length;l<u;++l){var c=Sa(i,n,t[l],e);o[a++]=c,n=c}return o.length=a,o}(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},n}(Zi);const Tc=Xr;function ka(i){var n=i[0],t=i[1],e=i[2],r=i[3],o=[n,t,n,r,e,r,e,t,n,t];return new Xr(o,"XY",[o.length])}var Oc=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ic=function(i){function n(t){var e=i.call(this)||this,r=xt({},t);return e.hints_=[0,0],e.animations_=[],e.projection_=Ri(r.projection,"EPSG:3857"),e.viewportSize_=[100,100],e.targetCenter_=null,e.nextCenter_=null,e.cancelAnchor_=void 0,r.projection&&la(),r.center&&(r.center=de(r.center)),r.extent&&(r.extent=Xe(r.extent)),e.applyOptions_(r),e}return Oc(n,i),n.prototype.applyOptions_=function(t){var e=xt({},t);for(var r in Jt)delete e[r];this.setProperties(e,!0);var o=function Rc(i){var n,t,e,a=void 0!==i.minZoom?i.minZoom:0,l=void 0!==i.maxZoom?i.maxZoom:28,u=void 0!==i.zoomFactor?i.zoomFactor:2,c=void 0!==i.multiWorld&&i.multiWorld,h=void 0===i.smoothResolutionConstraint||i.smoothResolutionConstraint,d=void 0!==i.showFullExtent&&i.showFullExtent,f=Ri(i.projection,"EPSG:3857"),p=f.getExtent(),v=i.constrainOnlyCenter,g=i.extent;if(!c&&!g&&f.isGlobal()&&(v=!1,g=p),void 0!==i.resolutions){var _=i.resolutions;t=_[a],e=void 0!==_[l]?_[l]:_[_.length-1],n=i.constrainResolution?function Ju(i,n,t,e){return function(r,o,a,l){if(void 0!==r){var u=i[0],c=i[i.length-1],h=t?Li(u,t,a,e):u;if(l)return void 0===n||n?Fi(r,h,c):yt(r,c,h);var f=Math.min(h,r),p=Math.floor(V(i,f,o));return i[p]>h&&p<i.length-1?i[p+1]:i[p]}}}(_,h,!v&&g,d):ga(t,e,h,!v&&g,d)}else{var y=(p?Math.max(ut(p),bt(p)):360*Yt[Ie.DEGREES]/f.getMetersPerUnit())/256/Math.pow(2,0),x=y/Math.pow(2,28);void 0!==(t=i.maxResolution)?a=0:t=y/Math.pow(u,a),void 0===(e=i.minResolution)&&(e=void 0!==i.maxZoom?void 0!==i.maxResolution?t/Math.pow(u,l):y/Math.pow(u,l):x),l=a+Math.floor(Math.log(t/e)/Math.log(u)),e=t/Math.pow(u,l-a),n=i.constrainResolution?function Qu(i,n,t,e,r,o){return function(a,l,u,c){if(void 0!==a){var h=r?Li(n,r,u,o):n,d=void 0!==t?t:0;if(c)return void 0===e||e?Fi(a,h,d):yt(a,d,h);var v=Math.ceil(Math.log(n/h)/Math.log(i)-1e-9),g=-l*(.5-1e-9)+.5,_=Math.min(h,a),C=Math.floor(Math.log(n/_)/Math.log(i)+g),y=Math.max(v,C);return yt(n/Math.pow(i,y),d,h)}}}(u,t,e,h,!v&&g,d):ga(t,e,h,!v&&g,d)}return{constraint:n,maxResolution:t,minResolution:e,minZoom:a,zoomFactor:u}}(t);this.maxResolution_=o.maxResolution,this.minResolution_=o.minResolution,this.zoomFactor_=o.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=o.minZoom;var a=function Sc(i){if(void 0!==i.extent)return va(i.extent,i.constrainOnlyCenter,void 0===i.smoothExtentConstraint||i.smoothExtentConstraint);var t=Ri(i.projection,"EPSG:3857");if(!0!==i.multiWorld&&t.isGlobal()){var e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,va(e,!1,!1)}return Hu}(t),l=o.constraint,u=function Mc(i){if(void 0===i.enableRotation||i.enableRotation){var t=i.constrainRotation;return void 0===t||!0===t?function tc(i){var n=i||mr(5);return function(t,e){return e?t:void 0!==t?Math.abs(t)<=n?0:t:void 0}}():!1===t?_a:"number"==typeof t?function $u(i){var n=2*Math.PI/i;return function(t,e){return e?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}}(t):_a}return Di}(t);this.constraints_={center:a,resolution:l,rotation:u},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)},Object.defineProperty(n.prototype,"padding",{get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var r=this.getCenter();if(r){var o=t||[0,0,0,0];e=e||[0,0,0,0];var a=this.getResolution();this.setCenterInternal([r[0]+a/2*(o[3]-e[3]+e[1]-o[1]),r[1]-a/2*(o[0]-e[0]+e[2]-o[2])])}},enumerable:!1,configurable:!0}),n.prototype.getUpdatedOptions_=function(t){var e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),xt({},e,t)},n.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),r=0;r<e.length;++r){var o=arguments[r];o.center&&((o=xt({},o)).center=de(o.center,this.getProjection())),o.anchor&&((o=xt({},o)).anchor=de(o.anchor,this.getProjection())),e[r]=o}this.animateInternal.apply(this,e)},n.prototype.animateInternal=function(t){var r,e=arguments.length;e>1&&"function"==typeof arguments[e-1]&&(r=arguments[e-1],--e);for(var o=0;o<e&&!this.isDef();++o){var a=arguments[o];a.center&&this.setCenterInternal(a.center),void 0!==a.zoom?this.setZoom(a.zoom):a.resolution&&this.setResolution(a.resolution),void 0!==a.rotation&&this.setRotation(a.rotation)}if(o!==e){for(var l=Date.now(),u=this.targetCenter_.slice(),c=this.targetResolution_,h=this.targetRotation_,d=[];o<e;++o){var f=arguments[o],p={start:l,complete:!1,anchor:f.anchor,duration:void 0!==f.duration?f.duration:1e3,easing:f.easing||bi,callback:r};if(f.center&&(p.sourceCenter=u,p.targetCenter=f.center.slice(),u=p.targetCenter),void 0!==f.zoom?(p.sourceResolution=c,p.targetResolution=this.getResolutionForZoom(f.zoom),c=p.targetResolution):f.resolution&&(p.sourceResolution=c,p.targetResolution=f.resolution,c=p.targetResolution),void 0!==f.rotation){p.sourceRotation=h;var v=cn(f.rotation-h+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=h+v,h=p.targetRotation}Pc(p)?p.complete=!0:l+=p.duration,d.push(p)}this.animations_.push(d),this.setHint(0,1),this.updateAnimations_()}else r&&zr(r,!0)},n.prototype.getAnimating=function(){return this.hints_[0]>0},n.prototype.getInteracting=function(){return this.hints_[1]>0},n.prototype.cancelAnimations=function(){this.setHint(0,-this.hints_[0]);for(var t,e=0,r=this.animations_.length;e<r;++e){var o=this.animations_[e];if(o[0].callback&&zr(o[0].callback,!1),!t)for(var a=0,l=o.length;a<l;++a){var u=o[a];if(!u.complete){t=u.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},n.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,r=this.animations_.length-1;r>=0;--r){for(var o=this.animations_[r],a=!0,l=0,u=o.length;l<u;++l){var c=o[l];if(!c.complete){var d=c.duration>0?(t-c.start)/c.duration:1;d>=1?(c.complete=!0,d=1):a=!1;var f=c.easing(d);if(c.sourceCenter){var p=c.sourceCenter[0],v=c.sourceCenter[1],g=c.targetCenter[0],_=c.targetCenter[1];this.nextCenter_=c.targetCenter,this.targetCenter_=[p+f*(g-p),v+f*(_-v)]}if(c.sourceResolution&&c.targetResolution){var x=1===f?c.targetResolution:c.sourceResolution+f*(c.targetResolution-c.sourceResolution);if(c.anchor){var T=this.getViewportSize_(this.getRotation()),w=this.constraints_.resolution(x,0,T,!0);this.targetCenter_=this.calculateCenterZoom(w,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=x,this.applyTargetState_(!0)}if(void 0!==c.sourceRotation&&void 0!==c.targetRotation){var S=1===f?cn(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+f*(c.targetRotation-c.sourceRotation);if(c.anchor){var O=this.constraints_.rotation(S,!0);this.targetCenter_=this.calculateCenterRotate(O,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=S}if(this.applyTargetState_(!0),e=!0,!c.complete)break}}if(a){this.animations_[r]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var M=o[0].callback;M&&zr(M,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},n.prototype.calculateCenterRotate=function(t,e){var r,o=this.getCenterInternal();return void 0!==o&&(gi(r=[o[0]-e[0],o[1]-e[1]],t-this.getRotation()),function Yl(i,n){i[0]+=+n[0],i[1]+=+n[1]}(r,e)),r},n.prototype.calculateCenterZoom=function(t,e){var r,o=this.getCenterInternal(),a=this.getResolution();return void 0!==o&&void 0!==a&&(r=[e[0]-t*(e[0]-o[0])/a,e[1]-t*(e[1]-o[1])/a]),r},n.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var r=e[0],o=e[1];return[Math.abs(r*Math.cos(t))+Math.abs(o*Math.sin(t)),Math.abs(r*Math.sin(t))+Math.abs(o*Math.cos(t))]}return e},n.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},n.prototype.getCenter=function(){var t=this.getCenterInternal();return t&&Pi(t,this.getProjection())},n.prototype.getCenterInternal=function(){return this.get(Jt.CENTER)},n.prototype.getConstraints=function(){return this.constraints_},n.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},n.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},n.prototype.calculateExtent=function(t){return Ai(this.calculateExtentInternal(t),this.getProjection())},n.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSizeMinusPadding_(),r=this.getCenterInternal();J(r,1);var o=this.getResolution();J(void 0!==o,2);var a=this.getRotation();return J(void 0!==a,3),fi(r,o,a,e)},n.prototype.getMaxResolution=function(){return this.maxResolution_},n.prototype.getMinResolution=function(){return this.minResolution_},n.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},n.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},n.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},n.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},n.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},n.prototype.getProjection=function(){return this.projection_},n.prototype.getResolution=function(){return this.get(Jt.RESOLUTION)},n.prototype.getResolutions=function(){return this.resolutions_},n.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(Xe(t,this.getProjection()),e)},n.prototype.getResolutionForExtentInternal=function(t,e){var r=e||this.getViewportSizeMinusPadding_(),o=ut(t)/r[0],a=bt(t)/r[1];return Math.max(o,a)},n.prototype.getResolutionForValueFunction=function(t){var e=t||2,r=this.getConstrainedResolution(this.maxResolution_),a=Math.log(r/this.minResolution_)/Math.log(e);return function(l){return r/Math.pow(e,l*a)}},n.prototype.getRotation=function(){return this.get(Jt.ROTATION)},n.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),r=this.getConstrainedResolution(this.maxResolution_),a=Math.log(r/this.minResolution_)/e;return function(l){return Math.log(r/l)/e/a}},n.prototype.getViewportSizeMinusPadding_=function(t){var e=this.getViewportSize_(t),r=this.padding_;return r&&(e=[e[0]-r[1]-r[3],e[1]-r[0]-r[2]]),e},n.prototype.getState=function(){var t=this.getProjection(),e=this.getResolution(),r=this.getRotation(),o=this.getCenterInternal(),a=this.padding_;if(a){var l=this.getViewportSizeMinusPadding_();o=Yi(o,this.getViewportSize_(),[l[0]/2+a[3],l[1]/2+a[0]],e,r)}return{center:o.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}},n.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},n.prototype.getZoomForResolution=function(t){var r,o,e=this.minZoom_||0;if(this.resolutions_){var a=V(this.resolutions_,t,1);e=a,r=this.resolutions_[a],o=a==this.resolutions_.length-1?2:r/this.resolutions_[a+1]}else r=this.maxResolution_,o=this.zoomFactor_;return e+Math.log(r/t)/Math.log(o)},n.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=yt(Math.floor(t),0,this.resolutions_.length-2);return this.resolutions_[e]/Math.pow(this.resolutions_[e]/this.resolutions_[e+1],yt(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},n.prototype.fit=function(t,e){var r;if(J(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))J(!pi(t),25),r=ka(o=Xe(t,this.getProjection()));else if("Circle"===t.getType()){var o;(r=ka(o=Xe(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),sn(o))}else{var a=pa();r=a?t.clone().transform(a,this.getProjection()):t}this.fitInternal(r,e)},n.prototype.rotatedExtentForGeometry=function(t){for(var e=this.getRotation(),r=Math.cos(e),o=Math.sin(-e),a=t.getFlatCoordinates(),l=t.getStride(),u=1/0,c=1/0,h=-1/0,d=-1/0,f=0,p=a.length;f<p;f+=l){var v=a[f]*r-a[f+1]*o,g=a[f]*o+a[f+1]*r;u=Math.min(u,v),c=Math.min(c,g),h=Math.max(h,v),d=Math.max(d,g)}return[u,c,h,d]},n.prototype.fitInternal=function(t,e){var r=e||{},o=r.size;o||(o=this.getViewportSizeMinusPadding_());var u,a=void 0!==r.padding?r.padding:[0,0,0,0],l=void 0!==r.nearest&&r.nearest;u=void 0!==r.minResolution?r.minResolution:void 0!==r.maxZoom?this.getResolutionForZoom(r.maxZoom):0;var c=this.rotatedExtentForGeometry(t),h=this.getResolutionForExtentInternal(c,[o[0]-a[1]-a[3],o[1]-a[0]-a[2]]);h=isNaN(h)?u:Math.max(h,u),h=this.getConstrainedResolution(h,l?0:1);var d=this.getRotation(),f=Math.sin(d),p=Math.cos(d),v=sn(c);v[0]+=(a[1]-a[3])/2*h,v[1]+=(a[0]-a[2])/2*h;var C=this.getConstrainedCenter([v[0]*p-v[1]*f,v[1]*p+v[0]*f],h),y=r.callback?r.callback:Ut;void 0!==r.duration?this.animateInternal({resolution:h,center:C,duration:r.duration,easing:r.easing},y):(this.targetResolution_=h,this.targetCenter_=C,this.applyTargetState_(!1,!0),zr(y,!0))},n.prototype.centerOn=function(t,e,r){this.centerOnInternal(de(t,this.getProjection()),e,r)},n.prototype.centerOnInternal=function(t,e,r){this.setCenterInternal(Yi(t,e,r,this.getResolution(),this.getRotation()))},n.prototype.calculateCenterShift=function(t,e,r,o){var a,l=this.padding_;if(l&&t){var u=this.getViewportSizeMinusPadding_(-r),c=Yi(t,o,[u[0]/2+l[3],u[1]/2+l[0]],e,r);a=[t[0]-c[0],t[1]-c[1]]}return a},n.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},n.prototype.adjustCenter=function(t){var e=Pi(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},n.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},n.prototype.adjustResolution=function(t,e){var r=e&&de(e,this.getProjection());this.adjustResolutionInternal(t,r)},n.prototype.adjustResolutionInternal=function(t,e){var r=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*t,0,o,r);e&&(this.targetCenter_=this.calculateCenterZoom(a,e)),this.targetResolution_*=t,this.applyTargetState_()},n.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},n.prototype.adjustRotation=function(t,e){e&&(e=de(e,this.getProjection())),this.adjustRotationInternal(t,e)},n.prototype.adjustRotationInternal=function(t,e){var r=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+t,r);e&&(this.targetCenter_=this.calculateCenterRotate(o,e)),this.targetRotation_+=t,this.applyTargetState_()},n.prototype.setCenter=function(t){this.setCenterInternal(t&&de(t,this.getProjection()))},n.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},n.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},n.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},n.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},n.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},n.prototype.applyTargetState_=function(t,e){var r=this.getAnimating()||this.getInteracting()||e,o=this.constraints_.rotation(this.targetRotation_,r),a=this.getViewportSize_(o),l=this.constraints_.resolution(this.targetResolution_,0,a,r),u=this.constraints_.center(this.targetCenter_,l,a,r,this.calculateCenterShift(this.targetCenter_,l,o,a));this.get(Jt.ROTATION)!==o&&this.set(Jt.ROTATION,o),this.get(Jt.RESOLUTION)!==l&&(this.set(Jt.RESOLUTION,l),this.set("zoom",this.getZoom(),!0)),(!u||!this.get(Jt.CENTER)||!Rr(this.get(Jt.CENTER),u))&&this.set(Jt.CENTER,u),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},n.prototype.resolveConstraints=function(t,e,r){var o=void 0!==t?t:200,a=e||0,l=this.constraints_.rotation(this.targetRotation_),u=this.getViewportSize_(l),c=this.constraints_.resolution(this.targetResolution_,a,u),h=this.constraints_.center(this.targetCenter_,c,u,!1,this.calculateCenterShift(this.targetCenter_,c,l,u));if(0===o&&!this.cancelAnchor_)return this.targetResolution_=c,this.targetRotation_=l,this.targetCenter_=h,void this.applyTargetState_();var d=r||(0===o?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==c||this.getRotation()!==l||!this.getCenterInternal()||!Rr(this.getCenterInternal(),h))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:l,center:h,resolution:c,duration:o,easing:mn,anchor:d}))},n.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},n.prototype.endInteraction=function(t,e,r){var o=r&&de(r,this.getProjection());this.endInteractionInternal(t,e,o)},n.prototype.endInteractionInternal=function(t,e,r){this.setHint(1,-1),this.resolveConstraints(t,e,r)},n.prototype.getConstrainedCenter=function(t,e){var r=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),r)},n.prototype.getConstrainedZoom=function(t,e){var r=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(r,e))},n.prototype.getConstrainedResolution=function(t,e){var r=e||0,o=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,r,o)},n}(re);function zr(i,n){setTimeout(function(){i(n)},0)}function Pc(i){return!(i.sourceCenter&&i.targetCenter&&!Rr(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function Yi(i,n,t,e,r){var o=Math.cos(-r),a=Math.sin(-r),l=i[0]*o-i[1]*a,u=i[1]*o+i[0]*a;return[(l+=(n[0]/2-t[0])*e)*o-(u+=(t[1]-n[1]/2)*e)*(a=-a),u*o+l*a]}const Se=Ic;function Ga(i){return i[0]>0&&i[1]>0}function kt(i,n){return Array.isArray(i)?i:(void 0===n?n=[i,i]:(n[0]=i,n[1]=i),n)}var Lc=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();function Ua(i){i instanceof Sr?i.setMapInternal(null):i instanceof br&&i.getLayers().forEach(Ua)}function ja(i,n){if(i instanceof Sr)i.setMapInternal(n);else if(i instanceof br)for(var t=i.getLayers().getArray(),e=0,r=t.length;e<r;++e)ja(t[e],n)}var Fc=function(i){function n(t){var e=i.call(this)||this,r=function Dc(i){var n=null;void 0!==i.keyboardEventTarget&&(n="string"==typeof i.keyboardEventTarget?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);var r,o,a,t={},e=i.layers&&"function"==typeof i.layers.getLayers?i.layers:new br({layers:i.layers});return t.layergroup=e,t.target=i.target,t.view=i.view instanceof Se?i.view:new Se,void 0!==i.controls&&(Array.isArray(i.controls)?r=new Bt(i.controls.slice()):(J("function"==typeof i.controls.getArray,47),r=i.controls)),void 0!==i.interactions&&(Array.isArray(i.interactions)?o=new Bt(i.interactions.slice()):(J("function"==typeof i.interactions.getArray,48),o=i.interactions)),void 0!==i.overlays?Array.isArray(i.overlays)?a=new Bt(i.overlays.slice()):(J("function"==typeof i.overlays.getArray,49),a=i.overlays):a=new Bt,{controls:r,interactions:o,keyboardEventTarget:n,overlays:a,values:t}}(t);e.loaded_=!0,e.boundHandleBrowserEvent_=e.handleBrowserEvent.bind(e),e.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,e.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:mo,e.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(e),e.coordinateToPixelTransform_=[1,0,0,1,0,0],e.pixelToCoordinateTransform_=[1,0,0,1,0,0],e.frameIndex_=0,e.frameState_=null,e.previousExtent_=null,e.viewPropertyListenerKey_=null,e.viewChangeListenerKey_=null,e.layerGroupPropertyListenerKeys_=null,e.viewport_=document.createElement("div"),e.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),e.viewport_.style.position="relative",e.viewport_.style.overflow="hidden",e.viewport_.style.width="100%",e.viewport_.style.height="100%",e.overlayContainer_=document.createElement("div"),e.overlayContainer_.style.position="absolute",e.overlayContainer_.style.zIndex="0",e.overlayContainer_.style.width="100%",e.overlayContainer_.style.height="100%",e.overlayContainer_.style.pointerEvents="none",e.overlayContainer_.className="ol-overlaycontainer",e.viewport_.appendChild(e.overlayContainer_),e.overlayContainerStopEvent_=document.createElement("div"),e.overlayContainerStopEvent_.style.position="absolute",e.overlayContainerStopEvent_.style.zIndex="0",e.overlayContainerStopEvent_.style.width="100%",e.overlayContainerStopEvent_.style.height="100%",e.overlayContainerStopEvent_.style.pointerEvents="none",e.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",e.viewport_.appendChild(e.overlayContainerStopEvent_),e.mapBrowserEventHandler_=null,e.moveTolerance_=t.moveTolerance,e.keyboardEventTarget_=r.keyboardEventTarget,e.targetChangeHandlerKeys_=null,e.controls=r.controls||new Bt,e.interactions=r.interactions||new Bt,e.overlays_=r.overlays,e.overlayIdIndex_={},e.renderer_=null,e.postRenderFunctions_=[],e.tileQueue_=new Iu(e.getTilePriority.bind(e),e.handleTileChange_.bind(e)),e.addChangeListener("layergroup",e.handleLayerGroupChanged_),e.addChangeListener("view",e.handleViewChanged_),e.addChangeListener("size",e.handleSizeChanged_),e.addChangeListener("target",e.handleTargetChanged_),e.setProperties(r.values);var o=e;return t.view&&!(t.view instanceof Se)&&t.view.then(function(a){o.setView(new Se(a))}),e.controls.addEventListener("add",function(a){a.element.setMap(this)}.bind(e)),e.controls.addEventListener("remove",function(a){a.element.setMap(null)}.bind(e)),e.interactions.addEventListener("add",function(a){a.element.setMap(this)}.bind(e)),e.interactions.addEventListener("remove",function(a){a.element.setMap(null)}.bind(e)),e.overlays_.addEventListener("add",function(a){this.addOverlayInternal_(a.element)}.bind(e)),e.overlays_.addEventListener("remove",function(a){var u=a.element.getId();void 0!==u&&delete this.overlayIdIndex_[u.toString()],a.element.setMap(null)}.bind(e)),e.controls.forEach(function(a){a.setMap(this)}.bind(e)),e.interactions.forEach(function(a){a.setMap(this)}.bind(e)),e.overlays_.forEach(e.addOverlayInternal_.bind(e)),e}return Lc(n,i),n.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},n.prototype.addControl=function(t){this.getControls().push(t)},n.prototype.addInteraction=function(t){this.getInteractions().push(t)},n.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},n.prototype.handleLayerAdd_=function(t){ja(t.layer,this)},n.prototype.addOverlay=function(t){this.getOverlays().push(t)},n.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},n.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),i.prototype.disposeInternal.call(this)},n.prototype.forEachFeatureAtPixel=function(t,e,r){if(this.frameState_&&this.renderer_){var o=this.getCoordinateFromPixelInternal(t);return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance:0,!1!==r.checkWrapped,e,null,void 0!==r.layerFilter?r.layerFilter:Dt,null)}},n.prototype.getFeaturesAtPixel=function(t,e){var r=[];return this.forEachFeatureAtPixel(t,function(o){r.push(o)},e),r},n.prototype.getAllLayers=function(){var t=[];return function e(r){r.forEach(function(o){o instanceof br?e(o.getLayers()):t.push(o)})}(this.getLayers()),t},n.prototype.forEachLayerAtPixel=function(t,e,r){if(this.frameState_&&this.renderer_){var o=r||{};return this.renderer_.forEachLayerAtPixel(t,this.frameState_,void 0!==o.hitTolerance?o.hitTolerance:0,e,o.layerFilter||Dt)}},n.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_||!this.renderer_)return!1;var r=this.getCoordinateFromPixelInternal(t);return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,void 0!==(e=void 0!==e?e:{}).hitTolerance?e.hitTolerance:0,!1!==e.checkWrapped,void 0!==e.layerFilter?e.layerFilter:Dt,null)},n.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},n.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},n.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),r="changedTouches"in t?t.changedTouches[0]:t;return[r.clientX-e.left,r.clientY-e.top]},n.prototype.getTarget=function(){return this.get("target")},n.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},n.prototype.getCoordinateFromPixel=function(t){return Pi(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},n.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?_t(e.pixelToCoordinateTransform,t.slice()):null},n.prototype.getControls=function(){return this.controls},n.prototype.getOverlays=function(){return this.overlays_},n.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},n.prototype.getInteractions=function(){return this.interactions},n.prototype.getLayerGroup=function(){return this.get("layergroup")},n.prototype.setLayers=function(t){var e=this.getLayerGroup();if(t instanceof Bt)e.setLayers(t);else{var r=e.getLayers();r.clear(),r.extend(t)}},n.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},n.prototype.getLoadingOrNotReady=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var o=t[e];if(o.visible){var a=o.layer.getRenderer();if(a&&!a.ready)return!0;var l=o.layer.getSource();if(l&&l.loading)return!0}}return!1},n.prototype.getPixelFromCoordinate=function(t){var e=de(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},n.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?_t(e.coordinateToPixelTransform,t.slice(0,2)):null},n.prototype.getRenderer=function(){return this.renderer_},n.prototype.getSize=function(){return this.get("size")},n.prototype.getView=function(){return this.get("view")},n.prototype.getViewport=function(){return this.viewport_},n.prototype.getOverlayContainer=function(){return this.overlayContainer_},n.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},n.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},n.prototype.getTilePriority=function(t,e,r,o){return function Su(i,n,t,e,r){if(!i||!(t in i.wantedTiles)||!i.wantedTiles[t][n.getKey()])return Zr;var o=i.viewState.center,a=e[0]-o[0],l=e[1]-o[1];return 65536*Math.log(r)+Math.sqrt(a*a+l*l)/r}(this.frameState_,t,e,r,o)},n.prototype.handleBrowserEvent=function(t,e){var o=new we(e||t.type,this,t);this.handleMapBrowserEvent(o)},n.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent,r=e.type;if("pointerdown"===r||"wheel"===r||"keydown"===r){var o=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():o,l=e.target;if(this.overlayContainerStopEvent_.contains(l)||!(a===o?o.documentElement:a).contains(l))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t))for(var u=this.getInteractions().getArray().slice(),c=u.length-1;c>=0;c--){var h=u[c];if(h.getMap()===this&&h.getActive()&&this.getTargetElement()&&(!h.handleEvent(t)||t.propagationStopped))break}}},n.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var r=this.maxTilesLoading_,o=r;if(t){var a=t.viewHints;if(a[0]||a[1]){var l=Date.now()-t.time>8;r=l?0:8,o=l?0:2}}e.getTilesLoading()<r&&(e.reprioritize(),e.loadMoreTiles(r,o))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener("rendercomplete")&&this.renderer_.dispatchRenderEvent("rendercomplete",t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new vn("loadend",this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new vn("loadstart",this,t))));for(var u=this.postRenderFunctions_,c=0,h=u.length;c<h;++c)u[c](this,t);u.length=0},n.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},n.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)dt(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,yi(this.viewport_)}var r=this.getTargetElement();if(r){for(var o in r.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Cu(this,this.moveTolerance_),vt)this.mapBrowserEventHandler_.addEventListener(vt[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!xo&&{passive:!1});var a=this.getOwnerDocument().defaultView,l=this.keyboardEventTarget_?this.keyboardEventTarget_:r;this.targetChangeHandlerKeys_=[nt(l,"keydown",this.handleBrowserEvent,this),nt(l,"keypress",this.handleBrowserEvent,this),nt(a,"resize",this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},n.prototype.handleTileChange_=function(){this.render()},n.prototype.handleViewPropertyChanged_=function(){this.render()},n.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(dt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(dt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=nt(t,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=nt(t,"change",this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},n.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(dt),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Te("addlayer",t)),this.layerGroupPropertyListenerKeys_=[nt(t,"propertychange",this.render,this),nt(t,"change",this.render,this),nt(t,"addlayer",this.handleLayerAdd_,this),nt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()},n.prototype.isRendered=function(){return!!this.frameState_},n.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},n.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var o=t[e].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}},n.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},n.prototype.removeControl=function(t){return this.getControls().remove(t)},n.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},n.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},n.prototype.handleLayerRemove_=function(t){Ua(t.layer)},n.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},n.prototype.renderFrame_=function(t){var e=this,r=this.getSize(),o=this.getView(),a=this.frameState_,l=null;if(void 0!==r&&Ga(r)&&o&&o.isDef()){var u=o.getHints(this.frameState_?this.frameState_.viewHints:void 0),c=o.getState();if(l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:fi(c.center,c.resolution,c.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:c,viewHints:u,wantedTiles:{},mapId:rt(this),renderTargets:{}},c.nextCenter&&c.nextResolution){var h=isNaN(c.nextRotation)?c.rotation:c.nextRotation;l.nextExtent=fi(c.nextCenter,c.nextResolution,h,r)}}this.frameState_=l,this.renderer_.renderFrame(l),l&&(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),a&&(!this.previousExtent_||!pi(this.previousExtent_)&&!Fn(l.extent,this.previousExtent_))&&(this.dispatchEvent(new vn("movestart",this,a)),this.previousExtent_=on(this.previousExtent_)),this.previousExtent_&&!l.viewHints[0]&&!l.viewHints[1]&&!Fn(l.extent,this.previousExtent_)&&(this.dispatchEvent(new vn("moveend",this,l)),wo(l.extent,this.previousExtent_))),this.dispatchEvent(new vn("postrender",this,l)),this.renderComplete_=this.hasListener("loadstart")||this.hasListener("loadend")||this.hasListener("rendercomplete")?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){e.postRenderTimeoutHandle_=void 0,e.handlePostRender()},0))},n.prototype.setLayerGroup=function(t){var e=this.getLayerGroup();e&&this.handleLayerRemove_(new Te("removelayer",e)),this.set("layergroup",t)},n.prototype.setSize=function(t){this.set("size",t)},n.prototype.setTarget=function(t){this.set("target",t)},n.prototype.setView=function(t){if(!t||t instanceof Se)this.set("view",t);else{this.set("view",new Se);var e=this;t.then(function(r){e.setView(new Se(r))})}},n.prototype.updateSize=function(){var t=this.getTargetElement(),e=void 0;if(t){var r=getComputedStyle(t),o=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),a=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(o)&&!isNaN(a)&&!Ga(e=[o,a])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(e),this.updateViewportSize_()},n.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(e=[parseInt(r.width,10),parseInt(r.height,10)]),t.setViewportSize(e)}},n}(re);const bc=Fc;var Zc=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Nc=function(i){function n(t){var e=i.call(this)||this,r=t.element;return r&&!t.target&&!r.style.pointerEvents&&(r.style.pointerEvents="auto"),e.element=r||null,e.target_=null,e.map_=null,e.listenerKeys=[],t.render&&(e.render=t.render),t.target&&e.setTarget(t.target),e}return Zc(n,i),n.prototype.disposeInternal=function(){yi(this.element),i.prototype.disposeInternal.call(this)},n.prototype.getMap=function(){return this.map_},n.prototype.setMap=function(t){this.map_&&yi(this.element);for(var e=0,r=this.listenerKeys.length;e<r;++e)dt(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Ut&&this.listenerKeys.push(nt(t,"postrender",this.render,this)),t.render())},n.prototype.render=function(t){},n.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},n}(re);const Xi=Nc;var kc=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gc=function(i){function n(t){var e=this,r=t||{};(e=i.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).ulElement_=document.createElement("ul"),e.collapsed_=void 0===r.collapsed||r.collapsed,e.userCollapsed_=e.collapsed_,e.overrideCollapsible_=void 0!==r.collapsible,e.collapsible_=void 0===r.collapsible||r.collapsible,e.collapsible_||(e.collapsed_=!1);var o=void 0!==r.className?r.className:"ol-attribution",a=void 0!==r.tipLabel?r.tipLabel:"Attributions",l=void 0!==r.expandClassName?r.expandClassName:o+"-expand",u=void 0!==r.collapseLabel?r.collapseLabel:"\u203a",c=void 0!==r.collapseClassName?r.collapseClassName:o+"-collapse";"string"==typeof u?(e.collapseLabel_=document.createElement("span"),e.collapseLabel_.textContent=u,e.collapseLabel_.className=c):e.collapseLabel_=u;var h=void 0!==r.label?r.label:"i";"string"==typeof h?(e.label_=document.createElement("span"),e.label_.textContent=h,e.label_.className=l):e.label_=h;var d=e.collapsible_&&!e.collapsed_?e.collapseLabel_:e.label_;e.toggleButton_=document.createElement("button"),e.toggleButton_.setAttribute("type","button"),e.toggleButton_.setAttribute("aria-expanded",String(!e.collapsed_)),e.toggleButton_.title=a,e.toggleButton_.appendChild(d),e.toggleButton_.addEventListener("click",e.handleClick_.bind(e),!1);var p=e.element;return p.className=o+" "+Pr+" "+_i+(e.collapsed_&&e.collapsible_?" "+qo:"")+(e.collapsible_?"":" ol-uncollapsible"),p.appendChild(e.toggleButton_),p.appendChild(e.ulElement_),e.renderedAttributions_=[],e.renderedVisible_=!0,e}return kc(n,i),n.prototype.collectSourceAttributions_=function(t){for(var e={},r=[],o=!0,a=t.layerStatesArray,l=0,u=a.length;l<u;++l){var c=a[l];if(Ir(c,t.viewState)){var h=c.layer.getSource();if(h){var d=h.getAttributions();if(d){var f=d(t);if(f)if(o=o&&!1!==h.getAttributionsCollapsible(),Array.isArray(f))for(var p=0,v=f.length;p<v;++p)f[p]in e||(r.push(f[p]),e[f[p]]=!0);else f in e||(r.push(f),e[f]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(o),r},n.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),r=e.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!lt(e,this.renderedAttributions_)){!function nu(i){for(;i.lastChild;)i.removeChild(i.lastChild)}(this.ulElement_);for(var o=0,a=e.length;o<a;++o){var l=document.createElement("li");l.innerHTML=e[o],this.ulElement_.appendChild(l)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},n.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},n.prototype.handleToggle_=function(){this.element.classList.toggle(qo),this.collapsed_?Jo(this.collapseLabel_,this.label_):Jo(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},n.prototype.getCollapsible=function(){return this.collapsible_},n.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},n.prototype.setCollapsed=function(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},n.prototype.getCollapsed=function(){return this.collapsed_},n.prototype.render=function(t){this.updateElement_(t.frameState)},n}(Xi);const Uc=Gc;var jc=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bc=function(i){function n(t){var e=this,r=t||{};e=i.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var o=void 0!==r.className?r.className:"ol-rotate",a=void 0!==r.label?r.label:"\u21e7",l=void 0!==r.compassClassName?r.compassClassName:"ol-compass";e.label_=null,"string"==typeof a?(e.label_=document.createElement("span"),e.label_.className=l,e.label_.textContent=a):(e.label_=a,e.label_.classList.add(l));var u=r.tipLabel?r.tipLabel:"Reset rotation",c=document.createElement("button");c.className=o+"-reset",c.setAttribute("type","button"),c.title=u,c.appendChild(e.label_),c.addEventListener("click",e.handleClick_.bind(e),!1);var d=e.element;return d.className=o+" "+Pr+" "+_i,d.appendChild(c),e.callResetNorth_=r.resetNorth?r.resetNorth:void 0,e.duration_=void 0!==r.duration?r.duration:250,e.autoHide_=void 0===r.autoHide||r.autoHide,e.rotation_=void 0,e.autoHide_&&e.element.classList.add(Mr),e}return jc(n,i),n.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},n.prototype.resetNorth_=function(){var e=this.getMap().getView();if(e){var r=e.getRotation();void 0!==r&&(this.duration_>0&&r%(2*Math.PI)!=0?e.animate({rotation:0,duration:this.duration_,easing:mn}):e.setRotation(0))}},n.prototype.render=function(t){var e=t.frameState;if(e){var r=e.viewState.rotation;if(r!=this.rotation_){var o="rotate("+r+"rad)";if(this.autoHide_){var a=this.element.classList.contains(Mr);a||0!==r?a&&0!==r&&this.element.classList.remove(Mr):this.element.classList.add(Mr)}this.label_.style.transform=o}this.rotation_=r}},n}(Xi);const Yc=Bc;var Xc=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),zc=function(i){function n(t){var e=this,r=t||{};e=i.call(this,{element:document.createElement("div"),target:r.target})||this;var o=void 0!==r.className?r.className:"ol-zoom",a=void 0!==r.delta?r.delta:1,l=void 0!==r.zoomInClassName?r.zoomInClassName:o+"-in",u=void 0!==r.zoomOutClassName?r.zoomOutClassName:o+"-out",c=void 0!==r.zoomInLabel?r.zoomInLabel:"+",h=void 0!==r.zoomOutLabel?r.zoomOutLabel:"\u2013",d=void 0!==r.zoomInTipLabel?r.zoomInTipLabel:"Zoom in",f=void 0!==r.zoomOutTipLabel?r.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=l,p.setAttribute("type","button"),p.title=d,p.appendChild("string"==typeof c?document.createTextNode(c):c),p.addEventListener("click",e.handleClick_.bind(e,a),!1);var v=document.createElement("button");v.className=u,v.setAttribute("type","button"),v.title=f,v.appendChild("string"==typeof h?document.createTextNode(h):h),v.addEventListener("click",e.handleClick_.bind(e,-a),!1);var _=e.element;return _.className=o+" "+Pr+" "+_i,_.appendChild(p),_.appendChild(v),e.duration_=void 0!==r.duration?r.duration:250,e}return Xc(n,i),n.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},n.prototype.zoomByDelta_=function(t){var r=this.getMap().getView();if(r){var o=r.getZoom();if(void 0!==o){var a=r.getConstrainedZoom(o+t);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:a,duration:this.duration_,easing:mn})):r.setZoom(a)}}},n}(Xi);const Wc=zc;function Ba(i){var n=i||{},t=new Bt;return(void 0===n.zoom||n.zoom)&&t.push(new Wc(n.zoomOptions)),(void 0===n.rotate||n.rotate)&&t.push(new Yc(n.rotateOptions)),(void 0===n.attribution||n.attribution)&&t.push(new Uc(n.attributionOptions)),t}var qc=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Vc=function(i){function n(t){var e=i.call(this)||this;return t&&t.handleEvent&&(e.handleEvent=t.handleEvent),e.map_=null,e.setActive(!0),e}return qc(n,i),n.prototype.getActive=function(){return this.get("active")},n.prototype.getMap=function(){return this.map_},n.prototype.handleEvent=function(t){return!0},n.prototype.setActive=function(t){this.set("active",t)},n.prototype.setMap=function(t){this.map_=t},n}(re);function zi(i,n,t,e){var r=i.getZoom();if(void 0!==r){var o=i.getConstrainedZoom(r+n),a=i.getResolutionForZoom(o);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:a,anchor:t,duration:void 0!==e?e:250,easing:mn})}}const zn=Vc;var Hc=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jc=function(i){function n(t){var e=i.call(this)||this,r=t||{};return e.delta_=r.delta?r.delta:1,e.duration_=void 0!==r.duration?r.duration:250,e}return Hc(n,i),n.prototype.handleEvent=function(t){var e=!1;if(t.type==vt.DBLCLICK){var r=t.originalEvent,a=t.coordinate,l=r.shiftKey?-this.delta_:this.delta_;zi(t.map.getView(),l,a,this.duration_),r.preventDefault(),e=!0}return!e},n}(zn);const Qc=Jc;var $c=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),th=function(i){function n(t){var e=this,r=t||{};return e=i.call(this,r)||this,r.handleDownEvent&&(e.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(e.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(e.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(e.handleUpEvent=r.handleUpEvent),r.stopDown&&(e.stopDown=r.stopDown),e.handlingDownUpSequence=!1,e.targetPointers=[],e}return $c(n,i),n.prototype.getPointerCount=function(){return this.targetPointers.length},n.prototype.handleDownEvent=function(t){return!1},n.prototype.handleDragEvent=function(t){},n.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==vt.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==vt.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==vt.POINTERDOWN){var o=this.handleDownEvent(t);this.handlingDownUpSequence=o,e=this.stopDown(o)}else t.type==vt.POINTERMOVE&&this.handleMoveEvent(t);return!e},n.prototype.handleMoveEvent=function(t){},n.prototype.handleUpEvent=function(t){return!1},n.prototype.stopDown=function(t){return t},n.prototype.updateTrackedPointers_=function(t){t.activePointers&&(this.targetPointers=t.activePointers)},n}(zn);function Wi(i){for(var n=i.length,t=0,e=0,r=0;r<n;r++)t+=i[r].clientX,e+=i[r].clientY;return[t/n,e/n]}const Wn=th;function qi(i){var n=arguments;return function(t){for(var e=!0,r=0,o=n.length;r<o&&(e=e&&n[r](t));++r);return e}}var eh=function(i){var n=i.originalEvent;return n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},Xa=function(i){return!i.map.getTargetElement().hasAttribute("tabindex")||function(i){var n=i.map.getTargetElement(),t=i.map.getOwnerDocument().activeElement;return n.contains(t)}(i)},rh=Dt,za=function(i){var n=i.originalEvent;return 0==n.button&&!(sl&&ll&&n.ctrlKey)},Wa=function(i){var n=i.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&!n.shiftKey},ih=function(i){var n=i.originalEvent;return!n.altKey&&!(n.metaKey||n.ctrlKey)&&n.shiftKey},qa=function(i){var n=i.originalEvent,t=n.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t&&!n.target.isContentEditable},Vi=function(i){var n=i.originalEvent;return J(void 0!==n,56),"mouse"==n.pointerType},oh=function(i){var n=i.originalEvent;return J(void 0!==n,56),n.isPrimary&&0===n.button},ah=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),sh=function(i){function n(t){var e=i.call(this,{stopDown:nn})||this,r=t||{};e.kinetic_=r.kinetic,e.lastCentroid=null,e.panning_=!1;var o=r.condition?r.condition:qi(Wa,oh);return e.condition_=r.onFocusOnly?qi(Xa,o):o,e.noKinetic_=!1,e}return ah(n,i),n.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e=this.targetPointers,r=Wi(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var o=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],l=t.map.getView();(function Wl(i,n){i[0]*=n,i[1]*=n})(o,l.getResolution()),gi(o,l.getRotation()),l.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()},n.prototype.handleUpEvent=function(t){var e=t.map,r=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),l=r.getCenterInternal(),u=e.getPixelFromCoordinateInternal(l),c=e.getCoordinateFromPixelInternal([u[0]-o*Math.cos(a),u[1]-o*Math.sin(a)]);r.animateInternal({center:r.getConstrainedCenter(c),duration:500,easing:mn})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var r=t.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},n}(Wn);const lh=sh;var uh=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),ch=function(i){function n(t){var e=this,r=t||{};return(e=i.call(this,{stopDown:nn})||this).condition_=r.condition?r.condition:eh,e.lastAngle_=void 0,e.duration_=void 0!==r.duration?r.duration:250,e}return uh(n,i),n.prototype.handleDragEvent=function(t){if(Vi(t)){var e=t.map,r=e.getView();if(r.getConstraints().rotation!==Di){var o=e.getSize(),a=t.pixel,l=Math.atan2(o[1]/2-a[1],a[0]-o[0]/2);void 0!==this.lastAngle_&&r.adjustRotationInternal(-(l-this.lastAngle_)),this.lastAngle_=l}}},n.prototype.handleUpEvent=function(t){return!Vi(t)||(t.map.getView().endInteraction(this.duration_),!1)},n.prototype.handleDownEvent=function(t){return!(!Vi(t)||!za(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},n}(Wn);const hh=ch;var fh=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),dh=function(i){function n(t){var e=i.call(this)||this;return e.geometry_=null,e.element_=document.createElement("div"),e.element_.style.position="absolute",e.element_.style.pointerEvents="auto",e.element_.className="ol-box "+t,e.map_=null,e.startPixel_=null,e.endPixel_=null,e}return fh(n,i),n.prototype.disposeInternal=function(){this.setMap(null)},n.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,r="px",o=this.element_.style;o.left=Math.min(t[0],e[0])+r,o.top=Math.min(t[1],e[1])+r,o.width=Math.abs(e[0]-t[0])+r,o.height=Math.abs(e[1]-t[1])+r},n.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},n.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},n.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,o=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new Tc([o])},n.prototype.getGeometry=function(){return this.geometry_},n}(L);const ph=dh;var Va=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ki=function(i){function n(t,e,r){var o=i.call(this,t)||this;return o.coordinate=e,o.mapBrowserEvent=r,o}return Va(n,i),n}(ce),vh=function(i){function n(t){var e=i.call(this)||this,r=t||{};return e.box_=new ph(r.className||"ol-dragbox"),e.minArea_=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(e.onBoxEnd=r.onBoxEnd),e.startPixel_=null,e.condition_=r.condition?r.condition:za,e.boxEndCondition_=r.boxEndCondition?r.boxEndCondition:e.defaultBoxEndCondition,e}return Va(n,i),n.prototype.defaultBoxEndCondition=function(t,e,r){var o=r[0]-e[0],a=r[1]-e[1];return o*o+a*a>=this.minArea_},n.prototype.getGeometry=function(){return this.box_.getGeometry()},n.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Ki("boxdrag",t.coordinate,t))},n.prototype.handleUpEvent=function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Ki(e?"boxend":"boxcancel",t.coordinate,t)),!1},n.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ki("boxstart",t.coordinate,t)),!0)},n.prototype.onBoxEnd=function(t){},n}(Wn);const gh=vh;var _h=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),yh=function(i){function n(t){var e=this,r=t||{};return(e=i.call(this,{condition:r.condition?r.condition:ih,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).duration_=void 0!==r.duration?r.duration:200,e.out_=void 0!==r.out&&r.out,e}return _h(n,i),n.prototype.onBoxEnd=function(t){var r=this.getMap().getView(),o=this.getGeometry();if(this.out_){var a=r.rotatedExtentForGeometry(o),l=r.getResolutionForExtentInternal(a),u=r.getResolution()/l;(o=o.clone()).scale(u*u)}r.fitInternal(o,{duration:this.duration_,easing:mn})},n}(gh);const mh=yh;var xh=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ch=function(i){function n(t){var e=i.call(this)||this,r=t||{};return e.defaultCondition_=function(o){return Wa(o)&&qa(o)},e.condition_=void 0!==r.condition?r.condition:e.defaultCondition_,e.duration_=void 0!==r.duration?r.duration:100,e.pixelDelta_=void 0!==r.pixelDelta?r.pixelDelta:128,e}return xh(n,i),n.prototype.handleEvent=function(t){var e=!1;if("keydown"==t.type){var r=t.originalEvent,o=r.keyCode;if(this.condition_(t)&&(40==o||37==o||39==o||38==o)){var l=t.map.getView(),u=l.getResolution()*this.pixelDelta_,c=0,h=0;40==o?h=-u:37==o?c=-u:39==o?c=u:h=u;var d=[c,h];gi(d,l.getRotation()),function Kc(i,n,t){var e=i.getCenterInternal();e&&i.animateInternal({duration:void 0!==t?t:250,easing:ec,center:i.getConstrainedCenter([e[0]+n[0],e[1]+n[1]])})}(l,d,this.duration_),r.preventDefault(),e=!0}}return!e},n}(zn);const Eh=Ch;var Th=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),wh=function(i){function n(t){var e=i.call(this)||this,r=t||{};return e.condition_=r.condition?r.condition:qa,e.delta_=r.delta?r.delta:1,e.duration_=void 0!==r.duration?r.duration:100,e}return Th(n,i),n.prototype.handleEvent=function(t){var e=!1;if("keydown"==t.type||"keypress"==t.type){var r=t.originalEvent,o=r.charCode;if(this.condition_(t)&&(o=="+".charCodeAt(0)||o=="-".charCodeAt(0))){var a=t.map,l=o=="+".charCodeAt(0)?this.delta_:-this.delta_;zi(a.getView(),l,void 0,this.duration_),r.preventDefault(),e=!0}}return!e},n}(zn);const Oh=wh;var Ih=function(){function i(n,t,e){this.decay_=n,this.minVelocity_=t,this.delay_=e,this.points_=[],this.angle_=0,this.initialVelocity_=0}return i.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},i.prototype.update=function(n,t){this.points_.push(n,t,Date.now())},i.prototype.end=function(){if(this.points_.length<6)return!1;var n=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<n)return!1;for(var e=t-3;e>0&&this.points_[e+2]>n;)e-=3;var r=this.points_[t+2]-this.points_[e+2];if(r<1e3/60)return!1;var o=this.points_[t]-this.points_[e],a=this.points_[t+1]-this.points_[e+1];return this.angle_=Math.atan2(a,o),this.initialVelocity_=Math.sqrt(o*o+a*a)/r,this.initialVelocity_>this.minVelocity_},i.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},i.prototype.getAngle=function(){return this.angle_},i}();const Sh=Ih;var Rh=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Mh=function(i){function n(t){var e=this,r=t||{};(e=i.call(this,r)||this).totalDelta_=0,e.lastDelta_=0,e.maxDelta_=void 0!==r.maxDelta?r.maxDelta:1,e.duration_=void 0!==r.duration?r.duration:250,e.timeout_=void 0!==r.timeout?r.timeout:80,e.useAnchor_=void 0===r.useAnchor||r.useAnchor,e.constrainResolution_=void 0!==r.constrainResolution&&r.constrainResolution;var o=r.condition?r.condition:rh;return e.condition_=r.onFocusOnly?qi(Xa,o):o,e.lastAnchor_=null,e.startTime_=void 0,e.mode_=void 0,e.trackpadEventGap_=400,e.deltaPerZoom_=300,e}return Rh(n,i),n.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},n.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if("wheel"!==t.type)return!0;var a,r=t.map,o=t.originalEvent;if(o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),"wheel"==t.type&&(a=o.deltaY,ol&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(a/=mo),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(a*=40)),0===a)return!1;this.lastDelta_=a;var l=Date.now();void 0===this.startTime_&&(this.startTime_=l),(!this.mode_||l-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?"trackpad":"wheel");var u=r.getView();if("trackpad"===this.mode_&&!u.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(u.getAnimating()&&u.cancelAnimations(),u.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),u.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=l,!1;this.totalDelta_+=a;var c=Math.max(this.timeout_-(l-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),c),!1},n.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var r=-yt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),zi(e,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},n.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},n}(zn);const Ph=Mh;var Ah=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Lh=function(i){function n(t){var e=this,r=t||{},o=r;return o.stopDown||(o.stopDown=nn),(e=i.call(this,o)||this).anchor_=null,e.lastAngle_=void 0,e.rotating_=!1,e.rotationDelta_=0,e.threshold_=void 0!==r.threshold?r.threshold:.3,e.duration_=void 0!==r.duration?r.duration:250,e}return Ah(n,i),n.prototype.handleDragEvent=function(t){var e=0,r=this.targetPointers[0],o=this.targetPointers[1],a=Math.atan2(o.clientY-r.clientY,o.clientX-r.clientX);if(void 0!==this.lastAngle_){var l=a-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=l}this.lastAngle_=a;var u=t.map,c=u.getView();if(c.getConstraints().rotation!==Di){var h=u.getViewport().getBoundingClientRect(),d=Wi(this.targetPointers);d[0]-=h.left,d[1]-=h.top,this.anchor_=u.getCoordinateFromPixelInternal(d),this.rotating_&&(u.render(),c.adjustRotationInternal(e,this.anchor_))}},n.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},n}(Wn);const Fh=Lh;var Dh=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),bh=function(i){function n(t){var e=this,r=t||{},o=r;return o.stopDown||(o.stopDown=nn),(e=i.call(this,o)||this).anchor_=null,e.duration_=void 0!==r.duration?r.duration:400,e.lastDistance_=void 0,e.lastScaleDelta_=1,e}return Dh(n,i),n.prototype.handleDragEvent=function(t){var e=1,r=this.targetPointers[0],o=this.targetPointers[1],a=r.clientX-o.clientX,l=r.clientY-o.clientY,u=Math.sqrt(a*a+l*l);void 0!==this.lastDistance_&&(e=this.lastDistance_/u),this.lastDistance_=u;var c=t.map,h=c.getView();1!=e&&(this.lastScaleDelta_=e);var d=c.getViewport().getBoundingClientRect(),f=Wi(this.targetPointers);f[0]-=d.left,f[1]-=d.top,this.anchor_=c.getCoordinateFromPixelInternal(f),c.render(),h.adjustResolutionInternal(e,this.anchor_)},n.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),1))},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},n}(Wn);const Zh=bh;var kh=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gh=function(i){function n(t){return(t=xt({},t)).controls||(t.controls=Ba()),t.interactions||(t.interactions=function Nh(i){var n=i||{},t=new Bt,e=new Sh(-.005,.05,100);return(void 0===n.altShiftDragRotate||n.altShiftDragRotate)&&t.push(new hh),(void 0===n.doubleClickZoom||n.doubleClickZoom)&&t.push(new Qc({delta:n.zoomDelta,duration:n.zoomDuration})),(void 0===n.dragPan||n.dragPan)&&t.push(new lh({onFocusOnly:n.onFocusOnly,kinetic:e})),(void 0===n.pinchRotate||n.pinchRotate)&&t.push(new Fh),(void 0===n.pinchZoom||n.pinchZoom)&&t.push(new Zh({duration:n.zoomDuration})),(void 0===n.keyboard||n.keyboard)&&(t.push(new Eh),t.push(new Oh({delta:n.zoomDelta,duration:n.zoomDuration}))),(void 0===n.mouseWheelZoom||n.mouseWheelZoom)&&t.push(new Ph({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(void 0===n.shiftDragZoom||n.shiftDragZoom)&&t.push(new mh({duration:n.zoomDuration})),t}({onFocusOnly:!0})),i.call(this,t)||this}return kh(n,i),n.prototype.createRenderer=function(){return new fu(this)},n}(bc);const Uh=Gh;var jh=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bh=function(i){function n(t){var e=this,r=t||{},o=xt({},r);return delete o.preload,delete o.useInterimTilesOnError,(e=i.call(this,o)||this).setPreload(void 0!==r.preload?r.preload:0),e.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),e}return jh(n,i),n.prototype.getPreload=function(){return this.get("preload")},n.prototype.setPreload=function(t){this.set("preload",t)},n.prototype.getUseInterimTilesOnError=function(){return this.get("useInterimTilesOnError")},n.prototype.setUseInterimTilesOnError=function(t){this.set("useInterimTilesOnError",t)},n.prototype.getData=function(t){return i.prototype.getData.call(this,t)},n}(Sr);const Yh=Bh;var Xh=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),zh=function(i){function n(t){var e=i.call(this)||this;return e.ready=!0,e.boundHandleImageChange_=e.handleImageChange_.bind(e),e.layer_=t,e.declutterExecutorGroup=null,e}return Xh(n,i),n.prototype.getFeatures=function(t){return H()},n.prototype.getData=function(t){return null},n.prototype.prepareFrame=function(t){return H()},n.prototype.renderFrame=function(t,e){return H()},n.prototype.loadedTileCallback=function(t,e,r){t[e]||(t[e]={}),t[e][r.tileCoord.toString()]=r},n.prototype.createLoadedTileFinder=function(t,e,r){return function(o,a){var l=this.loadedTileCallback.bind(this,r,o);return t.forEachLoadedTile(e,o,a,l)}.bind(this)},n.prototype.forEachFeatureAtCoordinate=function(t,e,r,o,a){},n.prototype.getDataAtPixel=function(t,e,r){return null},n.prototype.getLayer=function(){return this.layer_},n.prototype.handleFontsChanged=function(){},n.prototype.handleImageChange_=function(t){2===t.target.getState()&&this.renderIfReadyAndVisible()},n.prototype.loadImage=function(t){var e=t.getState();return 2!=e&&3!=e&&t.addEventListener("change",this.boundHandleImageChange_),0==e&&(t.load(),e=t.getState()),2==e},n.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()},n.prototype.disposeInternal=function(){delete this.layer_,i.prototype.disposeInternal.call(this)},n}(Go);const Wh=zh;var qh=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ka=[],Cn=null,Kh=function(i){function n(t){var e=i.call(this,t)||this;return e.container=null,e.tempTransform=[1,0,0,1,0,0],e.pixelTransform=[1,0,0,1,0,0],e.inversePixelTransform=[1,0,0,1,0,0],e.context=null,e.containerReused=!1,e.pixelContext_=null,e.frameState=null,e}return qh(n,i),n.prototype.getImageData=function(t,e,r){var o;Cn||function Vh(){var i=document.createElement("canvas");i.width=1,i.height=1,Cn=i.getContext("2d")}(),Cn.clearRect(0,0,1,1);try{Cn.drawImage(t,e,r,1,1,0,0,1,1),o=Cn.getImageData(0,0,1,1).data}catch{return Cn=null,null}return o},n.prototype.getBackground=function(t){var r=this.getLayer().getBackground();return"function"==typeof r&&(r=r(t.viewState.resolution)),r||void 0},n.prototype.useContainer=function(t,e,r){var a,l,o=this.getLayer().getClassName();if(t&&t.className===o&&(!r||t&&t.style.backgroundColor&&lt(Er(t.style.backgroundColor),Er(r)))&&(u=t.firstElementChild)instanceof HTMLCanvasElement&&(l=u.getContext("2d")),l&&l.canvas.style.transform===e?(this.container=t,this.context=l,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(a=document.createElement("div")).className=o;var u,c=a.style;c.position="absolute",c.width="100%",c.height="100%",l=Zt(),a.appendChild(u=l.canvas),(c=u.style).position="absolute",c.left="0",c.transformOrigin="top left",this.container=a,this.context=l}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)},n.prototype.clipUnrotated=function(t,e,r){var o=Ge(r),a=yr(r),l=_r(r),u=gr(r);_t(e.coordinateToPixelTransform,o),_t(e.coordinateToPixelTransform,a),_t(e.coordinateToPixelTransform,l),_t(e.coordinateToPixelTransform,u);var c=this.inversePixelTransform;_t(c,o),_t(c,a),_t(c,l),_t(c,u),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.lineTo(Math.round(u[0]),Math.round(u[1])),t.clip()},n.prototype.dispatchRenderEvent_=function(t,e,r){var o=this.getLayer();if(o.hasListener(t)){var a=new Wo(t,this.inversePixelTransform,r,e);o.dispatchEvent(a)}},n.prototype.preRender=function(t,e){this.frameState=e,this.dispatchRenderEvent_("prerender",t,e)},n.prototype.postRender=function(t,e){this.dispatchRenderEvent_("postrender",t,e)},n.prototype.getRenderTransform=function(t,e,r,o,a,l,u){var d=o/e;return ee(this.tempTransform,a/2,l/2,d,-d,-r,-t[0]+u,-t[1])},n.prototype.getDataAtPixel=function(t,e,r){var o=_t(this.inversePixelTransform,t.slice()),a=this.context,u=this.getLayer().getExtent();if(u&&!Ln(u,_t(e.pixelToCoordinateTransform,t.slice())))return null;var v,h=Math.round(o[0]),d=Math.round(o[1]),f=this.pixelContext_;if(!f){var p=document.createElement("canvas");p.width=1,p.height=1,f=p.getContext("2d"),this.pixelContext_=f}f.clearRect(0,0,1,1);try{f.drawImage(a.canvas,h,d,1,1,0,0,1,1),v=f.getImageData(0,0,1,1).data}catch(g){return"SecurityError"===g.name?(this.pixelContext_=null,new Uint8Array):v}return 0===v[3]?null:v},n.prototype.disposeInternal=function(){delete this.frameState,i.prototype.disposeInternal.call(this)},n}(Wh);const Ha=Kh;var Hh=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jh=function(i){function n(t,e,r){var o=i.call(this)||this,a=r||{};return o.tileCoord=t,o.state=e,o.interimTile=null,o.key="",o.transition_=void 0===a.transition?250:a.transition,o.transitionStarts_={},o.interpolate=!!a.interpolate,o}return Hh(n,i),n.prototype.changed=function(){this.dispatchEvent("change")},n.prototype.release=function(){},n.prototype.getKey=function(){return this.key+"/"+this.tileCoord},n.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(2==t.getState())return this.transition_=0,t;t=t.interimTile}while(t);return this},n.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},n.prototype.getTileCoord=function(){return this.tileCoord},n.prototype.getState=function(){return this.state},n.prototype.setState=function(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},n.prototype.load=function(){H()},n.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(r){if(-1===r)return 1}else this.transitionStarts_[t]=r=e;var o=e-r+1e3/60;return o>=this.transition_?1:ya(o/this.transition_)},n.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},n.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},n}(fn);const Ja=Jh;var Qh=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),$h=function(i){function n(t,e,r,o){var a=i.call(this)||this;return a.extent=t,a.pixelRatio_=r,a.resolution=e,a.state=o,a}return Qh(n,i),n.prototype.changed=function(){this.dispatchEvent("change")},n.prototype.getExtent=function(){return this.extent},n.prototype.getImage=function(){return H()},n.prototype.getPixelRatio=function(){return this.pixelRatio_},n.prototype.getResolution=function(){return this.resolution},n.prototype.getState=function(){return this.state},n.prototype.load=function(){H()},n}(fn);const tf=$h;var ef=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}();function Ji(i,n,t){var e=i,r=!0,o=!1,a=!1,l=[wr(e,"load",function(){a=!0,o||n()})];return e.src&&ul?(o=!0,e.decode().then(function(){r&&n()}).catch(function(u){r&&(a?n():t())})):l.push(wr(e,"error",t)),function(){r=!1,l.forEach(dt)}}!function(i){function n(t,e,r,o,a,l){var u=i.call(this,t,e,r,0)||this;return u.src_=o,u.image_=new Image,null!==a&&(u.image_.crossOrigin=a),u.unlisten_=null,u.state=0,u.imageLoadFunction_=l,u}ef(n,i),n.prototype.getImage=function(){return this.image_},n.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},n.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=bt(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},n.prototype.load=function(){(0==this.state||3==this.state)&&(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Ji(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},n.prototype.setImage=function(t){this.image_=t,this.resolution=bt(this.extent)/this.image_.height},n.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}(tf);var nf=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),rf=function(i){function n(t,e,r,o,a,l){var u=i.call(this,t,e,l)||this;return u.crossOrigin_=o,u.src_=r,u.key=r,u.image_=new Image,null!==o&&(u.image_.crossOrigin=o),u.unlisten_=null,u.tileLoadFunction_=a,u}return nf(n,i),n.prototype.getImage=function(){return this.image_},n.prototype.setImage=function(t){this.image_=t,this.state=2,this.unlistenImage_(),this.changed()},n.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.image_=function of(){var i=Zt(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}(),this.changed()},n.prototype.handleImageLoad_=function(){var t=this.image_;this.state=t.naturalWidth&&t.naturalHeight?2:4,this.unlistenImage_(),this.changed()},n.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Ji(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},n.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},n}(Ja);const Qa=rf;var lf=function(){function i(n,t,e,r,o,a){this.sourceProj_=n,this.targetProj_=t;var l={},u=Xn(this.targetProj_,this.sourceProj_);this.transformInv_=function(x){var T=x[0]+"/"+x[1];return l[T]||(l[T]=u(x)),l[T]},this.maxSourceExtent_=r,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&ut(r)==ut(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ut(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ut(this.targetProj_.getExtent()):null;var c=Ge(e),h=yr(e),d=_r(e),f=gr(e),p=this.transformInv_(c),v=this.transformInv_(h),g=this.transformInv_(d),_=this.transformInv_(f),C=10+(a?Math.max(0,Math.ceil(Sl(vr(e)/(a*a*256*256)))):0);if(this.addQuad_(c,h,d,f,p,v,g,_,C),this.wrapsXInSource_){var y=1/0;this.triangles_.forEach(function(x,T,w){y=Math.min(y,x.source[0][0],x.source[1][0],x.source[2][0])}),this.triangles_.forEach(function(x){if(Math.max(x.source[0][0],x.source[1][0],x.source[2][0])-y>this.sourceWorldWidth_/2){var T=[[x.source[0][0],x.source[0][1]],[x.source[1][0],x.source[1][1]],[x.source[2][0],x.source[2][1]]];T[0][0]-y>this.sourceWorldWidth_/2&&(T[0][0]-=this.sourceWorldWidth_),T[1][0]-y>this.sourceWorldWidth_/2&&(T[1][0]-=this.sourceWorldWidth_),T[2][0]-y>this.sourceWorldWidth_/2&&(T[2][0]-=this.sourceWorldWidth_);var w=Math.min(T[0][0],T[1][0],T[2][0]);Math.max(T[0][0],T[1][0],T[2][0])-w<this.sourceWorldWidth_/2&&(x.source=T)}}.bind(this))}l={}}return i.prototype.addTriangle_=function(n,t,e,r,o,a){this.triangles_.push({source:[r,o,a],target:[n,t,e]})},i.prototype.addQuad_=function(n,t,e,r,o,a,l,u,c){var h=To([o,a,l,u]),d=this.sourceWorldWidth_?ut(h)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&d>.5&&d<1,v=!1;if(c>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(v=ut(To([n,t,e,r]))/this.targetWorldWidth_>.25||v),!p&&this.sourceProj_.isGlobal()&&d&&(v=d>.25||v)),!(!v&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3]))||Pt(h,this.maxSourceExtent_)){var C=0;if(!(v||isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])&&isFinite(u[0])&&isFinite(u[1])))if(c>0)v=!0;else if(1!=(C=(isFinite(o[0])&&isFinite(o[1])?0:8)+(isFinite(a[0])&&isFinite(a[1])?0:4)+(isFinite(l[0])&&isFinite(l[1])?0:2)+(isFinite(u[0])&&isFinite(u[1])?0:1))&&2!=C&&4!=C&&8!=C)return;if(c>0){if(!v){var x=this.transformInv_([(n[0]+e[0])/2,(n[1]+e[1])/2]),T=void 0;T=p?(cn(o[0],f)+cn(l[0],f))/2-cn(x[0],f):(o[0]+l[0])/2-x[0];var S=(o[1]+l[1])/2-x[1];v=T*T+S*S>this.errorThresholdSquared_}if(v){if(Math.abs(n[0]-e[0])<=Math.abs(n[1]-e[1])){var M=[(t[0]+e[0])/2,(t[1]+e[1])/2],A=this.transformInv_(M),b=[(r[0]+n[0])/2,(r[1]+n[1])/2],j=this.transformInv_(b);this.addQuad_(n,t,M,b,o,a,A,j,c-1),this.addQuad_(b,M,e,r,j,A,l,u,c-1)}else{var Y=[(n[0]+t[0])/2,(n[1]+t[1])/2],D=this.transformInv_(Y),z=[(e[0]+r[0])/2,(e[1]+r[1])/2],W=this.transformInv_(z);this.addQuad_(n,Y,z,r,o,D,W,u,c-1),this.addQuad_(Y,t,e,z,D,a,l,W,c-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&C)&&this.addTriangle_(n,e,r,o,l,u),0==(14&C)&&this.addTriangle_(n,e,t,o,l,a),C&&(0==(13&C)&&this.addTriangle_(t,r,n,a,u,o),0==(7&C)&&this.addTriangle_(t,r,e,a,u,l))}},i.prototype.calculateSourceExtent=function(){var n=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(t,e,r){var o=t.source;an(n,o[0]),an(n,o[1]),an(n,o[2])}),n},i.prototype.getTriangles=function(){return this.triangles_},i}();const uf=lf;var $i,Qi={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},cf={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0},ts=[];function es(i,n,t,e,r){i.beginPath(),i.moveTo(0,0),i.lineTo(n,t),i.lineTo(e,r),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(n,e)+1,Math.max(t,r)),i.restore()}function to(i,n){return Math.abs(i[4*n]-210)>2||Math.abs(i[4*n+3]-191.25)>2}function ns(i,n,t,e){var r=Ye(t,n,i),o=ca(n,e,t),a=n.getMetersPerUnit();void 0!==a&&(o*=a);var l=i.getMetersPerUnit();void 0!==l&&(o/=l);var u=i.getExtent();if(!u||Ln(u,r)){var c=ca(i,o,r)/o;isFinite(c)&&c>0&&(o/=c)}return o}var pf=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),vf=function(i){function n(t,e,r,o,a,l,u,c,h,d,f,p){var v=i.call(this,a,0,{interpolate:!!p})||this;v.renderEdges_=void 0!==f&&f,v.pixelRatio_=u,v.gutter_=c,v.canvas_=null,v.sourceTileGrid_=e,v.targetTileGrid_=o,v.wrappedTileCoord_=l||a,v.sourceTiles_=[],v.sourcesListenerKeys_=null,v.sourceZ_=0;var g=o.getTileCoordExtent(v.wrappedTileCoord_),_=v.targetTileGrid_.getExtent(),C=v.sourceTileGrid_.getExtent(),y=_?ln(g,_):g;if(0===vr(y))return v.state=4,v;var x=t.getExtent();x&&(C=C?ln(C,x):x);var T=o.getResolution(v.wrappedTileCoord_[0]),w=function ff(i,n,t,e){var r=sn(t),o=ns(i,n,r,e);return(!isFinite(o)||o<=0)&&Mo(t,function(a){return o=ns(i,n,a,e),isFinite(o)&&o>0}),o}(t,r,y,T);if(!isFinite(w)||w<=0)return v.state=4,v;if(v.triangulation_=new uf(t,r,y,C,w*(void 0!==d?d:.5),T),0===v.triangulation_.getTriangles().length)return v.state=4,v;v.sourceZ_=e.getZForResolution(w);var O=v.triangulation_.calculateSourceExtent();if(C&&(t.canWrapX()?(O[1]=yt(O[1],C[1],C[3]),O[3]=yt(O[3],C[1],C[3])):O=ln(O,C)),vr(O)){for(var M=e.getTileRangeForExtentAndZ(O,v.sourceZ_),A=M.minX;A<=M.maxX;A++)for(var b=M.minY;b<=M.maxY;b++){var j=h(v.sourceZ_,A,b,u);j&&v.sourceTiles_.push(j)}0===v.sourceTiles_.length&&(v.state=4)}else v.state=4;return v}return pf(n,i),n.prototype.getImage=function(){return this.canvas_},n.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(h,d,f){h&&2==h.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(h.tileCoord),image:h.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{var e=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(e),o="number"==typeof r?r:r[0],a="number"==typeof r?r:r[1],l=this.targetTileGrid_.getResolution(e),u=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function df(i,n,t,e,r,o,a,l,u,c,h,d){var f=Zt(Math.round(t*i),Math.round(t*n),ts);if(d||xt(f,Qi),0===u.length)return f.canvas;function p(T){return Math.round(T*t)/t}f.scale(t,t),f.globalCompositeOperation="lighter";var v=[1/0,1/0,-1/0,-1/0];u.forEach(function(T,w,S){!function yl(i,n){n[0]<i[0]&&(i[0]=n[0]),n[2]>i[2]&&(i[2]=n[2]),n[1]<i[1]&&(i[1]=n[1]),n[3]>i[3]&&(i[3]=n[3])}(v,T.extent)});var g=ut(v),_=bt(v),C=Zt(Math.round(t*g/e),Math.round(t*_/e));d||xt(C,Qi);var y=t/e;u.forEach(function(T,w,S){var O=T.extent[0]-v[0],M=-(T.extent[3]-v[3]),A=ut(T.extent),b=bt(T.extent);T.image.width>0&&T.image.height>0&&C.drawImage(T.image,c,c,T.image.width-2*c,T.image.height-2*c,O*y,M*y,A*y,b*y)});var x=Ge(a);return l.getTriangles().forEach(function(T,w,S){var O=T.source,M=T.target,A=O[0][0],b=O[0][1],j=O[1][0],Y=O[1][1],D=O[2][0],z=O[2][1],W=p((M[0][0]-x[0])/o),B=p(-(M[0][1]-x[1])/o),N=p((M[1][0]-x[0])/o),k=p(-(M[1][1]-x[1])/o),Q=p((M[2][0]-x[0])/o),$=p(-(M[2][1]-x[1])/o),st=A,I=b;A=0,b=0;var ht=function Ml(i){for(var n=i.length,t=0;t<n;t++){for(var e=t,r=Math.abs(i[t][t]),o=t+1;o<n;o++){var a=Math.abs(i[o][t]);a>r&&(r=a,e=o)}if(0===r)return null;var l=i[e];i[e]=i[t],i[t]=l;for(var u=t+1;u<n;u++)for(var c=-i[u][t]/i[t][t],h=t;h<n+1;h++)t==h?i[u][h]=0:i[u][h]+=c*i[t][h]}for(var d=new Array(n),f=n-1;f>=0;f--){d[f]=i[f][n]/i[f][f];for(var p=f-1;p>=0;p--)i[p][n]-=i[p][f]*d[f]}return d}([[j-=st,Y-=I,0,0,N-W],[D-=st,z-=I,0,0,Q-W],[0,0,j,Y,k-B],[0,0,D,z,$-B]]);if(ht){if(f.save(),f.beginPath(),function hf(){if(void 0===$i){var i=document.createElement("canvas").getContext("2d");i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",es(i,4,5,4,0),es(i,4,5,0,5);var n=i.getImageData(0,0,3,3).data;$i=to(n,0)||to(n,4)||to(n,8)}return $i}()||!d){f.moveTo(N,k);for(var Ct=W-N,Lt=B-k,Et=0;Et<4;Et++)f.lineTo(N+p((Et+1)*Ct/4),k+p(Et*Lt/3)),3!=Et&&f.lineTo(N+p((Et+1)*Ct/4),k+p((Et+1)*Lt/3));f.lineTo(Q,$)}else f.moveTo(N,k),f.lineTo(W,B),f.lineTo(Q,$);f.clip(),f.transform(ht[0],ht[2],ht[1],ht[3],W,B),f.translate(v[0]-st,v[3]-I),f.scale(e/t,-e/t),f.drawImage(C.canvas,0,0),f.restore()}}),h&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,l.getTriangles().forEach(function(T,w,S){var O=T.target,M=(O[0][0]-x[0])/o,A=-(O[0][1]-x[1])/o,b=(O[1][0]-x[0])/o,j=-(O[1][1]-x[1])/o,Y=(O[2][0]-x[0])/o,D=-(O[2][1]-x[1])/o;f.beginPath(),f.moveTo(b,j),f.lineTo(M,A),f.lineTo(Y,D),f.closePath(),f.stroke()}),f.restore()),f.canvas}(o,a,this.pixelRatio_,u,this.sourceTileGrid_.getExtent(),l,c,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()},n.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,r,o){var a=e.getState();if(0==a||1==a){t++;var l=nt(e,"change",function(u){var c=e.getState();(2==c||3==c||4==c)&&(dt(l),0==--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(l)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,r,o){0==e.getState()&&e.load()})}},n.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(dt),this.sourcesListenerKeys_=null},n.prototype.release=function(){this.canvas_&&(Ho(this.canvas_.getContext("2d")),ts.push(this.canvas_),this.canvas_=null),i.prototype.release.call(this)},n}(Ja);const rs=vf;var is=function(){function i(n,t,e,r){this.minX=n,this.maxX=t,this.minY=e,this.maxY=r}return i.prototype.contains=function(n){return this.containsXY(n[1],n[2])},i.prototype.containsTileRange=function(n){return this.minX<=n.minX&&n.maxX<=this.maxX&&this.minY<=n.minY&&n.maxY<=this.maxY},i.prototype.containsXY=function(n,t){return this.minX<=n&&n<=this.maxX&&this.minY<=t&&t<=this.maxY},i.prototype.equals=function(n){return this.minX==n.minX&&this.minY==n.minY&&this.maxX==n.maxX&&this.maxY==n.maxY},i.prototype.extend=function(n){n.minX<this.minX&&(this.minX=n.minX),n.maxX>this.maxX&&(this.maxX=n.maxX),n.minY<this.minY&&(this.minY=n.minY),n.maxY>this.maxY&&(this.maxY=n.maxY)},i.prototype.getHeight=function(){return this.maxY-this.minY+1},i.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},i.prototype.getWidth=function(){return this.maxX-this.minX+1},i.prototype.intersects=function(n){return this.minX<=n.maxX&&this.maxX>=n.minX&&this.minY<=n.maxY&&this.maxY>=n.minY},i}();function En(i,n,t,e,r){return void 0!==r?(r.minX=i,r.maxX=n,r.minY=t,r.maxY=e,r):new is(i,n,t,e)}const os=is;var gf=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),_f=function(i){function n(t){var e=i.call(this,t)||this;return e.extentChanged=!0,e.renderedExtent_=null,e.renderedProjection=null,e.renderedTiles=[],e.newTiles_=!1,e.tmpExtent=[1/0,1/0,-1/0,-1/0],e.tmpTileRange_=new os(0,0,0,0),e}return gf(n,i),n.prototype.isDrawableTile=function(t){var e=this.getLayer(),r=t.getState(),o=e.getUseInterimTilesOnError();return 2==r||4==r||3==r&&!o},n.prototype.getTile=function(t,e,r,o){var a=o.pixelRatio,l=o.viewState.projection,u=this.getLayer(),h=u.getSource().getTile(t,e,r,a,l);return 3==h.getState()&&(u.getUseInterimTilesOnError()?u.getPreload()>0&&(this.newTiles_=!0):h.setState(2)),this.isDrawableTile(h)||(h=h.getInterimTile()),h},n.prototype.getData=function(t){var e=this.frameState;if(!e)return null;var r=this.getLayer(),o=_t(e.pixelToCoordinateTransform,t.slice()),a=r.getExtent();if(a&&!Ln(a,o))return null;for(var l=e.pixelRatio,u=e.viewState.projection,c=e.viewState,h=r.getRenderSource(),d=h.getTileGridForProjection(c.projection),f=h.getTilePixelRatio(e.pixelRatio),p=d.getZForResolution(c.resolution);p>=d.getMinZoom();--p){var v=d.getTileCoordForCoordAndZ(o,p),g=h.getTile(p,v[1],v[2],l,u);if(!(g instanceof Qa||g instanceof rs))return null;if(2===g.getState()){var _=d.getOrigin(p),C=kt(d.getTileSize(p)),y=d.getResolution(p),x=Math.floor(f*((o[0]-_[0])/y-v[1]*C[0])),T=Math.floor(f*((_[1]-o[1])/y-v[2]*C[1])),w=Math.round(f*h.getGutterForProjection(c.projection));return this.getImageData(g.getImage(),x+w,T+w)}}return null},n.prototype.loadedTileCallback=function(t,e,r){return!!this.isDrawableTile(r)&&i.prototype.loadedTileCallback.call(this,t,e,r)},n.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},n.prototype.renderFrame=function(t,e){var r=t.layerStatesArray[t.layerIndex],o=t.viewState,a=o.projection,l=o.resolution,u=o.center,c=o.rotation,h=t.pixelRatio,d=this.getLayer(),f=d.getSource(),p=f.getRevision(),v=f.getTileGridForProjection(a),g=v.getZForResolution(l,f.zDirection),_=v.getResolution(g),C=t.extent,y=t.viewState.resolution,x=f.getTilePixelRatio(h),T=Math.round(ut(C)/y*h),w=Math.round(bt(C)/y*h),S=r.extent&&Xe(r.extent);S&&(C=ln(C,Xe(r.extent)));var O=_*T/2/x,M=_*w/2/x,A=[u[0]-O,u[1]-M,u[0]+O,u[1]+M],b=v.getTileRangeForExtentAndZ(C,g),j={};j[g]={};var Y=this.createLoadedTileFinder(f,a,j),D=this.tmpExtent,z=this.tmpTileRange_;this.newTiles_=!1;for(var W=c?di(o.center,y,c,t.size):void 0,B=b.minX;B<=b.maxX;++B)for(var N=b.minY;N<=b.maxY;++N)if(!c||v.tileCoordIntersectsViewport([g,B,N],W)){var k=this.getTile(g,B,N,t);if(this.isDrawableTile(k)){var Q=rt(this);if(2==k.getState()&&(j[g][k.tileCoord.toString()]=k,($=k.inTransition(Q))&&1!==r.opacity&&(k.endTransition(Q),$=!1),!this.newTiles_&&($||-1===this.renderedTiles.indexOf(k))&&(this.newTiles_=!0)),1===k.getAlpha(Q,t.time))continue}var st=v.getTileCoordChildTileRange(k.tileCoord,z,D),I=!1;st&&(I=Y(g+1,st)),I||v.forEachTileCoordParentTileRange(k.tileCoord,Y,z,D)}var gt=_/l*h/x;ee(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/h,1/h,c,-T/2,-w/2);var ht=ui(this.pixelTransform);this.useContainer(e,ht,this.getBackground(t));var K=this.context,Ct=K.canvas;pr(this.inversePixelTransform,this.pixelTransform),ee(this.tempTransform,T/2,w/2,gt,gt,0,-T/2,-w/2),Ct.width!=T||Ct.height!=w?(Ct.width=T,Ct.height=w):this.containerReused||K.clearRect(0,0,T,w),S&&this.clipUnrotated(K,t,S),f.getInterpolate()||xt(K,Qi),this.preRender(K,t),this.renderedTiles.length=0;var Et,In,Gt,Lt=Object.keys(j).map(Number);Lt.sort(P),1!==r.opacity||this.containerReused&&!f.getOpaque(t.viewState.projection)?(Et=[],In=[]):Lt=Lt.reverse();for(var tr=Lt.length-1;tr>=0;--tr){var ae=Lt[tr],er=f.getTilePixelSize(ae,h,a),Sn=v.getResolution(ae)/_,Qr=er[0]*Sn*gt,$r=er[1]*Sn*gt,nr=v.getTileCoordForCoordAndZ(Ge(A),ae),rr=v.getTileCoordExtent(nr),De=_t(this.tempTransform,[x*(rr[0]-A[0])/_,x*(A[3]-rr[3])/_]),co=x*f.getGutterForProjection(a),Qe=j[ae];for(var ti in Qe){var $,be=(k=Qe[ti]).tileCoord,Rn=nr[1]-be[1],ho=Math.round(De[0]-(Rn-1)*Qr),ei=nr[2]-be[2],ir=Math.round(De[1]-(ei-1)*$r),_e=ho-(B=Math.round(De[0]-Rn*Qr)),se=ir-(N=Math.round(De[1]-ei*$r)),$e=g===ae,or=!1;if(!($=$e&&1!==k.getAlpha(rt(this),t.time)))if(Et){Gt=[B,N,B+_e,N,B+_e,N+se,B,N+se];for(var Mt=0,ni=Et.length;Mt<ni;++Mt)if(g!==ae&&ae<In[Mt]){var Tt=Et[Mt];Pt([B,N,B+_e,N+se],[Tt[0],Tt[3],Tt[4],Tt[7]])&&(or||(K.save(),or=!0),K.beginPath(),K.moveTo(Gt[0],Gt[1]),K.lineTo(Gt[2],Gt[3]),K.lineTo(Gt[4],Gt[5]),K.lineTo(Gt[6],Gt[7]),K.moveTo(Tt[6],Tt[7]),K.lineTo(Tt[4],Tt[5]),K.lineTo(Tt[2],Tt[3]),K.lineTo(Tt[0],Tt[1]),K.clip())}Et.push(Gt),In.push(ae)}else K.clearRect(B,N,_e,se);this.drawTileImage(k,t,B,N,_e,se,co,$e),Et&&!$?(or&&K.restore(),this.renderedTiles.unshift(k)):this.renderedTiles.push(k),this.updateUsedTiles(t.usedTiles,f,k)}}return this.renderedRevision=p,this.renderedResolution=_,this.extentChanged=!this.renderedExtent_||!Fn(this.renderedExtent_,A),this.renderedExtent_=A,this.renderedPixelRatio=h,this.renderedProjection=a,this.manageTilePyramid(t,f,v,h,a,C,g,d.getPreload()),this.scheduleExpireCache(t,f),this.postRender(K,t),r.extent&&K.restore(),xt(K,cf),ht!==Ct.style.transform&&(Ct.style.transform=ht),this.container},n.prototype.drawTileImage=function(t,e,r,o,a,l,u,c){var h=this.getTileImage(t);if(h){var d=rt(this),f=e.layerStatesArray[e.layerIndex],p=f.opacity*(c?t.getAlpha(d,e.time):1),v=p!==this.context.globalAlpha;v&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(h,u,u,h.width-2*u,h.height-2*u,r,o,a,l),v&&this.context.restore(),p!==f.opacity?e.animate=!0:c&&t.endTransition(d)}},n.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},n.prototype.getTileImage=function(t){return t.getImage()},n.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var r=function(o,a,l){var u=rt(o);u in l.usedTiles&&o.expireCache(l.viewState.projection,l.usedTiles[u])}.bind(null,e);t.postRenderFunctions.push(r)}},n.prototype.updateUsedTiles=function(t,e,r){var o=rt(e);o in t||(t[o]={}),t[o][r.getKey()]=!0},n.prototype.manageTilePyramid=function(t,e,r,o,a,l,u,c,h){var d=rt(e);d in t.wantedTiles||(t.wantedTiles[d]={});var y,x,T,w,S,O,f=t.wantedTiles[d],p=t.tileQueue,v=r.getMinZoom(),g=t.viewState.rotation,_=g?di(t.viewState.center,t.viewState.resolution,g,t.size):void 0,C=0;for(O=v;O<=u;++O)for(x=r.getTileRangeForExtentAndZ(l,O,x),T=r.getResolution(O),w=x.minX;w<=x.maxX;++w)for(S=x.minY;S<=x.maxY;++S)g&&!r.tileCoordIntersectsViewport([O,w,S],_)||(u-O<=c?(++C,0==(y=e.getTile(O,w,S,o,a)).getState()&&(f[y.getKey()]=!0,p.isKeyQueued(y.getKey())||p.enqueue([y,d,r.getTileCoordCenter(y.tileCoord),T])),void 0!==h&&h(y)):e.useTile(O,w,S,a));e.updateCacheSize(C,a)},n}(Ha);const yf=_f;var mf=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),xf=function(i){function n(t){return i.call(this,t)||this}return mf(n,i),n.prototype.createRenderer=function(){return new yf(this)},n}(Yh);const Cf=xf;var Ef=function(){function i(n){this.highWaterMark=void 0!==n?n:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return i.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},i.prototype.expireCache=function(n){for(;this.canExpireCache();)this.pop()},i.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},i.prototype.containsKey=function(n){return this.entries_.hasOwnProperty(n)},i.prototype.forEach=function(n){for(var t=this.oldest_;t;)n(t.value_,t.key_,this),t=t.newer},i.prototype.get=function(n,t){var e=this.entries_[n];return J(void 0!==e,15),e===this.newest_||(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e),e.value_},i.prototype.remove=function(n){var t=this.entries_[n];return J(void 0!==t,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[n],--this.count_,t.value_},i.prototype.getCount=function(){return this.count_},i.prototype.getKeys=function(){var e,n=new Array(this.count_),t=0;for(e=this.newest_;e;e=e.older)n[t++]=e.key_;return n},i.prototype.getValues=function(){var e,n=new Array(this.count_),t=0;for(e=this.newest_;e;e=e.older)n[t++]=e.value_;return n},i.prototype.peekLast=function(){return this.oldest_.value_},i.prototype.peekLastKey=function(){return this.oldest_.key_},i.prototype.peekFirstKey=function(){return this.newest_.key_},i.prototype.peek=function(n){if(this.containsKey(n))return this.entries_[n].value_},i.prototype.pop=function(){var n=this.oldest_;return delete this.entries_[n.key_],n.newer&&(n.newer.older=null),this.oldest_=n.newer,this.oldest_||(this.newest_=null),--this.count_,n.value_},i.prototype.replace=function(n,t){this.get(n),this.entries_[n].value_=t},i.prototype.set=function(n,t){J(!(n in this.entries_),16);var e={key_:n,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=e:this.oldest_=e,this.newest_=e,this.entries_[n]=e,++this.count_},i.prototype.setSize=function(n){this.highWaterMark=n},i}();const Tf=Ef;function as(i,n,t,e){return void 0!==e?(e[0]=i,e[1]=n,e[2]=t,e):[i,n,t]}function qn(i,n,t){return i+"/"+n+"/"+t}function ss(i){return qn(i[0],i[1],i[2])}var Sf=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Rf=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return Sf(n,i),n.prototype.expireCache=function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()},n.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var e=function wf(i){return i.split("/").map(Number)}(this.peekFirstKey()),r=e[0];this.forEach(function(o){o.tileCoord[0]!==r&&(this.remove(ss(o.tileCoord)),o.release())}.bind(this))}},n}(Tf);const ls=Rf;var Mf=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Pf=function(i){function n(t){var e=i.call(this)||this;e.projection=St(t.projection),e.attributions_=us(t.attributions),e.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,e.loading=!1,e.state_=void 0!==t.state?t.state:"ready",e.wrapX_=void 0!==t.wrapX&&t.wrapX,e.interpolate_=!!t.interpolate,e.viewResolver=null,e.viewRejector=null;var r=e;return e.viewPromise_=new Promise(function(o,a){r.viewResolver=o,r.viewRejector=a}),e}return Mf(n,i),n.prototype.getAttributions=function(){return this.attributions_},n.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},n.prototype.getProjection=function(){return this.projection},n.prototype.getResolutions=function(){return H()},n.prototype.getView=function(){return this.viewPromise_},n.prototype.getState=function(){return this.state_},n.prototype.getWrapX=function(){return this.wrapX_},n.prototype.getInterpolate=function(){return this.interpolate_},n.prototype.refresh=function(){this.changed()},n.prototype.setAttributions=function(t){this.attributions_=us(t),this.changed()},n.prototype.setState=function(t){this.state_=t,this.changed()},n}(re);function us(i){return i?Array.isArray(i)?function(n){return i}:"function"==typeof i?i:function(n){return[i]}:null}const cs=Pf;var Af=[0,0,0],Lf=function(){function i(n){var t;if(this.minZoom=void 0!==n.minZoom?n.minZoom:0,this.resolutions_=n.resolutions,J(function xe(i,n,t){var e=n||P;return i.every(function(r,o){if(0===o)return!0;var a=e(i[o-1],r);return!(a>0||t&&0===a)})}(this.resolutions_,function(a,l){return l-a},!0),17),!n.origins)for(var e=0,r=this.resolutions_.length-1;e<r;++e)if(t){if(this.resolutions_[e]/this.resolutions_[e+1]!==t){t=void 0;break}}else t=this.resolutions_[e]/this.resolutions_[e+1];this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==n.origin?n.origin:null,this.origins_=null,void 0!==n.origins&&(this.origins_=n.origins,J(this.origins_.length==this.resolutions_.length,20));var o=n.extent;void 0!==o&&!this.origin_&&!this.origins_&&(this.origin_=Ge(o)),J(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==n.tileSizes&&(this.tileSizes_=n.tileSizes,J(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==n.tileSize?n.tileSize:this.tileSizes_?null:256,J(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==o?o:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==n.sizes?this.fullTileRanges_=n.sizes.map(function(a,l){var u=new os(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1));if(o){var c=this.getTileRangeForExtentAndZ(o,l);u.minX=Math.max(c.minX,u.minX),u.maxX=Math.min(c.maxX,u.maxX),u.minY=Math.max(c.minY,u.minY),u.maxY=Math.min(c.maxY,u.maxY)}return u},this):o&&this.calculateTileRanges_(o)}return i.prototype.forEachTileCoord=function(n,t,e){for(var r=this.getTileRangeForExtentAndZ(n,t),o=r.minX,a=r.maxX;o<=a;++o)for(var l=r.minY,u=r.maxY;l<=u;++l)e([t,o,l])},i.prototype.forEachTileCoordParentTileRange=function(n,t,e,r){var a,l,u=null,c=n[0]-1;for(2===this.zoomFactor_?(a=n[1],l=n[2]):u=this.getTileCoordExtent(n,r);c>=this.minZoom;){if(t(c,2===this.zoomFactor_?En(a=Math.floor(a/2),a,l=Math.floor(l/2),l,e):this.getTileRangeForExtentAndZ(u,c,e)))return!0;--c}return!1},i.prototype.getExtent=function(){return this.extent_},i.prototype.getMaxZoom=function(){return this.maxZoom},i.prototype.getMinZoom=function(){return this.minZoom},i.prototype.getOrigin=function(n){return this.origin_?this.origin_:this.origins_[n]},i.prototype.getResolution=function(n){return this.resolutions_[n]},i.prototype.getResolutions=function(){return this.resolutions_},i.prototype.getTileCoordChildTileRange=function(n,t,e){if(n[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*n[1],o=2*n[2];return En(r,r+1,o,o+1,t)}var a=this.getTileCoordExtent(n,e||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n[0]+1,t)}return null},i.prototype.getTileRangeForTileCoordAndZ=function(n,t,e){if(t>this.maxZoom||t<this.minZoom)return null;var r=n[0],o=n[1],a=n[2];if(t===r)return En(o,a,o,a,e);if(this.zoomFactor_){var l=Math.pow(this.zoomFactor_,t-r),u=Math.floor(o*l),c=Math.floor(a*l);return t<r?En(u,u,c,c,e):En(u,Math.floor(l*(o+1))-1,c,Math.floor(l*(a+1))-1,e)}var f=this.getTileCoordExtent(n,this.tmpExtent_);return this.getTileRangeForExtentAndZ(f,t,e)},i.prototype.getTileRangeExtent=function(n,t,e){var r=this.getOrigin(n),o=this.getResolution(n),a=kt(this.getTileSize(n),this.tmpSize_);return ne(r[0]+t.minX*a[0]*o,r[1]+t.minY*a[1]*o,r[0]+(t.maxX+1)*a[0]*o,r[1]+(t.maxY+1)*a[1]*o,e)},i.prototype.getTileRangeForExtentAndZ=function(n,t,e){var r=Af;this.getTileCoordForXYAndZ_(n[0],n[3],t,!1,r);var o=r[1],a=r[2];return this.getTileCoordForXYAndZ_(n[2],n[1],t,!0,r),En(o,r[1],a,r[2],e)},i.prototype.getTileCoordCenter=function(n){var t=this.getOrigin(n[0]),e=this.getResolution(n[0]),r=kt(this.getTileSize(n[0]),this.tmpSize_);return[t[0]+(n[1]+.5)*r[0]*e,t[1]-(n[2]+.5)*r[1]*e]},i.prototype.getTileCoordExtent=function(n,t){var e=this.getOrigin(n[0]),r=this.getResolution(n[0]),o=kt(this.getTileSize(n[0]),this.tmpSize_),a=e[0]+n[1]*o[0]*r,l=e[1]-(n[2]+1)*o[1]*r;return ne(a,l,a+o[0]*r,l+o[1]*r,t)},i.prototype.getTileCoordForCoordAndResolution=function(n,t,e){return this.getTileCoordForXYAndResolution_(n[0],n[1],t,!1,e)},i.prototype.getTileCoordForXYAndResolution_=function(n,t,e,r,o){var a=this.getZForResolution(e),l=e/this.getResolution(a),u=this.getOrigin(a),c=kt(this.getTileSize(a),this.tmpSize_),h=l*(n-u[0])/e/c[0],d=l*(u[1]-t)/e/c[1];return r?(h=Cr(h,5)-1,d=Cr(d,5)-1):(h=xr(h,5),d=xr(d,5)),as(a,h,d,o)},i.prototype.getTileCoordForXYAndZ_=function(n,t,e,r,o){var a=this.getOrigin(e),l=this.getResolution(e),u=kt(this.getTileSize(e),this.tmpSize_),c=(n-a[0])/l/u[0],h=(a[1]-t)/l/u[1];return r?(c=Cr(c,5)-1,h=Cr(h,5)-1):(c=xr(c,5),h=xr(h,5)),as(e,c,h,o)},i.prototype.getTileCoordForCoordAndZ=function(n,t,e){return this.getTileCoordForXYAndZ_(n[0],n[1],t,!1,e)},i.prototype.getTileCoordResolution=function(n){return this.resolutions_[n[0]]},i.prototype.getTileSize=function(n){return this.tileSize_?this.tileSize_:this.tileSizes_[n]},i.prototype.getFullTileRange=function(n){return this.fullTileRanges_?this.fullTileRanges_[n]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,n):null},i.prototype.getZForResolution=function(n,t){return yt(V(this.resolutions_,n,t||0),this.minZoom,this.maxZoom)},i.prototype.tileCoordIntersectsViewport=function(n,t){return ba(t,0,t.length,2,this.getTileCoordExtent(n))},i.prototype.calculateTileRanges_=function(n){for(var t=this.resolutions_.length,e=new Array(t),r=this.minZoom;r<t;++r)e[r]=this.getTileRangeForExtentAndZ(n,r);this.fullTileRanges_=e},i}();const hs=Lf;function fs(i){var n=i.getDefaultTileGrid();return n||(n=function Zf(i,n,t,e){return function Df(i,n,t,e){var r=void 0!==e?e:"top-left",o=ds(i,n,t);return new hs({extent:i,origin:Cl(i,r),resolutions:o,tileSize:t})}(no(i),n,t,e)}(i),i.setDefaultTileGrid(n)),n}function ds(i,n,t,e){for(var r=void 0!==n?n:42,o=bt(i),a=ut(i),l=kt(void 0!==t?t:256),u=e>0?e:Math.max(a/l[0],o/l[1]),c=r+1,h=new Array(c),d=0;d<c;++d)h[d]=u/Math.pow(2,d);return h}function no(i){var n=(i=St(i)).getExtent();if(!n){var t=180*Yt[Ie.DEGREES]/i.getMetersPerUnit();n=ne(-t,-t,t,t)}return n}var ps=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Nf=function(i){function n(t){var e=i.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate})||this;return e.opaque_=void 0!==t.opaque&&t.opaque,e.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,e.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,e.tileGrid&&kt(e.tileGrid.getTileSize(e.tileGrid.getMinZoom()),[256,256]),e.tileCache=new ls(t.cacheSize||0),e.tmpSize=[0,0],e.key_=t.key||"",e.tileOptions={transition:t.transition,interpolate:t.interpolate},e.zDirection=t.zDirection?t.zDirection:0,e}return ps(n,i),n.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},n.prototype.expireCache=function(t,e){var r=this.getTileCacheForProjection(t);r&&r.expireCache(e)},n.prototype.forEachLoadedTile=function(t,e,r,o){var a=this.getTileCacheForProjection(t);if(!a)return!1;for(var u,c,h,l=!0,d=r.minX;d<=r.maxX;++d)for(var f=r.minY;f<=r.maxY;++f)c=qn(e,d,f),h=!1,a.containsKey(c)&&(h=2===(u=a.get(c)).getState())&&(h=!1!==o(u)),h||(l=!1);return l},n.prototype.getGutterForProjection=function(t){return 0},n.prototype.getKey=function(){return this.key_},n.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},n.prototype.getOpaque=function(t){return this.opaque_},n.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},n.prototype.getTile=function(t,e,r,o,a){return H()},n.prototype.getTileGrid=function(){return this.tileGrid},n.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:fs(t)},n.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return J(null===e||yn(e,t),68),this.tileCache},n.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},n.prototype.getTilePixelSize=function(t,e,r){var o=this.getTileGridForProjection(r),a=this.getTilePixelRatio(e),l=kt(o.getTileSize(t),this.tmpSize);return 1==a?l:function Ac(i,n,t){return void 0===t&&(t=[0,0]),t[0]=i[0]*n+.5|0,t[1]=i[1]*n+.5|0,t}(l,a,this.tmpSize)},n.prototype.getTileCoordForTileUrlFunction=function(t,e){var r=void 0!==e?e:this.getProjection(),o=this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(t=function Ff(i,n,t){var e=n[0],r=i.getTileCoordCenter(n),o=no(t);if(Ln(o,r))return n;var a=ut(o),l=Math.ceil((o[0]-r[0])/a);return r[0]+=a*l,i.getTileCoordForCoordAndZ(r,e)}(o,t,r)),function If(i,n){var t=i[0],e=i[1],r=i[2];if(n.getMinZoom()>t||t>n.getMaxZoom())return!1;var o=n.getFullTileRange(t);return!o||o.containsXY(e,r)}(t,o)?t:null},n.prototype.clear=function(){this.tileCache.clear()},n.prototype.refresh=function(){this.clear(),i.prototype.refresh.call(this)},n.prototype.updateCacheSize=function(t,e){var r=this.getTileCacheForProjection(e);t>r.highWaterMark&&(r.highWaterMark=t)},n.prototype.useTile=function(t,e,r,o){},n}(cs),kf=function(i){function n(t,e){var r=i.call(this,t)||this;return r.tile=e,r}return ps(n,i),n}(ce);const Gf=Nf;function Uf(i,n){var t=/\{z\}/g,e=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g;return function(a,l,u){if(a)return i.replace(t,a[0].toString()).replace(e,a[1].toString()).replace(r,a[2].toString()).replace(o,function(){var h=n.getFullTileRange(a[0]);return J(h,55),(h.getHeight()-a[2]-1).toString()})}}var Xf=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),zf=function(i){function n(t){var e=i.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return e.generateTileUrlFunction_=e.tileUrlFunction===n.prototype.tileUrlFunction,e.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(e.tileUrlFunction=t.tileUrlFunction),e.urls=null,t.urls?e.setUrls(t.urls):t.url&&e.setUrl(t.url),e.tileLoadingKeys_={},e}return Xf(n,i),n.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},n.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},n.prototype.getUrls=function(){return this.urls},n.prototype.handleTileChange=function(t){var a,e=t.target,r=rt(e),o=e.getState();1==o?(this.tileLoadingKeys_[r]=!0,a="tileloadstart"):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],a=3==o?"tileloaderror":2==o?"tileloadend":void 0),null!=a&&this.dispatchEvent(new kf(a,e))},n.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},n.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof e<"u"?this.setKey(e):this.changed()},n.prototype.setUrl=function(t){var e=function Yf(i){var n=[],t=/\{([a-z])-([a-z])\}/.exec(i);if(t){var e=t[1].charCodeAt(0),r=t[2].charCodeAt(0),o=void 0;for(o=e;o<=r;++o)n.push(i.replace(t[0],String.fromCharCode(o)));return n}if(t=/\{(\d+)-(\d+)\}/.exec(i)){for(var a=parseInt(t[2],10),l=parseInt(t[1],10);l<=a;l++)n.push(i.replace(t[0],l.toString()));return n}return n.push(i),n}(t);this.urls=e,this.setUrls(e)},n.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function jf(i,n){for(var t=i.length,e=new Array(t),r=0;r<t;++r)e[r]=Uf(i[r],n);return function Bf(i){return 1===i.length?i[0]:function(n,t,e){if(n){var r=function Of(i){return(i[1]<<i[0])+i[2]}(n),o=cn(r,i.length);return i[o](n,t,e)}}}(e)}(t,this.tileGrid),e):this.setKey(e)},n.prototype.tileUrlFunction=function(t,e,r){},n.prototype.useTile=function(t,e,r){var o=qn(t,e,r);this.tileCache.containsKey(o)&&this.tileCache.get(o)},n}(Gf);const Wf=zf;var qf=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Vf=function(i){function n(t){var e=this,r=void 0===t.imageSmoothing||t.imageSmoothing;return void 0!==t.interpolate&&(r=t.interpolate),(e=i.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Kf,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:r,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this).crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,e.tileClass=void 0!==t.tileClass?t.tileClass:Qa,e.tileCacheForProjection={},e.tileGridForProjection={},e.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,e.renderReprojectionEdges_=!1,e}return qf(n,i),n.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},n.prototype.expireCache=function(t,e){var r=this.getTileCacheForProjection(t);for(var o in this.tileCache.expireCache(this.tileCache==r?e:{}),this.tileCacheForProjection){var a=this.tileCacheForProjection[o];a.expireCache(a==r?e:{})}},n.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!yn(this.getProjection(),t)?0:this.getGutter()},n.prototype.getGutter=function(){return 0},n.prototype.getKey=function(){var t=i.prototype.getKey.call(this);return this.getInterpolate()||(t+=":disable-interpolation"),t},n.prototype.getOpaque=function(t){return!(this.getProjection()&&t&&!yn(this.getProjection(),t))&&i.prototype.getOpaque.call(this,t)},n.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(this.tileGrid&&(!e||yn(e,t)))return this.tileGrid;var r=rt(t);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=fs(t)),this.tileGridForProjection[r]},n.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||yn(e,t))return this.tileCache;var r=rt(t);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new ls(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]},n.prototype.createTile_=function(t,e,r,o,a,l){var u=[t,e,r],c=this.getTileCoordForTileUrlFunction(u,a),h=c?this.tileUrlFunction(c,o,a):void 0,d=new this.tileClass(u,void 0!==h?0:4,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return d.key=l,d.addEventListener("change",this.handleTileChange.bind(this)),d},n.prototype.getTile=function(t,e,r,o,a){var l=this.getProjection();if(!l||!a||yn(l,a))return this.getTileInternal(t,e,r,o,l||a);var u=this.getTileCacheForProjection(a),c=[t,e,r],h=void 0,d=ss(c);u.containsKey(d)&&(h=u.get(d));var f=this.getKey();if(h&&h.key==f)return h;var p=this.getTileGridForProjection(l),v=this.getTileGridForProjection(a),g=this.getTileCoordForTileUrlFunction(c,a),_=new rs(l,p,a,v,c,g,this.getTilePixelRatio(o),this.getGutter(),function(C,y,x,T){return this.getTileInternal(C,y,x,T,l)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return _.key=f,h?(_.interimTile=h,_.refreshInterimChain(),u.replace(d,_)):u.set(d,_),_},n.prototype.getTileInternal=function(t,e,r,o,a){var l=null,u=qn(t,e,r),c=this.getKey();if(this.tileCache.containsKey(u)){if((l=this.tileCache.get(u)).key!=c){var h=l;(l=this.createTile_(t,e,r,o,a,c)).interimTile=0==h.getState()?h.interimTile:h,l.refreshInterimChain(),this.tileCache.replace(u,l)}}else l=this.createTile_(t,e,r,o,a,c),this.tileCache.set(u,l);return l},n.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},n.prototype.setTileGridForProjection=function(t,e){var r=St(t);if(r){var o=rt(r);o in this.tileGridForProjection||(this.tileGridForProjection[o]=e)}},n}(Wf);function Kf(i,n){i.getImage().src=n}const Hf=Vf;var Jf=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qf=function(i){function n(t){var e=this,r=t||{},o=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(o=r.interpolate);var a=void 0!==r.projection?r.projection:"EPSG:3857",l=void 0!==r.tileGrid?r.tileGrid:function bf(i){var n=i||{},t=n.extent||St("EPSG:3857").getExtent(),e={extent:t,minZoom:n.minZoom,tileSize:n.tileSize,resolutions:ds(t,n.maxZoom,n.tileSize,n.maxResolution)};return new hs(e)}({extent:no(a),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return(e=i.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:o,opaque:r.opaque,projection:a,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:l,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this).gutter_=void 0!==r.gutter?r.gutter:0,e}return Jf(n,i),n.prototype.getGutter=function(){return this.gutter_},n}(Hf);const $f=Qf;var td=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),nd=function(i){function n(t){var e=t||{},r=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(r=e.interpolate),i.call(this,{attributions:void 0!==e.attributions?e.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:"anonymous",interpolate:r,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,opaque:void 0===e.opaque||e.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:void 0!==e.url?e.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:e.wrapX,zDirection:e.zDirection})||this}return td(n,i),n}($f);const rd=nd;var vs=q(2402),id=function(){function i(n){this.opacity_=n.opacity,this.rotateWithView_=n.rotateWithView,this.rotation_=n.rotation,this.scale_=n.scale,this.scaleArray_=kt(n.scale),this.displacement_=n.displacement,this.declutterMode_=n.declutterMode}return i.prototype.clone=function(){var n=this.getScale();return new i({opacity:this.getOpacity(),scale:Array.isArray(n)?n.slice():n,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},i.prototype.getOpacity=function(){return this.opacity_},i.prototype.getRotateWithView=function(){return this.rotateWithView_},i.prototype.getRotation=function(){return this.rotation_},i.prototype.getScale=function(){return this.scale_},i.prototype.getScaleArray=function(){return this.scaleArray_},i.prototype.getDisplacement=function(){return this.displacement_},i.prototype.getDeclutterMode=function(){return this.declutterMode_},i.prototype.getAnchor=function(){return H()},i.prototype.getImage=function(n){return H()},i.prototype.getHitDetectionImage=function(){return H()},i.prototype.getPixelRatio=function(n){return 1},i.prototype.getImageState=function(){return H()},i.prototype.getImageSize=function(){return H()},i.prototype.getOrigin=function(){return H()},i.prototype.getSize=function(){return H()},i.prototype.setDisplacement=function(n){this.displacement_=n},i.prototype.setOpacity=function(n){this.opacity_=n},i.prototype.setRotateWithView=function(n){this.rotateWithView_=n},i.prototype.setRotation=function(n){this.rotation_=n},i.prototype.setScale=function(n){this.scale_=n,this.scaleArray_=kt(n)},i.prototype.listenImageChange=function(n){H()},i.prototype.load=function(){H()},i.prototype.unlistenImageChange=function(n){H()},i}();const gs=id;function ie(i){return Array.isArray(i)?Zo(i):i}var od=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),ad=function(i){function n(t){var e=this;return(e=i.call(this,{opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})||this).canvas_=void 0,e.hitDetectionCanvas_=null,e.fill_=void 0!==t.fill?t.fill:null,e.origin_=[0,0],e.points_=t.points,e.radius_=void 0!==t.radius?t.radius:t.radius1,e.radius2_=t.radius2,e.angle_=void 0!==t.angle?t.angle:0,e.stroke_=void 0!==t.stroke?t.stroke:null,e.size_=null,e.renderOptions_=null,e.render(),e}return od(n,i),n.prototype.clone=function(){var t=this.getScale(),e=new n({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e},n.prototype.getAnchor=function(){var t=this.size_;if(!t)return null;var e=this.getDisplacement();return[t[0]/2-e[0],t[1]/2+e[1]]},n.prototype.getAngle=function(){return this.angle_},n.prototype.getFill=function(){return this.fill_},n.prototype.setFill=function(t){this.fill_=t,this.render()},n.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},n.prototype.getImage=function(t){var e=this.canvas_[t];if(!e){var r=this.renderOptions_,o=Zt(r.size*t,r.size*t);this.draw_(r,o,t),this.canvas_[t]=e=o.canvas}return e},n.prototype.getPixelRatio=function(t){return t},n.prototype.getImageSize=function(){return this.size_},n.prototype.getImageState=function(){return 2},n.prototype.getOrigin=function(){return this.origin_},n.prototype.getPoints=function(){return this.points_},n.prototype.getRadius=function(){return this.radius_},n.prototype.getRadius2=function(){return this.radius2_},n.prototype.getSize=function(){return this.size_},n.prototype.getStroke=function(){return this.stroke_},n.prototype.setStroke=function(t){this.stroke_=t,this.render()},n.prototype.listenImageChange=function(t){},n.prototype.load=function(){},n.prototype.unlistenImageChange=function(t){},n.prototype.calculateLineJoinSize_=function(t,e,r){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;var o=this.radius_,a=void 0===this.radius2_?o:this.radius2_;if(o<a){var l=o;o=a,a=l}var c=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),h=a*Math.sin(c),f=o-Math.sqrt(a*a-h*h),p=Math.sqrt(h*h+f*f),v=p/h;if("miter"===t&&v<=r)return v*e;var g=e/2/v,_=e/2*(f/p),y=Math.sqrt((o+g)*(o+g)+_*_)-o;if(void 0===this.radius2_||"bevel"===t)return 2*y;var x=o*Math.sin(c),w=a-Math.sqrt(o*o-x*x),O=Math.sqrt(x*x+w*w)/x;return O<=r?2*Math.max(y,O*e/2-a-o):2*y},n.prototype.createRenderOptions=function(){var a,t=dn,e=0,r=null,o=0,l=0;this.stroke_&&(null===(a=this.stroke_.getColor())&&(a=Gn),a=ie(a),void 0===(l=this.stroke_.getWidth())&&(l=1),r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(t=this.stroke_.getLineJoin())&&(t=dn),void 0===(e=this.stroke_.getMiterLimit())&&(e=10));var u=this.calculateLineJoinSize_(t,l,e),c=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:a,strokeWidth:l,size:Math.ceil(2*c+u),lineDash:r,lineDashOffset:o,lineJoin:t,miterLimit:e}},n.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]},n.prototype.draw_=function(t,e,r){if(e.scale(r,r),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){var o=this.fill_.getColor();null===o&&(o=he),e.fillStyle=ie(o),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},n.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var e=this.fill_.getColor(),r=0;if("string"==typeof e&&(e=Er(e)),null===e?r=1:Array.isArray(e)&&(r=4===e.length?e[3]:1),0===r){var o=Zt(t.size,t.size);this.hitDetectionCanvas_=o.canvas,this.drawHitDetectionCanvas_(t,o)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},n.prototype.createPath_=function(t){var e=this.points_,r=this.radius_;if(e===1/0)t.arc(0,0,r,0,2*Math.PI);else{var o=void 0===this.radius2_?r:this.radius2_;void 0!==this.radius2_&&(e*=2);for(var a=this.angle_-Math.PI/2,l=2*Math.PI/e,u=0;u<e;u++){var c=a+u*l,h=u%2==0?r:o;t.lineTo(h*Math.cos(c),h*Math.sin(c))}t.closePath()}},n.prototype.drawHitDetectionCanvas_=function(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=he,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},n}(gs);const sd=ad;var ld=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),ud=function(i){function n(t){var e=t||{};return i.call(this,{points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:void 0!==e.scale?e.scale:1,rotation:void 0!==e.rotation?e.rotation:0,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode})||this}return ld(n,i),n.prototype.clone=function(){var t=this.getScale(),e=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e},n.prototype.setRadius=function(t){this.radius_=t,this.render()},n}(sd);const _s=ud;var cd=function(){function i(n){var t=n||{};this.color_=void 0!==t.color?t.color:null}return i.prototype.clone=function(){var n=this.getColor();return new i({color:Array.isArray(n)?n.slice():n||void 0})},i.prototype.getColor=function(){return this.color_},i.prototype.setColor=function(n){this.color_=n},i}();const Tn=cd;var hd=function(){function i(n){var t=n||{};this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}return i.prototype.clone=function(){var n=this.getColor();return new i({color:Array.isArray(n)?n.slice():n||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},i.prototype.getColor=function(){return this.color_},i.prototype.getLineCap=function(){return this.lineCap_},i.prototype.getLineDash=function(){return this.lineDash_},i.prototype.getLineDashOffset=function(){return this.lineDashOffset_},i.prototype.getLineJoin=function(){return this.lineJoin_},i.prototype.getMiterLimit=function(){return this.miterLimit_},i.prototype.getWidth=function(){return this.width_},i.prototype.setColor=function(n){this.color_=n},i.prototype.setLineCap=function(n){this.lineCap_=n},i.prototype.setLineDash=function(n){this.lineDash_=n},i.prototype.setLineDashOffset=function(n){this.lineDashOffset_=n},i.prototype.setLineJoin=function(n){this.lineJoin_=n},i.prototype.setMiterLimit=function(n){this.miterLimit_=n},i.prototype.setWidth=function(n){this.width_=n},i}();const Vn=hd;var wn=function(){function i(n){var t=n||{};this.geometry_=null,this.geometryFunction_=ys,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}return i.prototype.clone=function(){var n=this.getGeometry();return n&&"object"==typeof n&&(n=n.clone()),new i({geometry:n,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},i.prototype.getRenderer=function(){return this.renderer_},i.prototype.setRenderer=function(n){this.renderer_=n},i.prototype.setHitDetectionRenderer=function(n){this.hitDetectionRenderer_=n},i.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},i.prototype.getGeometry=function(){return this.geometry_},i.prototype.getGeometryFunction=function(){return this.geometryFunction_},i.prototype.getFill=function(){return this.fill_},i.prototype.setFill=function(n){this.fill_=n},i.prototype.getImage=function(){return this.image_},i.prototype.setImage=function(n){this.image_=n},i.prototype.getStroke=function(){return this.stroke_},i.prototype.setStroke=function(n){this.stroke_=n},i.prototype.getText=function(){return this.text_},i.prototype.setText=function(n){this.text_=n},i.prototype.getZIndex=function(){return this.zIndex_},i.prototype.setGeometry=function(n){"function"==typeof n?this.geometryFunction_=n:"string"==typeof n?this.geometryFunction_=function(t){return t.get(n)}:n?void 0!==n&&(this.geometryFunction_=function(){return n}):this.geometryFunction_=ys,this.geometry_=n},i.prototype.setZIndex=function(n){this.zIndex_=n},i}(),ro=null;function dd(i,n){if(!ro){var t=new Tn({color:"rgba(255,255,255,0.4)"}),e=new Vn({color:"#3399CC",width:1.25});ro=[new wn({image:new _s({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return ro}function ys(i){return i.getGeometry()}const Vr=wn;var pd=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),vd=function(i){function n(t){var e=this,r=t||{},o=xt({},r);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,(e=i.call(this,o)||this).declutter_=void 0!==r.declutter&&r.declutter,e.renderBuffer_=void 0!==r.renderBuffer?r.renderBuffer:100,e.style_=null,e.styleFunction_=void 0,e.setStyle(r.style),e.updateWhileAnimating_=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,e.updateWhileInteracting_=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,e}return pd(n,i),n.prototype.getDeclutter=function(){return this.declutter_},n.prototype.getFeatures=function(t){return i.prototype.getFeatures.call(this,t)},n.prototype.getRenderBuffer=function(){return this.renderBuffer_},n.prototype.getRenderOrder=function(){return this.get("renderOrder")},n.prototype.getStyle=function(){return this.style_},n.prototype.getStyleFunction=function(){return this.styleFunction_},n.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},n.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},n.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new vs(9)),this.getRenderer().renderDeclutter(t)},n.prototype.setRenderOrder=function(t){this.set("renderOrder",t)},n.prototype.setStyle=function(t){this.style_=void 0!==t?t:dd,this.styleFunction_=null===t?void 0:function fd(i){var n,t;"function"==typeof i?n=i:(Array.isArray(i)?t=i:(J("function"==typeof i.getZIndex,41),t=[i]),n=function(){return t});return n}(this.style_),this.changed()},n}(Sr);const gd=vd;var Kn={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Kr=[Kn.FILL],Me=[Kn.STROKE],Ke=[Kn.BEGIN_PATH],xs=[Kn.CLOSE_PATH];const U=Kn;var _d=function(){function i(){}return i.prototype.drawCustom=function(n,t,e,r){},i.prototype.drawGeometry=function(n){},i.prototype.setStyle=function(n){},i.prototype.drawCircle=function(n,t){},i.prototype.drawFeature=function(n,t){},i.prototype.drawGeometryCollection=function(n,t){},i.prototype.drawLineString=function(n,t){},i.prototype.drawMultiLineString=function(n,t){},i.prototype.drawMultiPoint=function(n,t){},i.prototype.drawMultiPolygon=function(n,t){},i.prototype.drawPoint=function(n,t){},i.prototype.drawPolygon=function(n,t){},i.prototype.drawText=function(n,t){},i.prototype.setFillStrokeStyle=function(n,t){},i.prototype.setImageStyle=function(n,t){},i.prototype.setTextStyle=function(n,t){},i}();const Cs=_d;var yd=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),md=function(i){function n(t,e,r,o){var a=i.call(this)||this;return a.tolerance=t,a.maxExtent=e,a.pixelRatio=o,a.maxLineWidth=0,a.resolution=r,a.beginGeometryInstruction1_=null,a.beginGeometryInstruction2_=null,a.bufferedMaxExtent_=null,a.instructions=[],a.coordinates=[],a.tmpCoordinate_=[],a.hitDetectionInstructions=[],a.state={},a}return yd(n,i),n.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(r){return r*e})},n.prototype.appendFlatPointCoordinates=function(t,e){for(var r=this.getBufferedMaxExtent(),o=this.tmpCoordinate_,a=this.coordinates,l=a.length,u=0,c=t.length;u<c;u+=e)o[0]=t[u],o[1]=t[u+1],Ln(r,o)&&(a[l++]=o[0],a[l++]=o[1]);return l},n.prototype.appendFlatLineCoordinates=function(t,e,r,o,a,l){var u=this.coordinates,c=u.length,h=this.getBufferedMaxExtent();l&&(e+=o);var g,_,C,d=t[e],f=t[e+1],p=this.tmpCoordinate_,v=!0;for(g=e+o;g<r;g+=o)p[0]=t[g],p[1]=t[g+1],(C=hi(h,p))!==_?(v&&(u[c++]=d,u[c++]=f,v=!1),u[c++]=p[0],u[c++]=p[1]):1===C?(u[c++]=p[0],u[c++]=p[1],v=!1):v=!0,d=p[0],f=p[1],_=C;return(a&&v||g===e+o)&&(u[c++]=d,u[c++]=f),c},n.prototype.drawCustomCoordinates_=function(t,e,r,o,a){for(var l=0,u=r.length;l<u;++l){var c=r[l],h=this.appendFlatLineCoordinates(t,e,c,o,!1,!1);a.push(h),e=c}return e},n.prototype.drawCustom=function(t,e,r,o){this.beginGeometry(t,e);var c,h,d,f,p,a=t.getType(),l=t.getStride(),u=this.coordinates.length;switch(a){case"MultiPolygon":c=t.getOrientedFlatCoordinates(),f=[];var v=t.getEndss();p=0;for(var g=0,_=v.length;g<_;++g){var C=[];p=this.drawCustomCoordinates_(c,p,v[g],l,C),f.push(C)}this.instructions.push([U.CUSTOM,u,f,t,r,Pa]),this.hitDetectionInstructions.push([U.CUSTOM,u,f,t,o||r,Pa]);break;case"Polygon":case"MultiLineString":d=[],c="Polygon"==a?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),p=this.drawCustomCoordinates_(c,0,t.getEnds(),l,d),this.instructions.push([U.CUSTOM,u,d,t,r,Br]),this.hitDetectionInstructions.push([U.CUSTOM,u,d,t,o||r,Br]);break;case"LineString":case"Circle":c=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(c,0,c.length,l,!1,!1),this.instructions.push([U.CUSTOM,u,h,t,r,xn]),this.hitDetectionInstructions.push([U.CUSTOM,u,h,t,o||r,xn]);break;case"MultiPoint":c=t.getFlatCoordinates(),(h=this.appendFlatPointCoordinates(c,l))>u&&(this.instructions.push([U.CUSTOM,u,h,t,r,xn]),this.hitDetectionInstructions.push([U.CUSTOM,u,h,t,o||r,xn]));break;case"Point":c=t.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),this.instructions.push([U.CUSTOM,u,h=this.coordinates.length,t,r]),this.hitDetectionInstructions.push([U.CUSTOM,u,h,t,o||r])}this.endGeometry(e)},n.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[U.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[U.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},n.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},n.prototype.reverseHitDetectionInstructions=function(){var t=this.hitDetectionInstructions;t.reverse();var e,o,a,r=t.length,l=-1;for(e=0;e<r;++e)(a=(o=t[e])[0])==U.END_GEOMETRY?l=e:a==U.BEGIN_GEOMETRY&&(o[2]=e,et(this.hitDetectionInstructions,l,e),l=-1)},n.prototype.setFillStrokeStyle=function(t,e){var r=this.state;if(t){var o=t.getColor();r.fillStyle=ie(o||he)}else r.fillStyle=void 0;if(e){var a=e.getColor();r.strokeStyle=ie(a||Gn);var l=e.getLineCap();r.lineCap=void 0!==l?l:Ar;var u=e.getLineDash();r.lineDash=u?u.slice():Zn;var c=e.getLineDashOffset();r.lineDashOffset=c||0;var h=e.getLineJoin();r.lineJoin=void 0!==h?h:dn;var d=e.getWidth();r.lineWidth=void 0!==d?d:1;var f=e.getMiterLimit();r.miterLimit=void 0!==f?f:10,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0},n.prototype.createFill=function(t){var e=t.fillStyle,r=[U.SET_FILL_STYLE,e];return"string"!=typeof e&&r.push(!0),r},n.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},n.prototype.createStroke=function(t){return[U.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},n.prototype.updateFillStyle=function(t,e){var r=t.fillStyle;("string"!=typeof r||t.currentFillStyle!=r)&&(void 0!==r&&this.instructions.push(e.call(this,t)),t.currentFillStyle=r)},n.prototype.updateStrokeStyle=function(t,e){var r=t.strokeStyle,o=t.lineCap,a=t.lineDash,l=t.lineDashOffset,u=t.lineJoin,c=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=o||a!=t.currentLineDash&&!lt(t.currentLineDash,a)||t.currentLineDashOffset!=l||t.currentLineJoin!=u||t.currentLineWidth!=c||t.currentMiterLimit!=h)&&(void 0!==r&&e.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=o,t.currentLineDash=a,t.currentLineDashOffset=l,t.currentLineJoin=u,t.currentLineWidth=c,t.currentMiterLimit=h)},n.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[U.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},n.prototype.getBufferedMaxExtent=function(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=wo(this.maxExtent),this.maxLineWidth>0)&&ci(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_},n}(Cs);const Hn=md;var xd=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Cd=function(i){function n(t,e,r,o){var a=i.call(this,t,e,r,o)||this;return a.hitDetectionImage_=null,a.image_=null,a.imagePixelRatio_=void 0,a.anchorX_=void 0,a.anchorY_=void 0,a.height_=void 0,a.opacity_=void 0,a.originX_=void 0,a.originY_=void 0,a.rotateWithView_=void 0,a.rotation_=void 0,a.scale_=void 0,a.width_=void 0,a.declutterMode_=void 0,a.declutterImageWithText_=void 0,a}return xd(n,i),n.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),o=t.getStride(),a=this.coordinates.length,l=this.appendFlatPointCoordinates(r,o);this.instructions.push([U.DRAW_IMAGE,a,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([U.DRAW_IMAGE,a,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}},n.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),o=t.getStride(),a=this.coordinates.length,l=this.appendFlatPointCoordinates(r,o);this.instructions.push([U.DRAW_IMAGE,a,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([U.DRAW_IMAGE,a,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}},n.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,i.prototype.finish.call(this)},n.prototype.setImageStyle=function(t,e){var r=t.getAnchor(),o=t.getSize(),a=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=o[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e},n}(Hn);const Ed=Cd;var Td=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),wd=function(i){function n(t,e,r,o){return i.call(this,t,e,r,o)||this}return Td(n,i),n.prototype.drawFlatCoordinates_=function(t,e,r,o){var a=this.coordinates.length,l=this.appendFlatLineCoordinates(t,e,r,o,!1,!1),u=[U.MOVE_TO_LINE_TO,a,l];return this.instructions.push(u),this.hitDetectionInstructions.push(u),r},n.prototype.drawLineString=function(t,e){var r=this.state;if(void 0!==r.strokeStyle&&void 0!==r.lineWidth){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Zn,0],Ke);var l=t.getFlatCoordinates(),u=t.getStride();this.drawFlatCoordinates_(l,0,l.length,u),this.hitDetectionInstructions.push(Me),this.endGeometry(e)}},n.prototype.drawMultiLineString=function(t,e){var r=this.state;if(void 0!==r.strokeStyle&&void 0!==r.lineWidth){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],Ke);for(var l=t.getEnds(),u=t.getFlatCoordinates(),c=t.getStride(),h=0,d=0,f=l.length;d<f;++d)h=this.drawFlatCoordinates_(u,h,l[d],c);this.hitDetectionInstructions.push(Me),this.endGeometry(e)}},n.prototype.finish=function(){var t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Me),this.reverseHitDetectionInstructions(),this.state=null,i.prototype.finish.call(this)},n.prototype.applyStroke=function(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Me),t.lastStroke=this.coordinates.length),t.lastStroke=0,i.prototype.applyStroke.call(this,t),this.instructions.push(Ke)},n}(Hn);const Od=wd;var Id=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Sd=function(i){function n(t,e,r,o){return i.call(this,t,e,r,o)||this}return Id(n,i),n.prototype.drawFlatCoordinatess_=function(t,e,r,o){var a=this.state,l=void 0!==a.fillStyle,u=void 0!==a.strokeStyle,c=r.length;this.instructions.push(Ke),this.hitDetectionInstructions.push(Ke);for(var h=0;h<c;++h){var d=r[h],f=this.coordinates.length,p=this.appendFlatLineCoordinates(t,e,d,o,!0,!u),v=[U.MOVE_TO_LINE_TO,f,p];this.instructions.push(v),this.hitDetectionInstructions.push(v),u&&(this.instructions.push(xs),this.hitDetectionInstructions.push(xs)),e=d}return l&&(this.instructions.push(Kr),this.hitDetectionInstructions.push(Kr)),u&&(this.instructions.push(Me),this.hitDetectionInstructions.push(Me)),e},n.prototype.drawCircle=function(t,e){var r=this.state;if(void 0!==r.fillStyle||void 0!==r.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([U.SET_FILL_STYLE,he]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var l=t.getFlatCoordinates(),u=t.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,u,!1,!1);var h=[U.CIRCLE,c];this.instructions.push(Ke,h),this.hitDetectionInstructions.push(Ke,h),void 0!==r.fillStyle&&(this.instructions.push(Kr),this.hitDetectionInstructions.push(Kr)),void 0!==r.strokeStyle&&(this.instructions.push(Me),this.hitDetectionInstructions.push(Me)),this.endGeometry(e)}},n.prototype.drawPolygon=function(t,e){var r=this.state;if(void 0!==r.fillStyle||void 0!==r.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([U.SET_FILL_STYLE,he]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var l=t.getEnds(),u=t.getOrientedFlatCoordinates(),c=t.getStride();this.drawFlatCoordinatess_(u,0,l,c),this.endGeometry(e)}},n.prototype.drawMultiPolygon=function(t,e){var r=this.state;if(void 0!==r.fillStyle||void 0!==r.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([U.SET_FILL_STYLE,he]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([U.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);for(var l=t.getEndss(),u=t.getOrientedFlatCoordinates(),c=t.getStride(),h=0,d=0,f=l.length;d<f;++d)h=this.drawFlatCoordinatess_(u,h,l[d],c);this.endGeometry(e)}},n.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,r=0,o=e.length;r<o;++r)e[r]=We(e[r],t);return i.prototype.finish.call(this)},n.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},n}(Hn);const Es=Sd;function Rd(i,n,t,e,r){var d,f,p,v,g,_,C,y,x,o=t,a=t,l=0,u=0,c=t;for(d=t;d<e;d+=r){var T=n[d],w=n[d+1];void 0!==v&&(y=T-v,x=w-g,p=Math.sqrt(y*y+x*x),void 0!==_&&(u+=f,Math.acos((_*y+C*x)/(f*p))>i&&(u>l&&(l=u,o=c,a=d),u=0,c=d-r)),f=p,_=y,C=x),v=T,g=w}return(u+=p)>l?[c,d]:[o,a]}var Md=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jn={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Pd=function(i){function n(t,e,r,o){var a=i.call(this,t,e,r,o)||this;return a.labels_=null,a.text_="",a.textOffsetX_=0,a.textOffsetY_=0,a.textRotateWithView_=void 0,a.textRotation_=0,a.textFillState_=null,a.fillStates={},a.textStrokeState_=null,a.strokeStates={},a.textState_={},a.textStates={},a.textKey_="",a.fillKey_="",a.strokeKey_="",a.declutterImageWithText_=void 0,a}return Md(n,i),n.prototype.finish=function(){var t=i.prototype.finish.call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t},n.prototype.drawText=function(t,e){var a=this.textState_;if(""!==this.text_&&a&&(this.textFillState_||this.textStrokeState_)){var l=this.coordinates,u=l.length,c=t.getType(),h=null,d=t.getStride();if("line"!==a.placement||"LineString"!=c&&"MultiLineString"!=c&&"Polygon"!=c&&"MultiPolygon"!=c){var O=a.overflow?null:[];switch(c){case"Point":case"MultiPoint":h=t.getFlatCoordinates();break;case"LineString":h=t.getFlatMidpoint();break;case"Circle":h=t.getCenter();break;case"MultiLineString":h=t.getFlatMidpoints(),d=2;break;case"Polygon":h=t.getFlatInteriorPoint(),a.overflow||O.push(h[2]/this.resolution),d=3;break;case"MultiPolygon":var M=t.getFlatInteriorPoints();for(h=[],v=0,g=M.length;v<g;v+=3)a.overflow||O.push(M[v+2]/this.resolution),h.push(M[v],M[v+1]);if(0===h.length)return;d=2}if((S=this.appendFlatPointCoordinates(h,d))===u)return;if(O&&(S-u)/2!=h.length/d){var A=u/2;O=O.filter(function(k,Q){var $=l[2*(A+Q)]===h[Q*d]&&l[2*(A+Q)+1]===h[Q*d+1];return $||--A,$})}this.saveTextStates_(),(a.backgroundFill||a.backgroundStroke)&&(this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke),a.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),a.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var b=a.padding;if(b!=je&&(a.scale[0]<0||a.scale[1]<0)){var j=a.padding[0],Y=a.padding[1],D=a.padding[2],z=a.padding[3];a.scale[0]<0&&(Y=-Y,z=-z),a.scale[1]<0&&(j=-j,D=-D),b=[j,Y,D,z]}var W=this.pixelRatio;this.instructions.push([U.DRAW_IMAGE,u,S,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,b==je?je:b.map(function(k){return k*W}),!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,O]);var B=1/W;this.hitDetectionInstructions.push([U.DRAW_IMAGE,u,S,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[B,B],NaN,void 0,this.declutterImageWithText_,b,!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,O]),this.endGeometry(e)}else{if(!Pt(this.getBufferedMaxExtent(),t.getExtent()))return;var f=void 0;if(h=t.getFlatCoordinates(),"LineString"==c)f=[h.length];else if("MultiLineString"==c)f=t.getEnds();else if("Polygon"==c)f=t.getEnds().slice(0,1);else if("MultiPolygon"==c){var p=t.getEndss();f=[];for(var v=0,g=p.length;v<g;++v)f.push(p[v][0])}this.beginGeometry(t,e);for(var _=a.textAlign,C=0,y=void 0,x=0,T=f.length;x<T;++x){if(null==_){var w=Rd(a.maxAngle,h,C,f[x],d);C=w[0],y=w[1]}else y=f[x];for(v=C;v<y;v+=d)l.push(h[v],h[v+1]);var S;C=f[x],this.drawChars_(u,S=l.length),u=S}this.endGeometry(e)}}},n.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,r=this.textFillState_,o=this.strokeKey_;t&&(o in this.strokeStates||(this.strokeStates[o]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var a=this.textKey_;a in this.textStates||(this.textStates[a]={font:e.font,textAlign:e.textAlign||Un,justify:e.justify,textBaseline:e.textBaseline||Lr,scale:e.scale});var l=this.fillKey_;r&&(l in this.fillStates||(this.fillStates[l]={fillStyle:r.fillStyle}))},n.prototype.drawChars_=function(t,e){var r=this.textStrokeState_,o=this.textState_,a=this.strokeKey_,l=this.textKey_,u=this.fillKey_;this.saveTextStates_();var c=this.pixelRatio,h=Jn[o.textBaseline],d=this.textOffsetY_*c,f=this.text_,p=r?r.lineWidth*Math.abs(o.scale[0])/2:0;this.instructions.push([U.DRAW_CHARS,t,e,h,o.overflow,u,o.maxAngle,c,d,a,p*c,f,l,1]),this.hitDetectionInstructions.push([U.DRAW_CHARS,t,e,h,o.overflow,u,o.maxAngle,1,d,a,p,f,l,1/c])},n.prototype.setTextStyle=function(t,e){var r,o,a;if(t){var l=t.getFill();l?((o=this.textFillState_)||(this.textFillState_=o={}),o.fillStyle=ie(l.getColor()||he)):this.textFillState_=o=null;var u=t.getStroke();if(u){(a=this.textStrokeState_)||(this.textStrokeState_=a={});var c=u.getLineDash(),h=u.getLineDashOffset(),d=u.getWidth(),f=u.getMiterLimit();a.lineCap=u.getLineCap()||Ar,a.lineDash=c?c.slice():Zn,a.lineDashOffset=void 0===h?0:h,a.lineJoin=u.getLineJoin()||dn,a.lineWidth=void 0===d?1:d,a.miterLimit=void 0===f?10:f,a.strokeStyle=ie(u.getColor()||Gn)}else this.textStrokeState_=a=null;r=this.textState_;var p=t.getFont()||Qo;ou(p);var v=t.getScaleArray();r.overflow=t.getOverflow(),r.font=p,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.justify=t.getJustify(),r.textBaseline=t.getTextBaseline()||Lr,r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||je,r.scale=void 0===v?[1,1]:v;var g=t.getOffsetX(),_=t.getOffsetY(),C=t.getRotateWithView(),y=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===g?0:g,this.textOffsetY_=void 0===_?0:_,this.textRotateWithView_=void 0!==C&&C,this.textRotation_=void 0===y?0:y,this.strokeKey_=a?("string"==typeof a.strokeStyle?a.strokeStyle:rt(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=o?"string"==typeof o.fillStyle?o.fillStyle:"|"+rt(o.fillStyle):""}else this.text_="";this.declutterImageWithText_=e},n}(Hn),Ad={Circle:Es,Default:Hn,Image:Ed,LineString:Od,Polygon:Es,Text:Pd},Ld=function(){function i(n,t,e,r){this.tolerance_=n,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=e,this.buildersByZIndex_={}}return i.prototype.finish=function(){var n={};for(var t in this.buildersByZIndex_){n[t]=n[t]||{};var e=this.buildersByZIndex_[t];for(var r in e){var o=e[r].finish();n[t][r]=o}}return n},i.prototype.getBuilder=function(n,t){var e=void 0!==n?n.toString():"0",r=this.buildersByZIndex_[e];void 0===r&&(this.buildersByZIndex_[e]=r={});var o=r[t];return void 0===o&&(o=new(0,Ad[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=o),o},i}();const ws=Ld;function Fd(i,n,t,e,r,o,a,l,u,c,h,d){var f=i[n],p=i[n+1],v=0,g=0,_=0,C=0;function y(){v=f,g=p,f=i[n+=e],p=i[n+1],C+=_,_=Math.sqrt((f-v)*(f-v)+(p-g)*(p-g))}do{y()}while(n<t-e&&C+_<o);for(var x=0===_?0:(o-C)/_,T=Ue(v,f,x),w=Ue(g,p,x),S=n-e,O=C,M=o+l*u(c,r,h);n<t-e&&C+_<M;)y();var j,A=Ue(v,f,x=0===_?0:(M-C)/_),b=Ue(g,p,x);if(d){var Y=[T,w,A,b];ma(Y,0,4,2,d,Y,Y),j=Y[0]>Y[2]}else j=T>A;var B,D=Math.PI,z=[],W=S+e===n;if(_=0,C=O,f=i[n=S],p=i[n+1],W)return y(),B=Math.atan2(p-g,f-v),j&&(B+=B>0?-D:D),z[0]=[N=(A+T)/2,k=(b+w)/2,(M-o)/2,B,r],z;for(var Q=0,$=(r=r.replace(/\n/g," ")).length;Q<$;){y();var st=Math.atan2(p-g,f-v);if(j&&(st+=st>0?-D:D),void 0!==B){var I=st-B;if(I+=I>D?-2*D:I<-D?2*D:0,Math.abs(I)>a)return null}B=st;for(var gt=Q,ht=0;Q<$;++Q){var Ct=l*u(c,r[j?$-Q-1:Q],h);if(n+e<t&&C+_<o+ht+Ct/2)break;ht+=Ct}if(Q!==gt){var Lt=j?r.substring($-gt,$-Q):r.substring(gt,Q),N=Ue(v,f,x=0===_?0:(o+ht/2-C)/_),k=Ue(g,p,x);z.push([N,k,ht/2,st,Lt]),o+=ht}}return z}function Os(i,n,t,e){for(var r=i[n],o=i[n+1],a=0,l=n+e;l<t;l+=e){var u=i[l],c=i[l+1];a+=Math.sqrt((u-r)*(u-r)+(c-o)*(c-o)),r=u,o=c}return a}var On=[1/0,1/0,-1/0,-1/0],Pe=[],ve=[],ge=[],Ae=[];function Is(i){return i[3].declutterBox}var Dd=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Ss(i,n){return("start"===n||"end"===n)&&!Dd.test(i)&&(n="start"===n?"left":"right"),Jn[n]}function bd(i,n,t){return t>0&&i.push("\n",""),i.push(n,""),i}var Zd=function(){function i(n,t,e,r){this.overlaps=e,this.pixelRatio=t,this.resolution=n,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}return i.prototype.createLabel=function(n,t,e,r){var o=n+t+e+r;if(this.labels_[o])return this.labels_[o];var a=r?this.strokeStates[r]:null,l=e?this.fillStates[e]:null,u=this.textStates[t],c=this.pixelRatio,h=[u.scale[0]*c,u.scale[1]*c],d=Array.isArray(n),f=u.justify?Jn[u.justify]:Ss(Array.isArray(n)?n[0]:n,u.textAlign||Un),p=r&&a.lineWidth?a.lineWidth:0,v=d?n:n.split("\n").reduce(bd,[]),g=function su(i,n){for(var t=[],e=[],r=[],o=0,a=0,l=0,u=0,c=0,h=n.length;c<=h;c+=2){var d=n[c];if("\n"!==d&&c!==h){var f=n[c+1]||i.font,p=Fr(f,d);t.push(p),a+=p;var v=au(f);e.push(v),u=Math.max(u,v)}else o=Math.max(o,a),r.push(a),a=0,l+=u}return{width:o,height:l,widths:t,heights:e,lineWidths:r}}(u,v),y=g.widths,x=g.heights,T=g.lineWidths,w=g.width+p,S=[],O=(w+2)*h[0],M=(g.height+p)*h[1],A={width:O<0?Math.floor(O):Math.ceil(O),height:M<0?Math.floor(M):Math.ceil(M),contextInstructions:S};(1!=h[0]||1!=h[1])&&S.push("scale",h),r&&(S.push("strokeStyle",a.strokeStyle),S.push("lineWidth",p),S.push("lineCap",a.lineCap),S.push("lineJoin",a.lineJoin),S.push("miterLimit",a.miterLimit),(dr?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(S.push("setLineDash",[a.lineDash]),S.push("lineDashOffset",a.lineDashOffset))),e&&S.push("fillStyle",l.fillStyle),S.push("textBaseline","middle"),S.push("textAlign","center");for(var Q,j=.5-f,Y=f*w+j*p,D=[],z=[],W=0,B=0,N=0,k=0,$=0,st=v.length;$<st;$+=2){var I=v[$];if("\n"!==I){var gt=v[$+1]||u.font;gt!==Q&&(r&&D.push("font",gt),e&&z.push("font",gt),Q=gt),W=Math.max(W,x[N]);var ht=[I,Y+j*y[N]+f*(y[N]-T[k]),.5*(p+W)+B];Y+=y[N],r&&D.push("strokeText",ht),e&&z.push("fillText",ht),++N}else B+=W,W=0,Y=f*w+j*p,++k}return Array.prototype.push.apply(S,D),Array.prototype.push.apply(S,z),this.labels_[o]=A,A},i.prototype.replayTextBackground_=function(n,t,e,r,o,a,l){n.beginPath(),n.moveTo.apply(n,t),n.lineTo.apply(n,e),n.lineTo.apply(n,r),n.lineTo.apply(n,o),n.lineTo.apply(n,t),a&&(this.alignFill_=a[2],this.fill_(n)),l&&(this.setStrokeStyle_(n,l),n.stroke())},i.prototype.calculateImageOrLabelDimensions_=function(n,t,e,r,o,a,l,u,c,h,d,f,p,v,g,_){var A,C=e-(l*=f[0]),y=r-(u*=f[1]),x=o+c>n?n-c:o,T=a+h>t?t-h:a,w=v[3]+x*f[0]+v[1],S=v[0]+T*f[1]+v[2],O=C-v[3],M=y-v[0];return(g||0!==d)&&(Pe[0]=O,Ae[0]=O,Pe[1]=M,ve[1]=M,ve[0]=O+w,ge[0]=ve[0],ge[1]=M+S,Ae[1]=ge[1]),0!==d?(_t(A=ee([1,0,0,1,0,0],e,r,1,1,d,-e,-r),Pe),_t(A,ve),_t(A,ge),_t(A,Ae),ne(Math.min(Pe[0],ve[0],ge[0],Ae[0]),Math.min(Pe[1],ve[1],ge[1],Ae[1]),Math.max(Pe[0],ve[0],ge[0],Ae[0]),Math.max(Pe[1],ve[1],ge[1],Ae[1]),On)):ne(Math.min(O,O+w),Math.min(M,M+S),Math.max(O,O+w),Math.max(M,M+S),On),p&&(C=Math.round(C),y=Math.round(y)),{drawImageX:C,drawImageY:y,drawImageW:x,drawImageH:T,originX:c,originY:h,declutterBox:{minX:On[0],minY:On[1],maxX:On[2],maxY:On[3],value:_},canvasTransform:A,scale:f}},i.prototype.replayImageOrLabel_=function(n,t,e,r,o,a,l){var c=r.declutterBox,h=n.canvas,d=l?l[2]*r.scale[0]/2:0;return c.minX-d<=h.width/t&&c.maxX+d>=0&&c.minY-d<=h.height/t&&c.maxY+d>=0&&(!(!a&&!l)&&this.replayTextBackground_(n,Pe,ve,ge,Ae,a,l),function lu(i,n,t,e,r,o,a,l,u,c,h){i.save(),1!==t&&(i.globalAlpha*=t),n&&i.setTransform.apply(i,n),e.contextInstructions?(i.translate(u,c),i.scale(h[0],h[1]),function uu(i,n){for(var t=i.contextInstructions,e=0,r=t.length;e<r;e+=2)Array.isArray(t[e+1])?n[t[e]].apply(n,t[e+1]):n[t[e]]=t[e+1]}(e,i)):h[0]<0||h[1]<0?(i.translate(u,c),i.scale(h[0],h[1]),i.drawImage(e,r,o,a,l,0,0,a,l)):i.drawImage(e,r,o,a,l,u,c,a*h[0],l*h[1]),i.restore()}(n,r.canvasTransform,o,e,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},i.prototype.fill_=function(n){if(this.alignFill_){var t=_t(this.renderedTransform_,[0,0]),e=512*this.pixelRatio;n.save(),n.translate(t[0]%e,t[1]%e),n.rotate(this.viewRotation_)}n.fill(),this.alignFill_&&n.restore()},i.prototype.setStrokeStyle_=function(n,t){n.strokeStyle=t[1],n.lineWidth=t[2],n.lineCap=t[3],n.lineJoin=t[4],n.miterLimit=t[5],n.setLineDash&&(n.lineDashOffset=t[7],n.setLineDash(t[6]))},i.prototype.drawLabelWithPointPlacement_=function(n,t,e,r){var o=this.textStates[t],a=this.createLabel(n,t,r,e),l=this.strokeStates[e],u=this.pixelRatio,c=Ss(Array.isArray(n)?n[0]:n,o.textAlign||Un),h=Jn[o.textBaseline||Lr],d=l&&l.lineWidth?l.lineWidth:0;return{label:a,anchorX:c*(a.width/u-2*o.scale[0])+2*(.5-c)*d,anchorY:h*a.height/u+2*(.5-h)*d}},i.prototype.execute_=function(n,t,e,r,o,a,l,u){var c;this.pixelCoordinates_&&lt(e,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=ze(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),function fl(i,n){i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5]}(this.renderedTransform_,e));for(var p,v,g,_,C,y,x,T,w,S,O,M,k,Q,$,st,h=0,d=r.length,f=0,A=0,b=0,j=null,Y=null,D=this.coordinateCache_,z=this.viewRotation_,W=Math.round(1e12*Math.atan2(-e[1],e[0]))/1e12,B={context:n,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:z},N=this.instructions!=r||this.overlaps?0:200;h<d;){var I=r[h];switch(I[0]){case U.BEGIN_GEOMETRY:st=I[3],(k=I[1]).getGeometry()?void 0===l||Pt(l,st.getExtent())?++h:h=I[2]+1:h=I[2];break;case U.BEGIN_PATH:A>N&&(this.fill_(n),A=0),b>N&&(n.stroke(),b=0),!A&&!b&&(n.beginPath(),_=NaN,C=NaN),++h;break;case U.CIRCLE:var ht=c[f=I[1]],K=c[f+1],Et=c[f+2]-ht,In=c[f+3]-K,Gt=Math.sqrt(Et*Et+In*In);n.moveTo(ht+Gt,K),n.arc(ht,K,Gt,0,2*Math.PI,!0),++h;break;case U.CLOSE_PATH:n.closePath(),++h;break;case U.CUSTOM:f=I[1],p=I[2];var ae=I[4],er=6==I.length?I[5]:void 0;B.geometry=I[3],B.feature=k,h in D||(D[h]=[]);var Je=D[h];er?er(c,f,p,2,Je):(Je[0]=c[f],Je[1]=c[f+1],Je.length=2),ae(Je,B),++h;break;case U.DRAW_IMAGE:f=I[1],p=I[2],v=I[4],g=I[5];var Sn=I[6],Qr=I[7],$r=I[8],nr=I[9],rr=I[10],De=I[11],co=I[12],Qe=I[13],ti=I[14],be=I[15];if(!(T=I[3])&&I.length>=20){var Rn=this.drawLabelWithPointPlacement_(w=I[19],S=I[20],O=I[21],M=I[22]);I[3]=T=Rn.label,I[4]=v=(Rn.anchorX-I[23])*this.pixelRatio,I[5]=g=(Rn.anchorY-I[24])*this.pixelRatio,I[6]=Sn=T.height,I[13]=Qe=T.width}var ir=void 0;I.length>25&&(ir=I[25]);var _e=void 0,se=void 0,$e=void 0;I.length>17?(_e=I[16],se=I[17],$e=I[18]):(_e=je,se=!1,$e=!1),rr&&W?De+=z:!rr&&!W&&(De-=z);for(var or=0;f<p;f+=2)if(!(ir&&ir[or++]<Qe/this.pixelRatio)){var ni=[n,t,T,Mt=this.calculateImageOrLabelDimensions_(T.width,T.height,c[f],c[f+1],Qe,Sn,v,g,$r,nr,De,co,o,_e,se||$e,k),Qr,se?j:null,$e?Y:null];if(u){if("none"===ti)continue;if("obstacle"===ti){u.insert(Mt.declutterBox);continue}var Tt=void 0,fo=void 0;if(be){var ri=p-f;if(!be[ri]){be[ri]=ni;continue}if(Tt=be[ri],delete be[ri],fo=Is(Tt),u.collides(fo))continue}if(u.collides(Mt.declutterBox))continue;Tt&&(u.insert(fo),this.replayImageOrLabel_.apply(this,Tt)),u.insert(Mt.declutterBox)}this.replayImageOrLabel_.apply(this,ni)}++h;break;case U.DRAW_CHARS:var Hs=I[1],Js=I[2],po=I[3],Sv=I[4];M=I[5];var Rv=I[6],Qs=I[7],$s=I[8];O=I[9];var vo=I[10];w=I[11];var tl=[I[13],I[13]],go=this.textStates[S=I[12]],ar=go.font,sr=[go.scale[0]*Qs,go.scale[1]*Qs],lr=void 0;ar in this.widths_?lr=this.widths_[ar]:this.widths_[ar]=lr={};var el=Os(c,Hs,Js,2),nl=Math.abs(sr[0])*ta(ar,w,lr);if(Sv||nl<=el){var ur=Fd(c,Hs,Js,2,w,(el-nl)*Jn[this.textStates[S].textAlign],Rv,Math.abs(sr[0]),ta,ar,lr,W?0:this.viewRotation_);t:if(ur){var cr=[],Ze=void 0,ii=void 0,Ft=void 0,Wt=void 0;if(O)for(Ze=0,ii=ur.length;Ze<ii;++Ze){Ft=this.createLabel((Wt=ur[Ze])[4],S,"",O);var Mt=this.calculateImageOrLabelDimensions_(Ft.width,Ft.height,Wt[0],Wt[1],Ft.width,Ft.height,v=Wt[2]+(sr[0]<0?-vo:vo),g=po*Ft.height+2*(.5-po)*vo*sr[1]/sr[0]-$s,0,0,Wt[3],tl,!1,je,!1,k);if(u&&u.collides(Mt.declutterBox))break t;cr.push([n,t,Ft,Mt,1,null,null])}if(M)for(Ze=0,ii=ur.length;Ze<ii;++Ze){if(Ft=this.createLabel((Wt=ur[Ze])[4],S,M,""),Mt=this.calculateImageOrLabelDimensions_(Ft.width,Ft.height,Wt[0],Wt[1],Ft.width,Ft.height,v=Wt[2],g=po*Ft.height-$s,0,0,Wt[3],tl,!1,je,!1,k),u&&u.collides(Mt.declutterBox))break t;cr.push([n,t,Ft,Mt,1,null,null])}u&&u.load(cr.map(Is));for(var _o=0,Av=cr.length;_o<Av;++_o)this.replayImageOrLabel_.apply(this,cr[_o])}}++h;break;case U.END_GEOMETRY:if(void 0!==a){var rl=a(k=I[1],st);if(rl)return rl}++h;break;case U.FILL:N?A++:this.fill_(n),++h;break;case U.MOVE_TO_LINE_TO:for(p=I[2],x=($=c[(f=I[1])+1])+.5|0,((y=(Q=c[f])+.5|0)!==_||x!==C)&&(n.moveTo(Q,$),_=y,C=x),f+=2;f<p;f+=2)y=(Q=c[f])+.5|0,x=($=c[f+1])+.5|0,(f==p-2||y!==_||x!==C)&&(n.lineTo(Q,$),_=y,C=x);++h;break;case U.SET_FILL_STYLE:j=I,this.alignFill_=I[2],A&&(this.fill_(n),A=0,b&&(n.stroke(),b=0)),n.fillStyle=I[1],++h;break;case U.SET_STROKE_STYLE:Y=I,b&&(n.stroke(),b=0),this.setStrokeStyle_(n,I),++h;break;case U.STROKE:N?b++:n.stroke(),++h;break;default:++h}}A&&this.fill_(n),b&&n.stroke()},i.prototype.execute=function(n,t,e,r,o,a){this.viewRotation_=r,this.execute_(n,t,e,this.instructions,o,void 0,void 0,a)},i.prototype.executeHitDetection=function(n,t,e,r,o){return this.viewRotation_=e,this.execute_(n,1,t,this.hitDetectionInstructions,!0,r,o)},i}();const Nd=Zd;var io=["Polygon","Circle","LineString","Image","Text","Default"],kd=function(){function i(n,t,e,r,o,a){this.maxExtent_=n,this.overlaps_=r,this.pixelRatio_=e,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(o)}return i.prototype.clip=function(n,t){var e=this.getClipCoords(t);n.beginPath(),n.moveTo(e[0],e[1]),n.lineTo(e[2],e[3]),n.lineTo(e[4],e[5]),n.lineTo(e[6],e[7]),n.clip()},i.prototype.createExecutors_=function(n){for(var t in n){var e=this.executorsByZIndex_[t];void 0===e&&(this.executorsByZIndex_[t]=e={});var r=n[t];for(var o in r)e[o]=new Nd(this.resolution_,this.pixelRatio_,this.overlaps_,r[o])}},i.prototype.hasExecutors=function(n){for(var t in this.executorsByZIndex_)for(var e=this.executorsByZIndex_[t],r=0,o=n.length;r<o;++r)if(n[r]in e)return!0;return!1},i.prototype.forEachFeatureAtCoordinate=function(n,t,e,r,o,a){var l=2*(r=Math.round(r))+1,u=ee(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-e,-n[0],-n[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=Zt(l,l));var d,h=this.hitDetectionContext_;h.canvas.width!==l||h.canvas.height!==l?(h.canvas.width=l,h.canvas.height=l):c||h.clearRect(0,0,l,l),void 0!==this.renderBuffer_&&(an(d=[1/0,1/0,-1/0,-1/0],n),ci(d,t*(this.renderBuffer_+r),d));var p,f=function Gd(i){if(void 0!==oo[i])return oo[i];for(var n=2*i+1,t=i*i,e=new Array(t+1),r=0;r<=i;++r)for(var o=0;o<=i;++o){var a=r*r+o*o;if(a>t)break;var l=e[a];l||(e[a]=l=[]),l.push(4*((i+r)*n+(i+o))+3),r>0&&l.push(4*((i-r)*n+(i+o))+3),o>0&&(l.push(4*((i+r)*n+(i-o))+3),r>0&&l.push(4*((i-r)*n+(i-o))+3))}for(var u=[],c=(r=0,e.length);r<c;++r)e[r]&&u.push.apply(u,e[r]);return oo[i]=u,u}(r);function v(S,O){for(var M=h.getImageData(0,0,l,l).data,A=0,b=f.length;A<b;A++)if(M[f[A]]>0){if(!a||"Image"!==p&&"Text"!==p||-1!==a.indexOf(S)){var j=(f[A]-3)/4,Y=r-j%l,D=r-(j/l|0),z=o(S,O,Y*Y+D*D);if(z)return z}h.clearRect(0,0,l,l);break}}var _,C,y,x,T,g=Object.keys(this.executorsByZIndex_).map(Number);for(g.sort(P),_=g.length-1;_>=0;--_){var w=g[_].toString();for(y=this.executorsByZIndex_[w],C=io.length-1;C>=0;--C)if(void 0!==(x=y[p=io[C]])&&(T=x.executeHitDetection(h,u,e,v,d)))return T}},i.prototype.getClipCoords=function(n){var t=this.maxExtent_;if(!t)return null;var e=t[0],r=t[1],o=t[2],a=t[3],l=[e,r,e,a,o,a,o,r];return ze(l,0,8,2,n,l),l},i.prototype.isEmpty=function(){return bn(this.executorsByZIndex_)},i.prototype.execute=function(n,t,e,r,o,a,l){var u=Object.keys(this.executorsByZIndex_).map(Number);u.sort(P),this.maxExtent_&&(n.save(),this.clip(n,e));var h,d,f,p,v,g,c=a||io;for(l&&u.reverse(),h=0,d=u.length;h<d;++h){var _=u[h].toString();for(v=this.executorsByZIndex_[_],f=0,p=c.length;f<p;++f)void 0!==(g=v[c[f]])&&g.execute(n,t,e,r,o,l)}this.maxExtent_&&n.restore()},i}(),oo={};const Rs=kd;var Ud=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),jd=function(i){function n(t,e,r,o,a,l,u){var c=i.call(this)||this;return c.context_=t,c.pixelRatio_=e,c.extent_=r,c.transform_=o,c.viewRotation_=a,c.squaredTolerance_=l,c.userTransform_=u,c.contextFillState_=null,c.contextStrokeState_=null,c.contextTextState_=null,c.fillState_=null,c.strokeState_=null,c.image_=null,c.imageAnchorX_=0,c.imageAnchorY_=0,c.imageHeight_=0,c.imageOpacity_=0,c.imageOriginX_=0,c.imageOriginY_=0,c.imageRotateWithView_=!1,c.imageRotation_=0,c.imageScale_=[0,0],c.imageWidth_=0,c.text_="",c.textOffsetX_=0,c.textOffsetY_=0,c.textRotateWithView_=!1,c.textRotation_=0,c.textScale_=[0,0],c.textFillState_=null,c.textStrokeState_=null,c.textState_=null,c.pixelCoordinates_=[],c.tmpLocalTransform_=[1,0,0,1,0,0],c}return Ud(n,i),n.prototype.drawImages_=function(t,e,r,o){if(this.image_){var a=ze(t,e,r,o,this.transform_,this.pixelCoordinates_),l=this.context_,u=this.tmpLocalTransform_,c=l.globalAlpha;1!=this.imageOpacity_&&(l.globalAlpha=c*this.imageOpacity_);var h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(var d=0,f=a.length;d<f;d+=2){var p=a[d]-this.imageAnchorX_,v=a[d+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var g=p+this.imageAnchorX_,_=v+this.imageAnchorY_;ee(u,g,_,1,1,h,-g,-_),l.setTransform.apply(l,u),l.translate(g,_),l.scale(this.imageScale_[0],this.imageScale_[1]),l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),l.setTransform(1,0,0,1,0,0)}else l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,v,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(l.globalAlpha=c)}},n.prototype.drawText_=function(t,e,r,o){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var a=ze(t,e,r,o,this.transform_,this.pixelCoordinates_),l=this.context_,u=this.textRotation_;for(this.textRotateWithView_&&(u+=this.viewRotation_);e<r;e+=o){var c=a[e]+this.textOffsetX_,h=a[e+1]+this.textOffsetY_;if(0!==u||1!=this.textScale_[0]||1!=this.textScale_[1]){var d=ee(this.tmpLocalTransform_,c,h,1,1,u,-c,-h);l.setTransform.apply(l,d),l.translate(c,h),l.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&l.strokeText(this.text_,0,0),this.textFillState_&&l.fillText(this.text_,0,0),l.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&l.strokeText(this.text_,c,h),this.textFillState_&&l.fillText(this.text_,c,h)}}},n.prototype.moveToLineTo_=function(t,e,r,o,a){var l=this.context_,u=ze(t,e,r,o,this.transform_,this.pixelCoordinates_);l.moveTo(u[0],u[1]);var c=u.length;a&&(c-=2);for(var h=2;h<c;h+=2)l.lineTo(u[h],u[h+1]);return a&&l.closePath(),r},n.prototype.drawRings_=function(t,e,r,o){for(var a=0,l=r.length;a<l;++a)e=this.moveToLineTo_(t,e,r[a],o,!0);return e},n.prototype.drawCircle=function(t){if(Pt(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function cc(i,n,t){var e=i.getFlatCoordinates();if(e){var r=i.getStride();return ze(e,0,e.length,r,n,t)}return null}(t,this.transform_,this.pixelCoordinates_),r=e[2]-e[0],o=e[3]-e[1],a=Math.sqrt(r*r+o*o),l=this.context_;l.beginPath(),l.arc(e[0],e[1],a,0,2*Math.PI),this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},n.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},n.prototype.setTransform=function(t){this.transform_=t},n.prototype.drawGeometry=function(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}},n.prototype.drawFeature=function(t,e){var r=e.getGeometryFunction()(t);!r||!Pt(this.extent_,r.getExtent())||(this.setStyle(e),this.drawGeometry(r))},n.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),r=0,o=e.length;r<o;++r)this.drawGeometry(e[r])},n.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)},n.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)},n.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Pt(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(r,0,r.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var o=t.getFlatMidpoint();this.drawText_(o,0,2,2)}}},n.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(Pt(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,o=t.getFlatCoordinates(),a=0,l=t.getEnds(),u=t.getStride();r.beginPath();for(var c=0,h=l.length;c<h;++c)a=this.moveToLineTo_(o,a,l[c],u,!1);r.stroke()}if(""!==this.text_){var d=t.getFlatMidpoints();this.drawText_(d,0,d.length,2)}}},n.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Pt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var r=t.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}},n.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Pt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getOrientedFlatCoordinates(),o=0,a=t.getEndss(),l=t.getStride();e.beginPath();for(var u=0,c=a.length;u<c;++u)o=this.drawRings_(r,o,a[u],l);this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var d=t.getFlatInteriorPoints();this.drawText_(d,0,d.length,2)}}},n.prototype.setContextFillState_=function(t){var e=this.context_,r=this.contextFillState_;r?r.fillStyle!=t.fillStyle&&(r.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},n.prototype.setContextStrokeState_=function(t){var e=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=t.lineCap&&(r.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(lt(r.lineDash,t.lineDash)||e.setLineDash(r.lineDash=t.lineDash),r.lineDashOffset!=t.lineDashOffset&&(r.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),r.lineJoin!=t.lineJoin&&(r.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),r.lineWidth!=t.lineWidth&&(r.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),r.miterLimit!=t.miterLimit&&(r.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),r.strokeStyle!=t.strokeStyle&&(r.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},n.prototype.setContextTextState_=function(t){var e=this.context_,r=this.contextTextState_,o=t.textAlign?t.textAlign:Un;r?(r.font!=t.font&&(r.font=t.font,e.font=t.font),r.textAlign!=o&&(r.textAlign=o,e.textAlign=o),r.textBaseline!=t.textBaseline&&(r.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=o,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:o,textBaseline:t.textBaseline})},n.prototype.setFillStrokeStyle=function(t,e){var r=this;if(t){var o=t.getColor();this.fillState_={fillStyle:ie(o||he)}}else this.fillState_=null;if(e){var a=e.getColor(),l=e.getLineCap(),u=e.getLineDash(),c=e.getLineDashOffset(),h=e.getLineJoin(),d=e.getWidth(),f=e.getMiterLimit(),p=u||Zn;this.strokeState_={lineCap:void 0!==l?l:Ar,lineDash:1===this.pixelRatio_?p:p.map(function(v){return v*r.pixelRatio_}),lineDashOffset:(c||0)*this.pixelRatio_,lineJoin:void 0!==h?h:dn,lineWidth:(void 0!==d?d:1)*this.pixelRatio_,miterLimit:void 0!==f?f:10,strokeStyle:ie(a||Gn)}}else this.strokeState_=null},n.prototype.setImageStyle=function(t){var e;if(t&&(e=t.getSize())){var r=t.getAnchor(),o=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*this.pixelRatio_,this.imageAnchorY_=r[1]*this.pixelRatio_,this.imageHeight_=e[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=e[0]*this.pixelRatio_}else this.image_=null},n.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var r=e.getColor();this.textFillState_={fillStyle:ie(r||he)}}else this.textFillState_=null;var o=t.getStroke();if(o){var a=o.getColor(),l=o.getLineCap(),u=o.getLineDash(),c=o.getLineDashOffset(),h=o.getLineJoin(),d=o.getWidth(),f=o.getMiterLimit();this.textStrokeState_={lineCap:void 0!==l?l:Ar,lineDash:u||Zn,lineDashOffset:c||0,lineJoin:void 0!==h?h:dn,lineWidth:void 0!==d?d:1,miterLimit:void 0!==f?f:10,strokeStyle:ie(a||Gn)}}else this.textStrokeState_=null;var p=t.getFont(),v=t.getOffsetX(),g=t.getOffsetY(),_=t.getRotateWithView(),C=t.getRotation(),y=t.getScaleArray(),x=t.getText(),T=t.getTextAlign(),w=t.getTextBaseline();this.textState_={font:void 0!==p?p:Qo,textAlign:void 0!==T?T:Un,textBaseline:void 0!==w?w:Lr},this.text_=void 0!==x?Array.isArray(x)?x.reduce(function(S,O,M){return S+(M%2?" ":O)},""):x:"",this.textOffsetX_=void 0!==v?this.pixelRatio_*v:0,this.textOffsetY_=void 0!==g?this.pixelRatio_*g:0,this.textRotateWithView_=void 0!==_&&_,this.textRotation_=void 0!==C?C:0,this.textScale_=[this.pixelRatio_*y[0],this.pixelRatio_*y[1]]}else this.text_=""},n}(Cs);const Bd=jd;var Yd=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qn=null,Xd=function(i){function n(t,e,r,o,a,l){var u=i.call(this)||this;return u.hitDetectionImage_=null,u.image_=t||new Image,null!==o&&(u.image_.crossOrigin=o),u.canvas_={},u.color_=l,u.unlisten_=null,u.imageState_=a,u.size_=r,u.src_=e,u}return Yd(n,i),n.prototype.isTainted_=function(){if(void 0===this.tainted_&&2===this.imageState_){Qn||(Qn=Zt(1,1)),Qn.drawImage(this.image_,0,0);try{Qn.getImageData(0,0,1,1),this.tainted_=!1}catch{Qn=null,this.tainted_=!0}}return!0===this.tainted_},n.prototype.dispatchChangeEvent_=function(){this.dispatchEvent("change")},n.prototype.handleImageError_=function(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()},n.prototype.handleImageLoad_=function(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},n.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},n.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},n.prototype.getImageState=function(){return this.imageState_},n.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],r=Zt(t,e);r.fillRect(0,0,t,e),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},n.prototype.getSize=function(){return this.size_},n.prototype.getSrc=function(){return this.src_},n.prototype.load=function(){if(0==this.imageState_){this.imageState_=1;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=Ji(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},n.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]&&2===this.imageState_){var e=document.createElement("canvas");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var r=e.getContext("2d");if(r.scale(t,t),r.drawImage(this.image_,0,0),r.globalCompositeOperation="multiply","multiply"===r.globalCompositeOperation||this.isTainted_())r.fillStyle=Fo(this.color_),r.fillRect(0,0,e.width/t,e.height/t),r.globalCompositeOperation="destination-in",r.drawImage(this.image_,0,0);else{for(var o=r.getImageData(0,0,e.width,e.height),a=o.data,l=this.color_[0]/255,u=this.color_[1]/255,c=this.color_[2]/255,h=this.color_[3],d=0,f=a.length;d<f;d+=4)a[d]*=l,a[d+1]*=u,a[d+2]*=c,a[d+3]*=h;r.putImageData(o,0,0)}}},n.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},n}(fn),Wd=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),qd=function(i){function n(t){var e=this,r=t||{};(e=i.call(this,{opacity:void 0!==r.opacity?r.opacity:1,rotation:void 0!==r.rotation?r.rotation:0,scale:void 0!==r.scale?r.scale:1,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:void 0!==r.rotateWithView&&r.rotateWithView,declutterMode:r.declutterMode})||this).anchor_=void 0!==r.anchor?r.anchor:[.5,.5],e.normalizedAnchor_=null,e.anchorOrigin_=void 0!==r.anchorOrigin?r.anchorOrigin:"top-left",e.anchorXUnits_=void 0!==r.anchorXUnits?r.anchorXUnits:"fraction",e.anchorYUnits_=void 0!==r.anchorYUnits?r.anchorYUnits:"fraction",e.crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null;var c=void 0!==r.img?r.img:null;e.imgSize_=r.imgSize;var h=r.src;J(!(void 0!==h&&c),4),J(!c||c&&e.imgSize_,5),(void 0===h||0===h.length)&&c&&(h=c.src||rt(c)),J(void 0!==h&&h.length>0,6);var d=void 0!==r.src?0:2;return e.color_=void 0!==r.color?Er(r.color):null,e.iconImage_=function zd(i,n,t,e,r,o){var a=Tr.get(n,e,o);return a||(a=new Xd(i,n,t,e,r,o),Tr.set(n,e,o,a)),a}(c,h,void 0!==e.imgSize_?e.imgSize_:null,e.crossOrigin_,d,e.color_),e.offset_=void 0!==r.offset?r.offset:[0,0],e.offsetOrigin_=void 0!==r.offsetOrigin?r.offsetOrigin:"top-left",e.origin_=null,e.size_=void 0!==r.size?r.size:null,e}return Wd(n,i),n.prototype.clone=function(){var t=this.getScale();return new n({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},n.prototype.getAnchor=function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[0]=-t[0]+e[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}var r=this.getDisplacement();return[t[0]-r[0],t[1]+r[1]]},n.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},n.prototype.getColor=function(){return this.color_},n.prototype.getImage=function(t){return this.iconImage_.getImage(t)},n.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},n.prototype.getImageSize=function(){return this.iconImage_.getSize()},n.prototype.getImageState=function(){return this.iconImage_.getImageState()},n.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},n.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if("top-left"!=this.offsetOrigin_){var e=this.getSize(),r=this.iconImage_.getSize();if(!e||!r)return null;t=t.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[0]=r[0]-e[0]-t[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[1]=r[1]-e[1]-t[1])}return this.origin_=t,this.origin_},n.prototype.getSrc=function(){return this.iconImage_.getSrc()},n.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},n.prototype.listenImageChange=function(t){this.iconImage_.addEventListener("change",t)},n.prototype.load=function(){this.iconImage_.load()},n.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener("change",t)},n}(gs);const Hr=qd;var oe=.5,Ms={Point:function op(i,n,t,e,r){var l,o=t.getImage(),a=t.getText();if(o){if(2!=o.getImageState())return;var u=i;if(r){var c=o.getDeclutterMode();if("none"!==c)if(u=r,"obstacle"===c){var h=i.getBuilder(t.getZIndex(),"Image");h.setImageStyle(o,l),h.drawPoint(n,e)}else a&&a.getText()&&(l={})}var d=u.getBuilder(t.getZIndex(),"Image");d.setImageStyle(o,l),d.drawPoint(n,e)}if(a&&a.getText()){var f=i;r&&(f=r);var p=f.getBuilder(t.getZIndex(),"Text");p.setTextStyle(a,l),p.drawText(n,e)}},LineString:function np(i,n,t,e,r){var o=t.getStroke();if(o){var a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(n,e)}var l=t.getText();if(l&&l.getText()){var u=(r||i).getBuilder(t.getZIndex(),"Text");u.setTextStyle(l),u.drawText(n,e)}},Polygon:function sp(i,n,t,e,r){var o=t.getFill(),a=t.getStroke();if(o||a){var l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(o,a),l.drawPolygon(n,e)}var u=t.getText();if(u&&u.getText()){var c=(r||i).getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(n,e)}},MultiPoint:function ap(i,n,t,e,r){var l,o=t.getImage(),a=t.getText();if(o){if(2!=o.getImageState())return;var u=i;if(r){var c=o.getDeclutterMode();if("none"!==c)if(u=r,"obstacle"===c){var h=i.getBuilder(t.getZIndex(),"Image");h.setImageStyle(o,l),h.drawMultiPoint(n,e)}else a&&a.getText()&&(l={})}var d=u.getBuilder(t.getZIndex(),"Image");d.setImageStyle(o,l),d.drawMultiPoint(n,e)}if(a&&a.getText()){var f=i;r&&(f=r);var p=f.getBuilder(t.getZIndex(),"Text");p.setTextStyle(a,l),p.drawText(n,e)}},MultiLineString:function rp(i,n,t,e,r){var o=t.getStroke();if(o){var a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(n,e)}var l=t.getText();if(l&&l.getText()){var u=(r||i).getBuilder(t.getZIndex(),"Text");u.setTextStyle(l),u.drawText(n,e)}},MultiPolygon:function ip(i,n,t,e,r){var o=t.getFill(),a=t.getStroke();if(a||o){var l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(o,a),l.drawMultiPolygon(n,e)}var u=t.getText();if(u&&u.getText()){var c=(r||i).getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(n,e)}},GeometryCollection:function ep(i,n,t,e,r){var a,l,o=n.getGeometriesArray();for(a=0,l=o.length;a<l;++a)(0,Ms[o[a].getType()])(i,o[a],t,e,r)},Circle:function $d(i,n,t,e,r){var o=t.getFill(),a=t.getStroke();if(o||a){var l=i.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(o,a),l.drawCircle(n,e)}var u=t.getText();if(u&&u.getText()){var c=(r||i).getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(n,e)}}};function Jd(i,n){return parseInt(rt(i),10)-parseInt(rt(n),10)}function ao(i,n){return.5*i/n}function Ps(i,n,t,e,r,o,a){var l=!1,u=t.getImage();if(u){var c=u.getImageState();2==c||3==c?u.unlistenImageChange(r):(0==c&&u.load(),u.listenImageChange(r),l=!0)}return function tp(i,n,t,e,r,o){var a=t.getGeometryFunction()(n);if(a){var l=a.simplifyTransformed(e,r);t.getRenderer()?As(i,l,t,n):(0,Ms[l.getType()])(i,l,t,n,o)}}(i,n,t,e,o,a),l}function As(i,n,t,e){if("GeometryCollection"!=n.getType())i.getBuilder(t.getZIndex(),"Default").drawCustom(n,e,t.getRenderer(),t.getHitDetectionRenderer());else for(var r=n.getGeometries(),o=0,a=r.length;o<a;++o)As(i,r[o],t,e)}var lp=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),up=function(i){function n(t){var e=i.call(this,t)||this;return e.boundHandleStyleImageChange_=e.handleStyleImageChange_.bind(e),e.hitDetectionImageData_=null,e.renderedFeatures_=null,e.renderedRevision_=-1,e.renderedResolution_=NaN,e.renderedExtent_=[1/0,1/0,-1/0,-1/0],e.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],e.renderedCenter_=null,e.renderedProjection_=null,e.renderedRenderOrder_=null,e.replayGroup_=null,e.replayGroupChanged=!0,e.declutterExecutorGroup=null,e.clipping=!0,e.compositionContext_=null,e.opacity_=1,e}return lp(n,i),n.prototype.renderWorlds=function(t,e,r){var o=e.extent,a=e.viewState,l=a.center,u=a.resolution,c=a.projection,h=a.rotation,d=c.getExtent(),f=this.getLayer().getSource(),p=e.pixelRatio,v=e.viewHints,g=!(v[0]||v[1]),_=this.compositionContext_,C=Math.round(e.size[0]*p),y=Math.round(e.size[1]*p),x=f.getWrapX()&&c.canWrapX(),T=x?ut(d):null,w=x?Math.ceil((o[2]-d[2])/T)+1:1,S=x?Math.floor((o[0]-d[0])/T):0;do{var O=this.getRenderTransform(l,u,h,p,C,y,S*T);t.execute(_,1,O,h,g,void 0,r)}while(++S<w)},n.prototype.setupCompositionContext_=function(){if(1!==this.opacity_){var t=Zt(this.context.canvas.width,this.context.canvas.height,Ka);this.compositionContext_=t}else this.compositionContext_=this.context},n.prototype.releaseCompositionContext_=function(){if(1!==this.opacity_){var t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,Ho(this.compositionContext_),Ka.push(this.compositionContext_.canvas),this.compositionContext_=null}},n.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())},n.prototype.renderFrame=function(t,e){var r=t.pixelRatio,o=t.layerStatesArray[t.layerIndex];(function dl(i,n,t){(function An(i,n,t,e,r,o,a){return i[0]=n,i[1]=t,i[2]=e,i[3]=r,i[4]=o,i[5]=a,i})(i,n,0,0,t,0,0)})(this.pixelTransform,1/r,1/r),pr(this.inversePixelTransform,this.pixelTransform);var a=ui(this.pixelTransform);this.useContainer(e,a,this.getBackground(t));var l=this.context,u=l.canvas,c=this.replayGroup_,h=this.declutterExecutorGroup;if((!c||c.isEmpty())&&(!h||h.isEmpty()))return null;var d=Math.round(t.size[0]*r),f=Math.round(t.size[1]*r);u.width!=d||u.height!=f?(u.width=d,u.height=f,u.style.transform!==a&&(u.style.transform=a)):this.containerReused||l.clearRect(0,0,d,f),this.preRender(l,t);var p=t.viewState;this.opacity_=o.opacity,this.setupCompositionContext_();var g=!1,_=!0;if(o.extent&&this.clipping){var C=Xe(o.extent);(g=(_=Pt(C,t.extent))&&!rn(C,t.extent))&&this.clipUnrotated(this.compositionContext_,t,C)}return _&&this.renderWorlds(c,t),g&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(l,t),this.renderedRotation_!==p.rotation&&(this.renderedRotation_=p.rotation,this.hitDetectionImageData_=null),this.container},n.prototype.getFeatures=function(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var r=[this.context.canvas.width,this.context.canvas.height];_t(this.pixelTransform,r);var o=this.renderedCenter_,a=this.renderedResolution_,l=this.renderedRotation_,u=this.renderedProjection_,c=this.wrappedRenderedExtent_,h=this.getLayer(),d=[],f=r[0]*oe,p=r[1]*oe;d.push(this.getRenderTransform(o,a,l,oe,f,p,0).slice());var v=h.getSource(),g=u.getExtent();if(v.getWrapX()&&u.canWrapX()&&!rn(g,c)){for(var _=c[0],C=ut(g),y=0;_<g[0];)--y,d.push(this.getRenderTransform(o,a,l,oe,f,p,C*y).slice()),_+=C;for(y=0,_=c[2];_>g[2];)++y,d.push(this.getRenderTransform(o,a,l,oe,f,p,C*y).slice()),_-=C}this.hitDetectionImageData_=function Vd(i,n,t,e,r,o,a){var c=Zt(i[0]*oe,i[1]*oe);c.imageSmoothingEnabled=!1;for(var h=c.canvas,d=new Bd(c,oe,r,null,a),f=t.length,p=Math.floor(16777215/f),v={},g=1;g<=f;++g){var _=t[g-1],C=_.getStyleFunction()||e;if(e){var y=C(_,o);if(y){Array.isArray(y)||(y=[y]);for(var T="#"+("000000"+(g*p).toString(16)).slice(-6),w=0,S=y.length;w<S;++w){var O=y[w],M=O.getGeometryFunction()(_);if(M&&Pt(r,M.getExtent())){var A=O.clone(),b=A.getFill();b&&b.setColor(T);var j=A.getStroke();j&&(j.setColor(T),j.setLineDash(null)),A.setText(void 0);var Y=O.getImage();if(Y&&0!==Y.getOpacity()){var D=Y.getImageSize();if(!D)continue;var z=Zt(D[0],D[1],void 0,{alpha:!1}),W=z.canvas;z.fillStyle=T,z.fillRect(0,0,W.width,W.height),A.setImage(new Hr({img:W,imgSize:D,anchor:Y.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Y.getOrigin(),opacity:1,size:Y.getSize(),scale:Y.getScale(),rotation:Y.getRotation(),rotateWithView:Y.getRotateWithView()}))}var B=A.getZIndex()||0;(N=v[B])||(v[B]=N={},N.Polygon=[],N.Circle=[],N.LineString=[],N.Point=[]),N[M.getType().replace("Multi","")].push(M,A)}}}}}for(var k=Object.keys(v).map(Number).sort(P),Q=(g=0,k.length);g<Q;++g){var N=v[k[g]];for(var $ in N){var st=N[$];for(w=0,S=st.length;w<S;w+=2){d.setStyle(st[w+1]);for(var I=0,gt=n.length;I<gt;++I)d.setTransform(n[I]),d.drawGeometry(st[w])}}}return c.getImageData(0,0,h.width,h.height)}(r,d,this.renderedFeatures_,h.getStyleFunction(),c,a,l)}e(function Kd(i,n,t){var e=[];if(t){var r=Math.floor(Math.round(i[0])*oe),o=Math.floor(Math.round(i[1])*oe),a=4*(yt(r,0,t.width-1)+yt(o,0,t.height-1)*t.width),h=t.data[a+2]+256*(t.data[a+1]+256*t.data[a]),d=Math.floor(16777215/n.length);h&&h%d==0&&e.push(n[h/d-1])}return e}(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},n.prototype.forEachFeatureAtCoordinate=function(t,e,r,o,a){var l=this;if(this.replayGroup_){var p,u=e.viewState.resolution,c=e.viewState.rotation,h=this.getLayer(),d={},f=function(g,_,C){var y=rt(g),x=d[y];if(x){if(!0!==x&&C<x.distanceSq){if(0===C)return d[y]=!0,a.splice(a.lastIndexOf(x),1),o(g,h,_);x.geometry=_,x.distanceSq=C}}else{if(0===C)return d[y]=!0,o(g,h,_);a.push(d[y]={feature:g,layer:h,geometry:_,distanceSq:C,callback:o})}},v=[this.replayGroup_];return this.declutterExecutorGroup&&v.push(this.declutterExecutorGroup),v.some(function(g){return p=g.forEachFeatureAtCoordinate(t,u,c,r,f,g===l.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(function(_){return _.value}):null)}),p}},n.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},n.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},n.prototype.prepareFrame=function(t){var e=this.getLayer(),r=e.getSource();if(!r)return!1;var o=t.viewHints[0],a=t.viewHints[1],l=e.getUpdateWhileAnimating(),u=e.getUpdateWhileInteracting();if(this.ready&&!l&&o||!u&&a)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var c=t.extent,h=t.viewState,d=h.projection,f=h.resolution,p=t.pixelRatio,v=e.getRevision(),g=e.getRenderBuffer(),_=e.getRenderOrder();void 0===_&&(_=Jd);var C=h.center.slice(),y=ci(c,g*f),x=y.slice(),T=[y.slice()],w=d.getExtent();if(r.getWrapX()&&d.canWrapX()&&!rn(w,t.extent)){var S=ut(w),O=Math.max(ut(y)/2,S);y[0]=w[0]-O,y[2]=w[2]+O,zo(C,d);var M=Po(T[0],d);M[0]<w[0]&&M[2]<w[2]?T.push([M[0]+S,M[1],M[2]+S,M[3]]):M[0]>w[0]&&M[2]>w[2]&&T.push([M[0]-S,M[1],M[2]-S,M[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==v&&this.renderedRenderOrder_==_&&rn(this.wrappedRenderedExtent_,y))return lt(this.renderedExtent_,x)||(this.hitDetectionImageData_=null,this.renderedExtent_=x),this.renderedCenter_=C,this.replayGroupChanged=!1,!0;this.replayGroup_=null;var b,A=new ws(ao(f,p),y,f,p);this.getLayer().getDeclutter()&&(b=new ws(ao(f,p),y,f,p));var Y,j=pa();if(j){for(var D=0,z=T.length;D<z;++D){var B=Ai(T[D]);r.loadFeatures(B,Vu(f),j)}Y=Yn(j,d)}else for(D=0,z=T.length;D<z;++D)r.loadFeatures(T[D],f,d);var N=function Qd(i,n){var t=ao(i,n);return t*t}(f,p),k=!0,Q=function(ht){var K,Ct=ht.getStyleFunction()||e.getStyleFunction();if(Ct&&(K=Ct(ht,f)),K){var Lt=this.renderFeature(ht,N,K,A,Y,b);k=k&&!Lt}}.bind(this),$=Ai(y),st=r.getFeaturesInExtent($);for(_&&st.sort(_),D=0,z=st.length;D<z;++D)Q(st[D]);this.renderedFeatures_=st,this.ready=k;var I=A.finish(),gt=new Rs(y,f,p,r.getOverlaps(),I,e.getRenderBuffer());return b&&(this.declutterExecutorGroup=new Rs(y,f,p,r.getOverlaps(),b.finish(),e.getRenderBuffer())),this.renderedResolution_=f,this.renderedRevision_=v,this.renderedRenderOrder_=_,this.renderedExtent_=x,this.wrappedRenderedExtent_=y,this.renderedCenter_=C,this.renderedProjection_=d,this.replayGroup_=gt,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},n.prototype.renderFeature=function(t,e,r,o,a,l){if(!r)return!1;var u=!1;if(Array.isArray(r))for(var c=0,h=r.length;c<h;++c)u=Ps(o,t,r[c],e,this.boundHandleStyleImageChange_,a,l)||u;else u=Ps(o,t,r,e,this.boundHandleStyleImageChange_,a,l);return u},n}(Ha);const cp=up;var hp=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),fp=function(i){function n(t){return i.call(this,t)||this}return hp(n,i),n.prototype.createRenderer=function(){return new cp(this)},n}(gd);const Jr=fp;var dp=function(){function i(n){this.rbush_=new vs(n),this.items_={}}return i.prototype.insert=function(n,t){var e={minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],value:t};this.rbush_.insert(e),this.items_[rt(t)]=e},i.prototype.load=function(n,t){for(var e=new Array(t.length),r=0,o=t.length;r<o;r++){var a=n[r],l=t[r],u={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:l};e[r]=u,this.items_[rt(l)]=u}this.rbush_.load(e)},i.prototype.remove=function(n){var t=rt(n),e=this.items_[t];return delete this.items_[t],null!==this.rbush_.remove(e)},i.prototype.update=function(n,t){var e=this.items_[rt(t)];Fn([e.minX,e.minY,e.maxX,e.maxY],n)||(this.remove(t),this.insert(n,t))},i.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},i.prototype.getInExtent=function(n){return this.rbush_.search({minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}).map(function(r){return r.value})},i.prototype.forEach=function(n){return this.forEach_(this.getAll(),n)},i.prototype.forEachInExtent=function(n,t){return this.forEach_(this.getInExtent(n),t)},i.prototype.forEach_=function(n,t){for(var e,r=0,o=n.length;r<o;r++)if(e=t(n[r]))return e;return e},i.prototype.isEmpty=function(){return bn(this.items_)},i.prototype.clear=function(){this.rbush_.clear(),this.items_={}},i.prototype.getExtent=function(n){var t=this.rbush_.toJSON();return ne(t.minX,t.minY,t.maxX,t.maxY,n)},i.prototype.concat=function(n){for(var t in this.rbush_.load(n.rbush_.all()),n.items_)this.items_[t]=n.items_[t]},i}();const Ls=dp;function pp(i,n){return[[-1/0,-1/0,1/0,1/0]]}function Ds(i,n){return function(t,e,r,o,a){var l=this;!function vp(i,n,t,e,r,o,a){var l=new XMLHttpRequest;l.open("GET","function"==typeof i?i(t,e,r):i,!0),"arraybuffer"==n.getType()&&(l.responseType="arraybuffer"),l.withCredentials=false,l.onload=function(u){if(!l.status||l.status>=200&&l.status<300){var c=n.getType(),h=void 0;"json"==c||"text"==c?h=l.responseText:"xml"==c?(h=l.responseXML)||(h=(new DOMParser).parseFromString(l.responseText,"application/xml")):"arraybuffer"==c&&(h=l.response),h?o(n.readFeatures(h,{extent:t,featureProjection:r}),n.readProjection(h)):a()}else a()},l.onerror=a,l.send()}(i,n,t,e,r,function(u,c){l.addFeatures(u),void 0!==o&&o(u)},a||Ut)}}var bs=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fe=function(i){function n(t,e,r){var o=i.call(this,t)||this;return o.feature=e,o.features=r,o}return bs(n,i),n}(ce),gp=function(i){function n(t){var e=this,r=t||{};(e=i.call(this,{attributions:r.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===r.wrapX||r.wrapX})||this).loader_=Ut,e.format_=r.format,e.overlaps_=void 0===r.overlaps||r.overlaps,e.url_=r.url,void 0!==r.loader?e.loader_=r.loader:void 0!==e.url_&&(J(e.format_,7),e.loader_=Ds(e.url_,e.format_)),e.strategy_=void 0!==r.strategy?r.strategy:pp;var a,l,o=void 0===r.useSpatialIndex||r.useSpatialIndex;return e.featuresRtree_=o?new Ls:null,e.loadedExtentsRtree_=new Ls,e.loadingExtentsCount_=0,e.nullGeometryFeatures_={},e.idIndex_={},e.uidIndex_={},e.featureChangeKeys_={},e.featuresCollection_=null,Array.isArray(r.features)?l=r.features:r.features&&(l=(a=r.features).getArray()),!o&&void 0===a&&(a=new Bt(l)),void 0!==l&&e.addFeaturesInternal(l),void 0!==a&&e.bindFeaturesCollection_(a),e}return bs(n,i),n.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},n.prototype.addFeatureInternal=function(t){var e=rt(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var r=t.getGeometry();if(r){var o=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Fe("addfeature",t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},n.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[nt(e,"change",this.handleFeatureChange_,this),nt(e,"propertychange",this.handleFeatureChange_,this)]},n.prototype.addToIndex_=function(t,e){var r=!0,o=e.getId();return void 0!==o&&(o.toString()in this.idIndex_?r=!1:this.idIndex_[o.toString()]=e),r&&(J(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),r},n.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},n.prototype.addFeaturesInternal=function(t){for(var e=[],r=[],o=[],a=0,l=t.length;a<l;a++){var c=rt(u=t[a]);this.addToIndex_(c,u)&&r.push(u)}a=0;for(var h=r.length;a<h;a++){var u;c=rt(u=r[a]),this.setupChangeEvents_(c,u);var d=u.getGeometry();if(d){var f=d.getExtent();e.push(f),o.push(u)}else this.nullGeometryFeatures_[c]=u}if(this.featuresRtree_&&this.featuresRtree_.load(e,o),this.hasListener("addfeature")){a=0;for(var p=r.length;a<p;a++)this.dispatchEvent(new Fe("addfeature",r[a]))}},n.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener("addfeature",function(r){e||(e=!0,t.push(r.feature),e=!1)}),this.addEventListener("removefeature",function(r){e||(e=!0,t.remove(r.feature),e=!1)}),t.addEventListener("add",function(r){e||(e=!0,this.addFeature(r.element),e=!1)}.bind(this)),t.addEventListener("remove",function(r){e||(e=!0,this.removeFeature(r.element),e=!1)}.bind(this)),this.featuresCollection_=t},n.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(dt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var o=function(u){this.removeFeatureInternal(u)}.bind(this);for(var a in this.featuresRtree_.forEach(o),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[a])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var l=new Fe("clear");this.dispatchEvent(l),this.changed()},n.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},n.prototype.forEachFeatureAtCoordinateDirect=function(t,e){return this.forEachFeatureInExtent([t[0],t[1],t[0],t[1]],function(o){if(o.getGeometry().intersectsCoordinate(t))return e(o)})},n.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},n.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(r){if(r.getGeometry().intersectsExtent(t)){var a=e(r);if(a)return a}})},n.prototype.getFeaturesCollection=function(){return this.featuresCollection_},n.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),bn(this.nullGeometryFeatures_)||tt(t,ko(this.nullGeometryFeatures_))),t},n.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(r){e.push(r)}),e},n.prototype.getFeaturesInExtent=function(t,e){var r=this;if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);var a=function Ol(i,n){if(n.canWrapX()){var t=n.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[t[0],i[1],t[2],i[3]]];Po(i,n);var e=ut(t);if(ut(i)>e)return[[t[0],i[1],t[2],i[3]]];if(i[0]<t[0])return[[i[0]+e,i[1],t[2],i[3]],[t[0],i[1],i[2],i[3]]];if(i[2]>t[2])return[[i[0],i[1],t[2],i[3]],[t[0],i[1],i[2]-e,i[3]]]}return[i]}(t,e);return[].concat.apply([],a.map(function(l){return r.featuresRtree_.getInExtent(l)}))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},n.prototype.getClosestFeatureToCoordinate=function(t,e){var r=t[0],o=t[1],a=null,l=[NaN,NaN],u=1/0,c=[-1/0,-1/0,1/0,1/0],h=e||Dt;return this.featuresRtree_.forEachInExtent(c,function(d){if(h(d)){var f=d.getGeometry(),p=u;if((u=f.closestPointXY(r,o,l,u))<p){a=d;var v=Math.sqrt(u);c[0]=r-v,c[1]=o-v,c[2]=r+v,c[3]=o+v}}}),a},n.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},n.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},n.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},n.prototype.getFormat=function(){return this.format_},n.prototype.getOverlaps=function(){return this.overlaps_},n.prototype.getUrl=function(){return this.url_},n.prototype.handleFeatureChange_=function(t){var e=t.target,r=rt(e),o=e.getGeometry();if(o){var a=o.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(a,e)):this.featuresRtree_&&this.featuresRtree_.update(a,e)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[r]=e);var l=e.getId();if(void 0!==l){var u=l.toString();this.idIndex_[u]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[u]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[r]=e;this.changed(),this.dispatchEvent(new Fe("changefeature",e))},n.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:rt(t)in this.uidIndex_},n.prototype.isEmpty=function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&bn(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()},n.prototype.loadFeatures=function(t,e,r){for(var o=this.loadedExtentsRtree_,a=this.strategy_(t,e,r),l=function(d,f){var p=a[d];o.forEachInExtent(p,function(g){return rn(g.extent,p)})||(++u.loadingExtentsCount_,u.dispatchEvent(new Fe("featuresloadstart")),u.loader_.call(u,p,e,r,function(g){--this.loadingExtentsCount_,this.dispatchEvent(new Fe("featuresloadend",void 0,g))}.bind(u),function(){--this.loadingExtentsCount_,this.dispatchEvent(new Fe("featuresloaderror"))}.bind(u)),o.insert(p,{extent:p.slice()}))},u=this,c=0,h=a.length;c<h;++c)l(c);this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0},n.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),i.prototype.refresh.call(this)},n.prototype.removeLoadedExtent=function(t){var r,e=this.loadedExtentsRtree_;e.forEachInExtent(t,function(o){if(Fn(o.extent,t))return r=o,!0}),r&&e.remove(r)},n.prototype.removeFeature=function(t){if(t){var e=rt(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}},n.prototype.removeFeatureInternal=function(t){var e=rt(t),r=this.featureChangeKeys_[e];if(r){r.forEach(dt),delete this.featureChangeKeys_[e];var o=t.getId();return void 0!==o&&delete this.idIndex_[o.toString()],delete this.uidIndex_[e],this.dispatchEvent(new Fe("removefeature",t)),t}},n.prototype.removeFromIdIndex_=function(t){var e=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===t){delete this.idIndex_[r],e=!0;break}return e},n.prototype.setLoader=function(t){this.loader_=t},n.prototype.setUrl=function(t){J(this.format_,7),this.url_=t,this.setLoader(Ds(t,this.format_))},n}(cs);const so=gp;var _p=function(){var i=function(n,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}i(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),yp=function(i){function n(t){var e=i.call(this)||this;return e.id_=void 0,e.geometryName_="geometry",e.style_=null,e.styleFunction_=void 0,e.geometryChangeKey_=null,e.addChangeListener(e.geometryName_,e.handleGeometryChanged_),t&&("function"==typeof t.getSimplifiedGeometry?e.setGeometry(t):e.setProperties(t)),e}return _p(n,i),n.prototype.clone=function(){var t=new n(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var e=this.getGeometry();e&&t.setGeometry(e.clone());var r=this.getStyle();return r&&t.setStyle(r),t},n.prototype.getGeometry=function(){return this.get(this.geometryName_)},n.prototype.getId=function(){return this.id_},n.prototype.getGeometryName=function(){return this.geometryName_},n.prototype.getStyle=function(){return this.style_},n.prototype.getStyleFunction=function(){return this.styleFunction_},n.prototype.handleGeometryChange_=function(){this.changed()},n.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(dt(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=nt(t,"change",this.handleGeometryChange_,this)),this.changed()},n.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},n.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function mp(i){return"function"==typeof i?i:(Array.isArray(i)?n=i:(J("function"==typeof i.getZIndex,41),n=[i]),function(){return n});var n}(t):void 0,this.changed()},n.prototype.setId=function(t){this.id_=t,this.changed()},n.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},n}(re);const lo=yp;let ks=(()=>{class i{constructor(t){this.elementRef=t,this.lat=-34.603490361131385,this.lon=-58.382037891217465,this.width="100%",this.height="300px",this.title="Monitoreo",this.coordinates=new s.vpe,this.target="map-"+Math.random().toString(36).substring(2)}ngOnInit(){}ngOnChanges(){this.map&&(this.map.getView().setCenter(Ye(this.coordinatesToCenter,"EPSG:4326","EPSG:3857")),this.map.getView().setZoom(15))}ngAfterViewInit(){this.mapEl=this.elementRef.nativeElement.querySelector("#"+this.target),this.setSize(),this.map=new Uh({target:this.target,layers:[new Cf({source:new rd})],view:new Se({center:Mi([this.lon,this.lat]),zoom:this.zoom}),controls:Ba({attribution:!1,zoom:!0}).extend([])}),this.map.on("click",t=>{this.map.getLayers().forEach(r=>{r instanceof Jr&&r.getSource().clear()}),this.setMarker(new Jr({source:new so({features:[new lo({geometry:new Yr(t.coordinate)})]}),style:new Vr({image:new Hr({anchor:[.5,1],src:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d1/Google_Maps_pin.svg/30px-Google_Maps_pin.svg.png"})})}));const e=Ye(t.coordinate,"EPSG:3857","EPSG:4326");this.coordinates.emit(e)})}setMarker(t){this.map.addLayer(t)}setControl(t){this.map.addControl(t)}setSize(){if(this.mapEl){const t=this.mapEl.style;t.height=Gs(this.height)||"300px",t.width=Gs(this.width)||"100%"}}}return i.\u0275fac=function(t){return new(t||i)(s.Y36(s.SBq))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-ol-map"]],inputs:{lat:"lat",lon:"lon",zoom:"zoom",width:"width",height:"height",title:"title",coordinatesToCenter:"coordinatesToCenter"},outputs:{coordinates:"coordinates"},features:[s.TTD],decls:3,vars:1,consts:[[1,"map-card-header"],[1,"map-container"],[1,"map",2,"position","relative","-moz-border-radius","4px","border-radius","4px","border","1px solid black","overflow","hidden",3,"id"]],template:function(t,e){1&t&&(s._UZ(0,"div",0),s.TgZ(1,"div",1),s._UZ(2,"div",2),s.qZA()),2&t&&(s.xp6(2),s.s9C("id",e.target))},styles:['.ol-box[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:2px;border:1.5px solid rgb(179,197,219);background-color:#fff6}.ol-mouse-position[_ngcontent-%COMP%]{top:8px;right:8px;position:absolute}.ol-scale-line[_ngcontent-%COMP%]{background:rgba(0,60,136,.3);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner[_ngcontent-%COMP%]{border:1px solid #eee;border-top:none;color:#eee;font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-singlebar-even[_ngcontent-%COMP%]{background-color:#000}.ol-scale-singlebar-odd[_ngcontent-%COMP%]{background-color:#fff}.ol-scale-bar[_ngcontent-%COMP%]{position:absolute;bottom:8px;left:8px}.ol-scale-step-marker[_ngcontent-%COMP%]{width:1px;height:15px;background-color:#000;float:right;z-index:10}.ol-scale-step-text[_ngcontent-%COMP%]{position:absolute;bottom:-5px;font-size:12px;z-index:11;color:#000;text-shadow:-2px 0 #FFFFFF,0 2px #FFFFFF,2px 0 #FFFFFF,0 -2px #FFFFFF}.ol-scale-text[_ngcontent-%COMP%]{position:absolute;font-size:14px;text-align:center;bottom:25px;color:#000;text-shadow:-2px 0 #FFFFFF,0 2px #FFFFFF,2px 0 #FFFFFF,0 -2px #FFFFFF}.ol-scale-singlebar[_ngcontent-%COMP%]{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid black}.ol-unsupported[_ngcontent-%COMP%]{display:none}.ol-viewport[_ngcontent-%COMP%], .ol-unselectable[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ol-viewport[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{all:unset}.ol-selectable[_ngcontent-%COMP%]{-webkit-touch-callout:default;-webkit-user-select:text;user-select:text}.ol-grabbing[_ngcontent-%COMP%]{cursor:grabbing}.ol-grab[_ngcontent-%COMP%]{cursor:move;cursor:grab}.ol-control[_ngcontent-%COMP%]{position:absolute;background-color:#fff6;border-radius:4px;padding:2px}.ol-control[_ngcontent-%COMP%]:hover{background-color:#fff9}.ol-zoom[_ngcontent-%COMP%]{top:.5em;left:.5em}.ol-rotate[_ngcontent-%COMP%]{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden[_ngcontent-%COMP%]{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent[_ngcontent-%COMP%]{top:4.643em;left:.5em}.ol-full-screen[_ngcontent-%COMP%]{right:.5em;top:.5em}.ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin:1px;padding:0;color:#fff;font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:#003c8880;border:none;border-radius:2px}.ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:1.4em}.ol-compass[_ngcontent-%COMP%]{display:block;font-weight:400;font-size:1.2em;will-change:transform}.ol-touch[_ngcontent-%COMP%]   .ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.5em}.ol-touch[_ngcontent-%COMP%]   .ol-zoom-extent[_ngcontent-%COMP%]{top:5.5em}.ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .ol-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{text-decoration:none;background-color:#003c88b3}.ol-zoom[_ngcontent-%COMP%]   .ol-zoom-in[_ngcontent-%COMP%]{border-radius:2px 2px 0 0}.ol-zoom[_ngcontent-%COMP%]   .ol-zoom-out[_ngcontent-%COMP%]{border-radius:0 0 2px 2px}.ol-attribution[_ngcontent-%COMP%]{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#003c88b3;text-decoration:none}.ol-attribution[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:1px .5em;color:#000;text-shadow:0 0 2px #fff;font-size:12px}.ol-attribution[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline;list-style:none}.ol-attribution[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{content:" "}.ol-attribution[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-shrink:0}.ol-attribution.ol-collapsed[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none}.ol-attribution[_ngcontent-%COMP%]:not(.ol-collapsed){background:rgba(255,255,255,.8)}.ol-attribution.ol-uncollapsible[_ngcontent-%COMP%]{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}.ol-zoomslider[_ngcontent-%COMP%]{top:4.5em;left:.5em;height:200px}.ol-zoomslider[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;height:10px}.ol-touch[_ngcontent-%COMP%]   .ol-zoomslider[_ngcontent-%COMP%]{top:5.5em}.ol-overviewmap[_ngcontent-%COMP%]{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible[_ngcontent-%COMP%]{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap[_ngcontent-%COMP%]   .ol-overviewmap-map[_ngcontent-%COMP%], .ol-overviewmap[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block}.ol-overviewmap[_ngcontent-%COMP%]   .ol-overviewmap-map[_ngcontent-%COMP%]{border:1px solid #7b98bc;height:150px;margin:2px;width:150px}.ol-overviewmap[_ngcontent-%COMP%]:not(.ol-collapsed)   button[_ngcontent-%COMP%]{bottom:2px;left:2px;position:absolute}.ol-overviewmap.ol-collapsed[_ngcontent-%COMP%]   .ol-overviewmap-map[_ngcontent-%COMP%], .ol-overviewmap.ol-uncollapsible[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}.ol-overviewmap[_ngcontent-%COMP%]:not(.ol-collapsed){background:rgba(255,255,255,.8)}.ol-overviewmap-box[_ngcontent-%COMP%]{border:2px dotted rgba(0,60,136,.7)}.ol-overviewmap[_ngcontent-%COMP%]   .ol-overviewmap-box[_ngcontent-%COMP%]:hover{cursor:move}']}),i})();const Ep=/([A-Za-z%]+)$/,Gs=i=>null==i?"":Ep.test(i)?i:`${i}px`;var wp=function(){function i(n){var t=n||{};this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=kt(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new Tn({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}return i.prototype.clone=function(){var n=this.getScale();return new i({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(n)?n.slice():n,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})},i.prototype.getOverflow=function(){return this.overflow_},i.prototype.getFont=function(){return this.font_},i.prototype.getMaxAngle=function(){return this.maxAngle_},i.prototype.getPlacement=function(){return this.placement_},i.prototype.getOffsetX=function(){return this.offsetX_},i.prototype.getOffsetY=function(){return this.offsetY_},i.prototype.getFill=function(){return this.fill_},i.prototype.getRotateWithView=function(){return this.rotateWithView_},i.prototype.getRotation=function(){return this.rotation_},i.prototype.getScale=function(){return this.scale_},i.prototype.getScaleArray=function(){return this.scaleArray_},i.prototype.getStroke=function(){return this.stroke_},i.prototype.getText=function(){return this.text_},i.prototype.getTextAlign=function(){return this.textAlign_},i.prototype.getJustify=function(){return this.justify_},i.prototype.getTextBaseline=function(){return this.textBaseline_},i.prototype.getBackgroundFill=function(){return this.backgroundFill_},i.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},i.prototype.getPadding=function(){return this.padding_},i.prototype.setOverflow=function(n){this.overflow_=n},i.prototype.setFont=function(n){this.font_=n},i.prototype.setMaxAngle=function(n){this.maxAngle_=n},i.prototype.setOffsetX=function(n){this.offsetX_=n},i.prototype.setOffsetY=function(n){this.offsetY_=n},i.prototype.setPlacement=function(n){this.placement_=n},i.prototype.setRotateWithView=function(n){this.rotateWithView_=n},i.prototype.setFill=function(n){this.fill_=n},i.prototype.setRotation=function(n){this.rotation_=n},i.prototype.setScale=function(n){this.scale_=n,this.scaleArray_=kt(void 0!==n?n:1)},i.prototype.setStroke=function(n){this.stroke_=n},i.prototype.setText=function(n){this.text_=n},i.prototype.setTextAlign=function(n){this.textAlign_=n},i.prototype.setJustify=function(n){this.justify_=n},i.prototype.setTextBaseline=function(n){this.textBaseline_=n},i.prototype.setBackgroundFill=function(n){this.backgroundFill_=n},i.prototype.setBackgroundStroke=function(n){this.backgroundStroke_=n},i.prototype.setPadding=function(n){this.padding_=n},i}();const uo=wp,Op=["*"],Rp=[.5,1];let Pp=(()=>{class i{constructor(t,e,r){this.olMap=t,this.ngZone=e,this.router=r,this.lat=-34.603490361131385,this.lon=-58.382037891217465,this.icon="https://proyexiot.com/v2/app/assets/images/spotlight-poi2.png",this.title="",this.anchor=Rp}ngOnInit(){const t=[];let e,r;if(this.markers){this.markers.map(a=>{let l;t.push(new lo({geometry:new Yr(Mi([a.lon,a.lat]))})),"locomotora"===a.type?l=new Vr({image:new _s({radius:5,fill:new Tn({color:a.color}),stroke:new Vn({color:"#000000",width:1})}),text:new uo({text:a.title,offsetY:12,font:"11px arial",fill:new Tn({color:"white"}),stroke:new Vn({color:"black",width:4})})}):"remolcador"===a.type&&(l=new Vr({image:new Hr({anchor:this.anchor,src:a.icon}),text:new uo({text:a.title,offsetY:12,font:"bold 12px arial",fill:new Tn({color:"white"}),stroke:new Vn({color:"black",width:6})})})),t[t.length-1].setStyle(l)}),e=t;const o=new so({features:e});r=new Jr({source:o})}else{const o=new lo({geometry:new Yr(Mi([this.lon,this.lat]))}),a=new Vr({image:new Hr({anchor:this.anchor,src:this.icon}),text:new uo({text:this.title,offsetY:12,font:"bold 12px arial",fill:new Tn({color:"white"}),stroke:new Vn({color:"black",width:6})})});o.setStyle(a),e=[o];const l=new so({features:e});r=new Jr({source:l}),e=o}this.olMap.map?(this.olMap.setMarker(r),this.olMap.map.on("pointermove",o=>{const a=this.olMap.map.getEventPixel(o.originalEvent),l=this.olMap.map.hasFeatureAtPixel(a);this.olMap.map.getViewport().style.cursor=l?"pointer":""}),this.link&&this.olMap.map.on("click",o=>{this.ngZone.runOutsideAngular(()=>{const a=this.olMap.map.forEachFeatureAtPixel(o.pixel,l=>l);a&&a==e&&this.router.navigateByUrl(this.link)})})):setTimeout(()=>{this.ngOnInit()},10)}ngOnDestroy(){}}return i.\u0275fac=function(t){return new(t||i)(s.Y36(ks),s.Y36(s.R0b),s.Y36(it.F0))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-ol-map-marker"]],inputs:{lat:"lat",lon:"lon",icon:"icon",link:"link",title:"title",anchor:"anchor",markers:"markers"},ngContentSelectors:Op,decls:1,vars:0,template:function(t,e){1&t&&(s.F$t(),s.Hsn(0))}}),i})();var Us=q(455),He=q(9549),js=q(3162),Ap=q(6812),Bs=q(2494);function Lp(i,n){if(1&i){const t=s.EpF();s.TgZ(0,"div")(1,"div",92)(2,"mat-icon",93),s.NdJ("click",function(){s.CHM(t);const r=s.oxw().$implicit,o=s.oxw();return s.KtG(o.removeBanner(r.id))}),s._uU(3,"delete"),s.qZA()()()}if(2&i){const t=s.oxw().$implicit;s.xp6(1),s.Jzz("background-image: url(",t.base64,")")}}function Fp(i,n){1&i&&s.YNc(0,Lp,4,3,"ng-template",91)}function Dp(i,n){if(1&i&&(s.TgZ(0,"option",27),s._uU(1),s.qZA()),2&i){const t=n.$implicit;s.Q6J("value",t.id),s.xp6(1),s.Oqu(t.name)}}function bp(i,n){1&i&&(s.TgZ(0,"mat-slide-toggle",94),s._uU(1," Papelera "),s.qZA()),2&i&&s.Q6J("checked",!0)}function Zp(i,n){if(1&i&&(s.TgZ(0,"option",27),s._uU(1),s.qZA()),2&i){const t=n.$implicit;s.Q6J("value",t.id),s.xp6(1),s.Oqu(t.name)}}function Np(i,n){if(1&i){const t=s.EpF();s.TgZ(0,"div",95)(1,"mat-icon",93),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw();return s.KtG(a.remove(o.id))}),s._uU(2,"delete"),s.qZA()()}2&i&&s.Jzz("background-image: url(",n.$implicit.base64,"); width: 32%!important;")}function kp(i,n){if(1&i&&(s.TgZ(0,"option",27),s._uU(1),s.qZA()),2&i){const t=n.$implicit;s.Q6J("value",t.id),s.xp6(1),s.Oqu(t.name)}}function Gp(i,n){if(1&i&&(s.TgZ(0,"option",27),s._uU(1),s.qZA()),2&i){const t=n.$implicit;s.Q6J("value",t.id),s.xp6(1),s.Oqu(t.name)}}function Up(i,n){1&i&&(s.TgZ(0,"mat-error"),s._uU(1," El campo debe tener un maximo de 1200 caracteres "),s.qZA())}function jp(i,n){if(1&i&&s._UZ(0,"iframe",96),2&i){const t=s.oxw();s.Q6J("src",t.updateVideoUrl(t.propertyFG.get("youtube_link").value),s.uOi)}}function Bp(i,n){if(1&i){const t=s.EpF();s.TgZ(0,"file-input",97),s.NdJ("fileChange",function(r){s.CHM(t);const o=s.oxw();return s.KtG(o.selectVideo(r))}),s.qZA()}2&i&&s.Q6J("multiple",!1)}function Yp(i,n){if(1&i){const t=s.EpF();s.TgZ(0,"div")(1,"div",98)(2,"button",99),s.NdJ("click",function(){s.CHM(t);const r=s.oxw();return s.KtG(r.deleteVideo())}),s._uU(3,"Eliminar video"),s.qZA()(),s.TgZ(4,"video",100),s._UZ(5,"source",101),s._uU(6," Your browser does not support the video tag. "),s.qZA()()}if(2&i){const t=s.oxw();s.xp6(5),s.Q6J("src",t.videoUrl,s.LSH)}}function Xp(i,n){if(1&i){const t=s.EpF();s.TgZ(0,"div",95)(1,"mat-icon",93),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw();return s.KtG(a.remove(o.id))}),s._uU(2,"delete"),s.qZA()()}2&i&&s.Jzz("background-image: url(",n.$implicit.base64,"); width: 32%!important;")}function zp(i,n){if(1&i){const t=s.EpF();s.TgZ(0,"app-ol-map",102),s.NdJ("coordinates",function(r){s.CHM(t);const o=s.oxw();return s.KtG(o.setCoordinates(r))}),s._UZ(1,"app-ol-map-marker",103),s.qZA()}if(2&i){const t=s.oxw();s.Q6J("lat",-33.41170161440925)("lon",-70.62236551782559)("height",500)("zoom",4),s.xp6(1),s.Q6J("lat",t.propertyFG.get("lat").value)("lon",t.propertyFG.get("lon").value)}}function Wp(i,n){if(1&i&&(s.TgZ(0,"fuse-alert",104)(1,"span",105),s._uU(2),s.qZA(),s._uU(3," El campo es obligatorio "),s.qZA()),2&i){const t=n.$implicit,e=s.oxw();s.Q6J("type","warn"),s.xp6(2),s.hij("Campo: ",e.nameKeys[t.key],"")}}let Ys=(()=>{class i{constructor(t,e,r,o,a,l,u){this._propertiesService=t,this._activatedRouter=e,this.sanitizer=r,this._formBuilder=o,this._globalService=a,this._userService=l,this.location=u,this.customOptions={loop:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!1,dots:!1,navSpeed:700,margin:5,stagePadding:50,navText:["<",">"],responsive:{0:{items:2}},nav:!0},this.property={},this.files=[],this.filesBanner=[],this.filesToRemove=[],this.showMap=!1,this.nameKeys={name:"nombre",address:"direccion",currency_id:"moneda",price:"precio"}}ngOnInit(){this._userService.user$.subscribe(t=>{this.user=t}),this.propertyFG=this._formBuilder.group({name:["",ft.kI.required],description:["",[ft.kI.maxLength(1200)]],address:["",ft.kI.required],currency_id:[null,ft.kI.required],price:["",ft.kI.required],lat:[""],lon:[""],bedrooms:[0],bathrooms:[0],construction_year:[null],trashed:[!1],size:[null],property_type_id:[null],contract_type_id:[null],status_id:[null],published:[!0],deleteVideo:[!1],wifi:[1],kitchen:[1],lobby:[1],elevator:[1],parking:[1],gym:[1],security:[1],fireplace:[1],balcony:[1],terrace:[1],power_plant:[1],walk_in_closet:[1],swimming_pool:[1],kids_area:[1],pets_allowed:[1],youtube_link:[""]}),this._propertiesService.getFeatures().subscribe(t=>{this.currencies=t.data.currencies,this.propertyTypes=t.data.propertyTypes,this.status=t.data.status,this.contractTypes=t.data.contractTypes}),this.checkIfEdit()}checkIfEdit(){this._activatedRouter.params.subscribe(t=>{t.id&&(this.propertyID=t.id,this.getProperty())})}fileChanges(t){var e=this;return le(function*(){for(let r=0;r<t.length;r++)e.files.push({id:e.generateRandomId(),name:t[r].name,file:t[r],base64:yield e.imgToBase64(t[r])});console.log()})()}remove(t){const e=this.filesBanner.find(r=>r.id===t);e.base64.startsWith("http")&&this.filesToRemove.push(e.id),this.filesBanner=this.filesBanner.filter(r=>r.id!==t)}imgToBase64(t){return new Promise((e,r)=>{const o=new FileReader;o.readAsDataURL(t),o.onload=()=>e(o.result),o.onerror=a=>r(a)})}getProperty(){this._propertiesService.get(this.propertyID).subscribe(t=>{this.property=t.data,this.propertyFG.patchValue(this.property),this.filesBanner=this.property.images.filter(e=>"Banner"===e.type).map(e=>({id:e.id,base64:`${wt.N.assets}/storage/properties/${e.name}`})),this.files=this.property.images.filter(e=>"Gallery"===e.type).map(e=>({id:e.id,base64:`${wt.N.assets}/storage/properties/${e.name}`})),this.property.video&&(this.video=this.property.video,this.videoUrl=this.sanitizer.bypassSecurityTrustResourceUrl(wt.N.assets+"/storage/properties/"+this.property.video)),this.property.deleted_at&&this.propertyFG.patchValue({trashed:!0}),setTimeout(()=>{this.showMap=!0},100)})}generateRandomId(){return Math.random().toString(36).substring(2)}updateVideoUrl(t){const e=t.split("v=")[1];return this.sanitizer.bypassSecurityTrustResourceUrl("https://www.youtube.com/embed/"+e)}fileChangesBanner(t){var e=this;return le(function*(){for(let r=0;r<t.length;r++)e.filesBanner.push({id:e.generateRandomId(),name:t[r].name,file:t[r],base64:yield e.imgToBase64(t[r])});console.log(e.filesBanner)})()}removeBanner(t){const e=this.filesBanner.find(r=>r.id===t);e.base64.startsWith("http")&&this.filesToRemove.push(e.id),console.log(this.filesToRemove),this.filesBanner=this.filesBanner.filter(r=>r.id!==t)}actualizar(){if(this.errors=[],this.propertyFG.invalid)return this.propertyFG.markAllAsTouched(),this.errors=Object.keys(this.propertyFG.controls).map(o=>{const a=this.propertyFG.get(o).errors;if(null!=a)return{key:o,errors:Object.keys(a)}}).filter(o=>o),void this._globalService.openSnackBar("Hay errores en el formulario",5e3,"error");const t=this.files.filter(o=>o.file).map(o=>o.file),e=this.filesBanner.filter(o=>o.file).map(o=>o.file),r={...this.propertyFG.value,filesToRemove:this.filesToRemove};console.log(r),this._propertiesService.actualizar(this.propertyID,r,t,e,this.video).subscribe(o=>{this.propertyFG.patchValue(o.data),this.propertyFG.get("deleteVideo").setValue(!1),this.property=o.data,this.filesBanner=this.property.images.filter(a=>"Banner"===a.type).map(a=>({id:a.id,base64:`${wt.N.assets}/storage/properties/${a.name}`})),this.files=this.property.images.filter(a=>"Gallery"===a.type).map(a=>({id:a.id,base64:`${wt.N.assets}/storage/properties/${a.name}`})),this._globalService.openSnackBar("Propiedad actualizada correctamente",1e4,"success","Ver pagina publica de propiedad").then(()=>{const a=new URL("/propiedad/"+o.data.id,wt.N.front_url);window.open(a.toString(),"_blank")})})}guardar(){if(this.errors=[],this.propertyFG.invalid)return this.propertyFG.markAllAsTouched(),this.errors=Object.keys(this.propertyFG.controls).map(r=>{const o=this.propertyFG.get(r).errors;if(null!=o)return{key:r,errors:Object.keys(o)}}).filter(r=>r),void this._globalService.openSnackBar("Hay errores en el formulario",5e3,"error");const t=this.files.map(r=>r.file),e=this.filesBanner.map(r=>r.file);this._propertiesService.crear(this.propertyFG.value,t,e,this.video).subscribe(r=>{this.location.go("/propiedades/editar/"+r.data.id),this.propertyFG.patchValue(r.data),this.property=r.data,this.propertyID=r.data.id,this.filesBanner=this.property.images.filter(o=>"Banner"===o.type).map(o=>({id:o.id,base64:`${wt.N.assets}/storage/properties/${o.name}`})),this.files=this.property.images.filter(o=>"Gallery"===o.type).map(o=>({id:o.id,base64:`${wt.N.assets}/storage/properties/${o.name}`})),this._globalService.openSnackBar("Propiedad creada correctamente",1e4,"success","Ver pagina publica de propiedad").then(()=>{const o=new URL("/propiedad/"+r.data.id,wt.N.front_url);window.open(o.toString(),"_blank")})})}selectVideo(t){this.video=t,console.log(this.video);const e=URL.createObjectURL(t);this.videoUrl=this.sanitizer.bypassSecurityTrustResourceUrl(e)}deleteVideo(){this.video=null,this.videoUrl=null,this.propertyID&&this.propertyFG.get("deleteVideo").setValue(!0)}getCharactersLeft(){return 1200-this.propertyFG.get("description").value?.length||0}getSafeUrl(t){return t=t.replace(/ /g,"+"),console.log(t),console.log(this.sanitizer.bypassSecurityTrustResourceUrl(t)),this.sanitizer.bypassSecurityTrustResourceUrl(t)}setCoordinates(t){this.propertyFG.get("lon").setValue(t[0]),this.propertyFG.get("lat").setValue(t[1])}}return i.\u0275fac=function(t){return new(t||i)(s.Y36(fr.C),s.Y36(it.gz),s.Y36(Pn.H7),s.Y36(ft.qu),s.Y36(Ne.U),s.Y36(tn.K),s.Y36(te.Ye))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-manage-property"]],decls:383,vars:138,consts:[[1,"w-full",3,"formGroup"],[1,"w-full","property-banner","-my-5"],[1,"owl-carousel-o",3,"options"],[4,"ngFor","ngForOf"],[1,"grid","grid-cols-3","gap-5","max-w-320","mx-auto"],[1,"col-span-2"],[1,"bg-card","shadow","rounded-2xl","p-6"],[1,"flex","flex-col","gap-2"],[1,"flex","flex-wrap","w-full"],[1,"w-full","mb-2"],[1,"w-1/2"],["formControlName","contract_type_id","placeholder","Modo",1,"w-50","p-1","rounded-md","border","border-solid"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"w-1/2","text-right"],["formControlName","published",1,"example-margin","mr-4",3,"checked"],["formControlName","trashed","class","example-margin",3,"checked",4,"ngIf"],["formControlName","name","placeholder","Nombre","type","text",1,"font-bold","text-3xl","leading-8","w-100","p-1","rounded-md","border","border-solid"],[1,"flex","gap-1","items-center"],[1,"font-light","text-slate-600"],["formControlName","address","placeholder","Direccion","type","text",1,"font-light","text-slate-600","w-100","p-1","rounded-md","border","border-solid"],["formControlName","price","placeholder","Precio","type","text",1,"w-50","rounded-md","border","border-solid","text-3xl","text-green-600"],["formControlName","currency_id","placeholder","Moneda",1,"ml-1","w-40","p-1","rounded-md","border","border-solid"],[1,"mt-2","flex","gap-4"],[1,"flex","items-center","gap-1"],["svgIcon","mat_solid:bed",1,"text-2xl","p-1","bg-slate-300","text-slate-600","rounded-full"],["formControlName","bedrooms","placeholder","Habitaciones",1,"w-40","p-1","rounded-md","border","border-solid"],[3,"value"],["svgIcon","mat_solid:bathtub",1,"text-2xl","p-1","bg-slate-300","text-slate-600","rounded-full"],["formControlName","bathrooms","placeholder","Ba\xf1os",1,"w-40","p-1","rounded-md","border","border-solid"],["svgIcon","feather:move",1,"text-2xl","p-1","bg-slate-300","text-slate-600","rounded-full"],["formControlName","size","placeholder","Area","type","text",1,"w-20","rounded-md","border","border-solid"],[1,"flex","flex-col","gap-10"],[1,"bg-card","shadow","rounded-2xl","p-6","mt-4"],[1,"mb-5"],[3,"fileChange"],[1,"w-full","flex","flex-wrap","gap-3"],["class","img h-30 bg-cover bg-no-repeat bg-center rounded-md",3,"style",4,"ngFor","ngForOf"],["multi","",1,"example-headers-align"],[3,"expanded"],[1,"font-bold","text-lg"],[1,"flex","flex-wrap"],[1,"w-1/3","flex","flex-col","gap-5"],[1,"text-base","text-slate-600"],["formControlName","parking","placeholder","Garaje",1,"w-20","p-1","rounded-md","border","border-solid"],["formControlName","status_id","placeholder","Status",1,"w-20","p-1","rounded-md","border","border-solid"],["formControlName","kitchen","placeholder","Cocina",1,"w-20","p-1","rounded-md","border","border-solid"],["formControlName","property_type_id","placeholder","Status",1,"w-20","p-1","rounded-md","border","border-solid"],["formControlName","fireplace","placeholder","Chimenea",1,"w-20","p-1","rounded-md","border","border-solid"],["formControlName","elevator","placeholder","Elevador",1,"w-20","p-1","rounded-md","border","border-solid"],["formControlName","construction_year","placeholder","A\xf1o contrucci\xf3n","type","text",1,"w-30","rounded-md","border","border-solid"],["formControlName","swimming_pool","placeholder","Piscina",1,"w-20","p-1","rounded-md","border","border-solid"],["formControlName","wifi","placeholder","Wifi",1,"w-20","p-1","rounded-md","border","border-solid"],["formControlName","description","name","","id","","cols","30","rows","10",1,"p-1","rounded-md","border","border-solid","w-full"],[4,"ngIf"],["formControlName","security","placeholder","Seguridad",1,"w-20","p-1","rounded-md","border","border-solid"],["formControlName","power_plant","placeholder","Planta poder",1,"w-20","p-1","rounded-md","border","border-solid"],["formControlName","walk_in_closet","placeholder","Vestidor",1,"w-20","p-1","rounded-md","border","border-solid"],["formControlName","lobby","placeholder","Vestibulo",1,"w-20","p-1","rounded-md","border","border-solid"],["formControlName","balcony","placeholder","Balcon",1,"w-20","p-1","rounded-md","border","border-solid"],["formControlName","terrace","placeholder","Terraza",1,"w-20","p-1","rounded-md","border","border-solid"],["formControlName","gym","placeholder","Gym",1,"w-20","p-1","rounded-md","border","border-solid"],["formControlName","kids_area","placeholder","Area de ni\xf1os",1,"w-20","p-1","rounded-md","border","border-solid"],["formControlName","pets_allowed","placeholder","Mascotas permitidas",1,"w-20","p-1","rounded-md","border","border-solid"],["mat-stretch-tabs","false","mat-align-tabs","start"],["label","Link de youtube"],["placeholder","Introduce la URL del video de youtube","formControlName","youtube_link","type","text",1,"w-full","rounded-md","border","border-solid"],["width","100%","height","400","title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src",4,"ngIf"],["label","Subir video"],[3,"multiple","fileChange",4,"ngIf"],[3,"lat","lon","height","zoom","coordinates",4,"ngIf"],[1,"flex","flex-row","gap-2","items-center"],[1,"w-1/6"],[1,"text-center"],[1,"text-8xl","text-slate-800","font-extrabold"],[2,"transform","translateY(-15px)"],[1,"text-lg","text-slate-500"],[1,"flex","justify-center"],[1,"text-xl","text-yellow-500","justify-center"],[1,"w-5/6"],[1,"flex","gap-10","items-center"],[1,"flex","justify-center","items-center","gap-5"],["mode","determinate","value","40",1,"bar1"],[1,"bg-slate-200","p-1","rounded-full"],["mode","determinate","value","40",1,"bar2"],["mode","determinate","value","40",1,"bar3"],["mode","determinate","value","40",1,"bar4"],[1,"col-span-1"],["class","mb-4",3,"type",4,"ngFor","ngForOf"],[1,"fixed","right-8","bottom-8"],["mat-button","",1,"rounded","mr-1","px-3","bg-primary-300","text-on-primary-300",3,"click"],["carouselSlide","","id","carou1"],[1,"img","h-120","bg-cover","bg-no-repeat","bg-center"],[1,"w-full","justify-end","text-red-700","cursor-pointer","mt-2",2,"width","95%",3,"click"],["formControlName","trashed",1,"example-margin",3,"checked"],[1,"img","h-30","bg-cover","bg-no-repeat","bg-center","rounded-md"],["width","100%","height","400","title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src"],[3,"multiple","fileChange"],[1,"delete-video","mb-3"],["mat-button","",1,"bg-red-400","text-white",3,"click"],["width","100%","height","400","controls",""],["type","video/mp4",3,"src"],[3,"lat","lon","height","zoom","coordinates"],[3,"lat","lon"],[1,"mb-4",3,"type"],["fuseAlertTitle",""]],template:function(t,e){1&t&&(s.TgZ(0,"div",0)(1,"div",1)(2,"owl-carousel-o",2),s.YNc(3,Fp,1,0,null,3),s.qZA()(),s.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),s._uU(10),s.qZA(),s.TgZ(11,"div",10)(12,"select",11)(13,"option",12),s._uU(14,"Venta/Alquiler"),s.qZA(),s.YNc(15,Dp,2,2,"option",13),s.qZA()(),s.TgZ(16,"div",14)(17,"mat-slide-toggle",15),s._uU(18," Publicada "),s.qZA(),s.YNc(19,bp,2,1,"mat-slide-toggle",16),s.qZA()(),s._UZ(20,"input",17),s.TgZ(21,"div",18)(22,"mat-icon",19),s._uU(23,"location_on"),s.qZA(),s._UZ(24,"input",20),s.qZA(),s.TgZ(25,"div"),s._UZ(26,"input",21),s.TgZ(27,"select",22)(28,"option",12),s._uU(29,"Moneda"),s.qZA(),s.YNc(30,Zp,2,2,"option",13),s.qZA()(),s.TgZ(31,"div",23)(32,"div",24),s._UZ(33,"mat-icon",25),s.TgZ(34,"select",26)(35,"option",27),s._uU(36,"0 Habitaciones"),s.qZA(),s.TgZ(37,"option",27),s._uU(38,"1 Habitaci\xf3n"),s.qZA(),s.TgZ(39,"option",27),s._uU(40,"2 Habitaciones"),s.qZA(),s.TgZ(41,"option",27),s._uU(42,"3 Habitaciones"),s.qZA(),s.TgZ(43,"option",27),s._uU(44,"4 Habitaciones"),s.qZA(),s.TgZ(45,"option",27),s._uU(46,"5 Habitaciones"),s.qZA(),s.TgZ(47,"option",27),s._uU(48,"6 Habitaciones"),s.qZA(),s.TgZ(49,"option",27),s._uU(50,"6 Habitaciones"),s.qZA(),s.TgZ(51,"option",27),s._uU(52,"6 Habitaciones"),s.qZA(),s.TgZ(53,"option",27),s._uU(54,"6 Habitaciones"),s.qZA(),s.TgZ(55,"option",27),s._uU(56,"6 Habitaciones"),s.qZA()()(),s.TgZ(57,"div",24),s._UZ(58,"mat-icon",28),s.TgZ(59,"select",29)(60,"option",27),s._uU(61,"0 Ba\xf1os"),s.qZA(),s.TgZ(62,"option",27),s._uU(63,"1 Ba\xf1o"),s.qZA(),s.TgZ(64,"option",27),s._uU(65,"2 Ba\xf1os"),s.qZA(),s.TgZ(66,"option",27),s._uU(67,"3 Ba\xf1os"),s.qZA(),s.TgZ(68,"option",27),s._uU(69,"4 Ba\xf1os"),s.qZA(),s.TgZ(70,"option",27),s._uU(71,"5 Ba\xf1os"),s.qZA(),s.TgZ(72,"option",27),s._uU(73,"6 Ba\xf1os"),s.qZA(),s.TgZ(74,"option",27),s._uU(75,"6 Ba\xf1os"),s.qZA(),s.TgZ(76,"option",27),s._uU(77,"6 Ba\xf1os"),s.qZA(),s.TgZ(78,"option",27),s._uU(79,"6 Ba\xf1os"),s.qZA(),s.TgZ(80,"option",27),s._uU(81,"6 Ba\xf1os"),s.qZA()()(),s.TgZ(82,"div",24),s._UZ(83,"mat-icon",30)(84,"input",31),s._uU(85," m"),s.TgZ(86,"sup"),s._uU(87,"2"),s.qZA()()()()(),s.TgZ(88,"div",32)(89,"div",33)(90,"div"),s._uU(91,"Imagenes principales de la propiedad"),s.qZA(),s.TgZ(92,"div",34)(93,"file-input",35),s.NdJ("fileChange",function(o){return e.fileChangesBanner(o)}),s.qZA()(),s.TgZ(94,"div",36),s.YNc(95,Np,3,3,"div",37),s.qZA()(),s.TgZ(96,"mat-accordion",38)(97,"mat-expansion-panel",39)(98,"mat-expansion-panel-header")(99,"mat-panel-title")(100,"span",40),s._uU(101,"Detalles y caracter\xedsticas"),s.qZA()()(),s.TgZ(102,"div",41)(103,"div",42)(104,"div")(105,"strong",43),s._uU(106,"Garaje: "),s.qZA(),s.TgZ(107,"select",44)(108,"option",27),s._uU(109,"Si"),s.qZA(),s.TgZ(110,"option",27),s._uU(111,"No"),s.qZA(),s.TgZ(112,"option",27),s._uU(113,"N/A"),s.qZA()()(),s.TgZ(114,"div")(115,"strong",43),s._uU(116,"Status: "),s.qZA(),s.TgZ(117,"select",45),s.YNc(118,kp,2,2,"option",13),s.qZA()(),s.TgZ(119,"div")(120,"strong",43),s._uU(121,"Cocina: "),s.qZA(),s.TgZ(122,"select",46)(123,"option",27),s._uU(124,"Si"),s.qZA(),s.TgZ(125,"option",27),s._uU(126,"No"),s.qZA(),s.TgZ(127,"option",27),s._uU(128,"N/A"),s.qZA()()()(),s.TgZ(129,"div",42)(130,"div")(131,"strong",43),s._uU(132,"Tipo de propiedad: "),s.qZA(),s.TgZ(133,"select",47),s.YNc(134,Gp,2,2,"option",13),s.qZA()(),s.TgZ(135,"div")(136,"strong",43),s._uU(137,"Chimenea: "),s.qZA(),s.TgZ(138,"select",48)(139,"option",27),s._uU(140,"Si"),s.qZA(),s.TgZ(141,"option",27),s._uU(142,"No"),s.qZA(),s.TgZ(143,"option",27),s._uU(144,"N/A"),s.qZA()()(),s.TgZ(145,"div")(146,"strong",43),s._uU(147,"Elevador: "),s.qZA(),s.TgZ(148,"select",49)(149,"option",27),s._uU(150,"Si"),s.qZA(),s.TgZ(151,"option",27),s._uU(152,"No"),s.qZA(),s.TgZ(153,"option",27),s._uU(154,"N/A"),s.qZA()()()(),s.TgZ(155,"div",42)(156,"div")(157,"strong",43),s._uU(158,"A\xf1o: "),s.qZA(),s._UZ(159,"input",50),s.qZA(),s.TgZ(160,"div")(161,"strong",43),s._uU(162,"Piscina: "),s.qZA(),s.TgZ(163,"select",51)(164,"option",27),s._uU(165,"Si"),s.qZA(),s.TgZ(166,"option",27),s._uU(167,"No"),s.qZA(),s.TgZ(168,"option",27),s._uU(169,"N/A"),s.qZA()()(),s.TgZ(170,"div")(171,"strong",43),s._uU(172,"Wifi gratis: "),s.qZA(),s.TgZ(173,"select",52)(174,"option",27),s._uU(175,"Si"),s.qZA(),s.TgZ(176,"option",27),s._uU(177,"No"),s.qZA(),s.TgZ(178,"option",27),s._uU(179,"N/A"),s.qZA()()()()()(),s.TgZ(180,"mat-expansion-panel",39)(181,"mat-expansion-panel-header")(182,"mat-panel-title")(183,"span",40),s._uU(184,"Descripci\xf3n"),s.qZA()()(),s._UZ(185,"textarea",53),s.TgZ(186,"mat-hint"),s._uU(187),s.qZA(),s.YNc(188,Up,2,0,"mat-error",54),s.qZA(),s.TgZ(189,"mat-expansion-panel",39)(190,"mat-expansion-panel-header")(191,"mat-panel-title")(192,"span",40),s._uU(193,"Comodidades"),s.qZA()()(),s.TgZ(194,"div",41)(195,"div",42)(196,"div",18)(197,"mat-icon"),s._uU(198),s.qZA(),s.TgZ(199,"span",43),s._uU(200,"Seguridad "),s.qZA(),s.TgZ(201,"select",55)(202,"option",27),s._uU(203,"Si"),s.qZA(),s.TgZ(204,"option",27),s._uU(205,"No"),s.qZA(),s.TgZ(206,"option",27),s._uU(207,"N/A"),s.qZA()()(),s.TgZ(208,"div",18)(209,"mat-icon"),s._uU(210),s.qZA(),s.TgZ(211,"span",43),s._uU(212,"Planta de poder "),s.qZA(),s.TgZ(213,"select",56)(214,"option",27),s._uU(215,"Si"),s.qZA(),s.TgZ(216,"option",27),s._uU(217,"No"),s.qZA(),s.TgZ(218,"option",27),s._uU(219,"N/A"),s.qZA()()(),s.TgZ(220,"div",18)(221,"mat-icon"),s._uU(222),s.qZA(),s.TgZ(223,"span",43),s._uU(224,"Vestidor "),s.qZA(),s.TgZ(225,"select",57)(226,"option",27),s._uU(227,"Si"),s.qZA(),s.TgZ(228,"option",27),s._uU(229,"No"),s.qZA(),s.TgZ(230,"option",27),s._uU(231,"N/A"),s.qZA()()()(),s.TgZ(232,"div",42)(233,"div",18)(234,"mat-icon"),s._uU(235),s.qZA(),s.TgZ(236,"span",43),s._uU(237,"Vestibulo "),s.qZA(),s.TgZ(238,"select",58)(239,"option",27),s._uU(240,"Si"),s.qZA(),s.TgZ(241,"option",27),s._uU(242,"No"),s.qZA(),s.TgZ(243,"option",27),s._uU(244,"N/A"),s.qZA()()(),s.TgZ(245,"div",18)(246,"mat-icon"),s._uU(247),s.qZA(),s.TgZ(248,"span",43),s._uU(249,"Balcon "),s.qZA(),s.TgZ(250,"select",59)(251,"option",27),s._uU(252,"Si"),s.qZA(),s.TgZ(253,"option",27),s._uU(254,"No"),s.qZA(),s.TgZ(255,"option",27),s._uU(256,"N/A"),s.qZA()()(),s.TgZ(257,"div",18)(258,"mat-icon"),s._uU(259),s.qZA(),s.TgZ(260,"span",43),s._uU(261,"Terraza "),s.qZA(),s.TgZ(262,"select",60)(263,"option",27),s._uU(264,"Si"),s.qZA(),s.TgZ(265,"option",27),s._uU(266,"No"),s.qZA(),s.TgZ(267,"option",27),s._uU(268,"N/A"),s.qZA()()()(),s.TgZ(269,"div",42)(270,"div",18)(271,"mat-icon"),s._uU(272),s.qZA(),s.TgZ(273,"span",43),s._uU(274,"Gym "),s.qZA(),s.TgZ(275,"select",61)(276,"option",27),s._uU(277,"Si"),s.qZA(),s.TgZ(278,"option",27),s._uU(279,"No"),s.qZA(),s.TgZ(280,"option",27),s._uU(281,"N/A"),s.qZA()()(),s.TgZ(282,"div",18)(283,"mat-icon"),s._uU(284),s.qZA(),s.TgZ(285,"span",43),s._uU(286,"Area de ni\xf1os "),s.qZA(),s.TgZ(287,"select",62)(288,"option",27),s._uU(289,"Si"),s.qZA(),s.TgZ(290,"option",27),s._uU(291,"No"),s.qZA(),s.TgZ(292,"option",27),s._uU(293,"N/A"),s.qZA()()(),s.TgZ(294,"div",18)(295,"mat-icon"),s._uU(296),s.qZA(),s.TgZ(297,"span",43),s._uU(298,"Mascotas permitidas "),s.qZA(),s.TgZ(299,"select",63)(300,"option",27),s._uU(301,"Si"),s.qZA(),s.TgZ(302,"option",27),s._uU(303,"No"),s.qZA(),s.TgZ(304,"option",27),s._uU(305,"N/A"),s.qZA()()()()()(),s.TgZ(306,"mat-expansion-panel",39)(307,"mat-expansion-panel-header")(308,"mat-panel-title")(309,"span",40),s._uU(310,"Video"),s.qZA()()(),s.TgZ(311,"mat-tab-group",64)(312,"mat-tab",65)(313,"div",41),s._UZ(314,"input",66),s.YNc(315,jp,1,1,"iframe",67),s.qZA()(),s.TgZ(316,"mat-tab",68),s.YNc(317,Bp,1,1,"file-input",69),s.YNc(318,Yp,7,1,"div",54),s.qZA()()(),s.TgZ(319,"mat-expansion-panel",39)(320,"mat-expansion-panel-header")(321,"mat-panel-title")(322,"span",40),s._uU(323,"Galeria"),s.qZA()()(),s.TgZ(324,"div",34)(325,"file-input",35),s.NdJ("fileChange",function(o){return e.fileChanges(o)}),s.qZA()(),s.TgZ(326,"div",36),s.YNc(327,Xp,3,3,"div",37),s.qZA()()(),s.TgZ(328,"div",6),s.YNc(329,zp,2,6,"app-ol-map",70),s.qZA(),s.TgZ(330,"div",6)(331,"div",71)(332,"div",72)(333,"div",73)(334,"div",74),s._uU(335,"4.2"),s.qZA(),s.TgZ(336,"div",75)(337,"div",76),s._uU(338,"de 5.0"),s.qZA(),s.TgZ(339,"div",77)(340,"mat-icon",78),s._uU(341,"star_border"),s.qZA(),s.TgZ(342,"mat-icon",78),s._uU(343,"star_border"),s.qZA(),s.TgZ(344,"mat-icon",78),s._uU(345,"star_border"),s.qZA(),s.TgZ(346,"mat-icon",78),s._uU(347,"star_border"),s.qZA(),s.TgZ(348,"mat-icon",78),s._uU(349,"star_border"),s.qZA()()()()(),s.TgZ(350,"div",79)(351,"div",80)(352,"div",10)(353,"div"),s._uU(354," Service "),s.TgZ(355,"div",81),s._UZ(356,"mat-progress-bar",82),s.TgZ(357,"div",83),s._uU(358,"4.7"),s.qZA()()(),s.TgZ(359,"div"),s._uU(360," Localidad "),s.TgZ(361,"div",81),s._UZ(362,"mat-progress-bar",84),s.TgZ(363,"div",83),s._uU(364,"4.7"),s.qZA()()()(),s.TgZ(365,"div",10)(366,"div"),s._uU(367," Relaci\xf3n calidad-precio "),s.TgZ(368,"div",81),s._UZ(369,"mat-progress-bar",85),s.TgZ(370,"div",83),s._uU(371,"4.7"),s.qZA()()(),s.TgZ(372,"div"),s._uU(373," Limpieza "),s.TgZ(374,"div",81),s._UZ(375,"mat-progress-bar",86),s.TgZ(376,"div",83),s._uU(377,"4.7"),s.qZA()()()()()()()()()(),s.TgZ(378,"div",87),s.YNc(379,Wp,4,2,"fuse-alert",88),s.qZA()(),s.TgZ(380,"div",89)(381,"button",90),s.NdJ("click",function(){return e.propertyID?e.actualizar():e.guardar()}),s._uU(382,"Guardar"),s.qZA()()()),2&t&&(s.Q6J("formGroup",e.propertyFG),s.xp6(2),s.Q6J("options",e.customOptions),s.xp6(1),s.Q6J("ngForOf",e.filesBanner),s.xp6(7),s.hij(" ID de propiedad: ",e.property.id," "),s.xp6(3),s.Q6J("value",null),s.xp6(2),s.Q6J("ngForOf",e.contractTypes),s.xp6(2),s.Q6J("checked",!0),s.xp6(2),s.Q6J("ngIf",1==e.user.role_id),s.xp6(9),s.Q6J("value",null),s.xp6(2),s.Q6J("ngForOf",e.currencies),s.xp6(5),s.Q6J("value",0),s.xp6(2),s.Q6J("value",1),s.xp6(2),s.Q6J("value",2),s.xp6(2),s.Q6J("value",2),s.xp6(2),s.Q6J("value",4),s.xp6(2),s.Q6J("value",5),s.xp6(2),s.Q6J("value",6),s.xp6(2),s.Q6J("value",6),s.xp6(2),s.Q6J("value",6),s.xp6(2),s.Q6J("value",6),s.xp6(2),s.Q6J("value",6),s.xp6(5),s.Q6J("value",0),s.xp6(2),s.Q6J("value",1),s.xp6(2),s.Q6J("value",2),s.xp6(2),s.Q6J("value",2),s.xp6(2),s.Q6J("value",4),s.xp6(2),s.Q6J("value",5),s.xp6(2),s.Q6J("value",6),s.xp6(2),s.Q6J("value",6),s.xp6(2),s.Q6J("value",6),s.xp6(2),s.Q6J("value",6),s.xp6(2),s.Q6J("value",6),s.xp6(15),s.Q6J("ngForOf",e.filesBanner),s.xp6(2),s.Q6J("expanded",!0),s.xp6(11),s.Q6J("value",1),s.xp6(2),s.Q6J("value",0),s.xp6(2),s.Q6J("value",2),s.xp6(6),s.Q6J("ngForOf",e.status),s.xp6(5),s.Q6J("value",1),s.xp6(2),s.Q6J("value",0),s.xp6(2),s.Q6J("value",2),s.xp6(7),s.Q6J("ngForOf",e.propertyTypes),s.xp6(5),s.Q6J("value",1),s.xp6(2),s.Q6J("value",0),s.xp6(2),s.Q6J("value",2),s.xp6(6),s.Q6J("value",1),s.xp6(2),s.Q6J("value",0),s.xp6(2),s.Q6J("value",2),s.xp6(11),s.Q6J("value",1),s.xp6(2),s.Q6J("value",0),s.xp6(2),s.Q6J("value",2),s.xp6(6),s.Q6J("value",1),s.xp6(2),s.Q6J("value",0),s.xp6(2),s.Q6J("value",2),s.xp6(2),s.Q6J("expanded",!0),s.xp6(7),s.hij("Caracteres disponibles: ",e.getCharactersLeft(),""),s.xp6(1),s.Q6J("ngIf",e.propertyFG.get("description").hasError("minlength")),s.xp6(1),s.Q6J("expanded",!0),s.xp6(8),s.ekj("text-lime-500",1==e.propertyFG.get("security").value)("text-red-500",0==e.propertyFG.get("security").value),s.xp6(1),s.Oqu(1==e.propertyFG.get("security").value?"check_circle_outline":"close"),s.xp6(4),s.Q6J("value",1),s.xp6(2),s.Q6J("value",0),s.xp6(2),s.Q6J("value",2),s.xp6(3),s.ekj("text-lime-500",1==e.propertyFG.get("power_plant").value)("text-red-500",0==e.propertyFG.get("power_plant").value),s.xp6(1),s.Oqu(1==e.propertyFG.get("power_plant").value?"check_circle_outline":"close"),s.xp6(4),s.Q6J("value",1),s.xp6(2),s.Q6J("value",0),s.xp6(2),s.Q6J("value",2),s.xp6(3),s.ekj("text-lime-500",1==e.propertyFG.get("walk_in_closet").value)("text-red-500",0==e.propertyFG.get("walk_in_closet").value),s.xp6(1),s.Oqu(1==e.propertyFG.get("walk_in_closet").value?"check_circle_outline":"close"),s.xp6(4),s.Q6J("value",1),s.xp6(2),s.Q6J("value",0),s.xp6(2),s.Q6J("value",2),s.xp6(4),s.ekj("text-lime-500",1==e.propertyFG.get("fireplace").value)("text-red-500",0==e.propertyFG.get("fireplace").value),s.xp6(1),s.Oqu(1==e.propertyFG.get("fireplace").value?"check_circle_outline":"close"),s.xp6(4),s.Q6J("value",1),s.xp6(2),s.Q6J("value",0),s.xp6(2),s.Q6J("value",2),s.xp6(3),s.ekj("text-lime-500",1==e.propertyFG.get("balcony").value)("text-red-500",0==e.propertyFG.get("balcony").value),s.xp6(1),s.Oqu(1==e.propertyFG.get("balcony").value?"check_circle_outline":"close"),s.xp6(4),s.Q6J("value",1),s.xp6(2),s.Q6J("value",0),s.xp6(2),s.Q6J("value",2),s.xp6(3),s.ekj("text-lime-500",1==e.propertyFG.get("terrace").value)("text-red-500",0==e.propertyFG.get("terrace").value),s.xp6(1),s.Oqu(1==e.propertyFG.get("terrace").value?"check_circle_outline":"close"),s.xp6(4),s.Q6J("value",1),s.xp6(2),s.Q6J("value",0),s.xp6(2),s.Q6J("value",2),s.xp6(4),s.ekj("text-lime-500",1==e.propertyFG.get("gym").value)("text-red-500",0==e.propertyFG.get("gym").value),s.xp6(1),s.Oqu(1==e.propertyFG.get("gym").value?"check_circle_outline":"close"),s.xp6(4),s.Q6J("value",1),s.xp6(2),s.Q6J("value",0),s.xp6(2),s.Q6J("value",2),s.xp6(3),s.ekj("text-lime-500",1==e.propertyFG.get("kids_area").value)("text-red-500",0==e.propertyFG.get("kids_area").value),s.xp6(1),s.Oqu(1==e.propertyFG.get("kids_area").value?"check_circle_outline":"close"),s.xp6(4),s.Q6J("value",1),s.xp6(2),s.Q6J("value",0),s.xp6(2),s.Q6J("value",2),s.xp6(3),s.ekj("text-lime-500",1==e.propertyFG.get("pets_allowed").value)("text-red-500",0==e.propertyFG.get("pets_allowed").value),s.xp6(1),s.Oqu(1==e.propertyFG.get("pets_allowed").value?"check_circle_outline":"close"),s.xp6(4),s.Q6J("value",1),s.xp6(2),s.Q6J("value",0),s.xp6(2),s.Q6J("value",2),s.xp6(2),s.Q6J("expanded",!0),s.xp6(9),s.Q6J("ngIf",e.propertyFG.get("youtube_link").value),s.xp6(2),s.Q6J("ngIf",!e.videoUrl),s.xp6(1),s.Q6J("ngIf",e.video),s.xp6(1),s.Q6J("expanded",!0),s.xp6(8),s.Q6J("ngForOf",e.files),s.xp6(2),s.Q6J("ngIf",e.showMap),s.xp6(50),s.Q6J("ngForOf",e.errors))},dependencies:[te.sg,te.O5,ue.Hw,qt.Fy,qt.Mp,ft.YN,ft.Kr,ft.Fj,ft.EJ,ft.JJ,ft.JL,ye.pp,ye.ib,ye.yz,ye.yK,m.lW,E.SP,E.uX,ks,Pp,Us.Rr,He.TO,He.bx,js.pW,Ap.Y,Bs.W,ft.sg,ft.u],styles:[".property-banner[_ngcontent-%COMP%]   .owl-carousel-o[_ngcontent-%COMP%]{width:100%}  .property-banner .owl-nav{display:flex!important;justify-content:space-between!important;margin:0 20px!important;transform:translateY(-275px)!important;z-index:999!important;position:relative!important}  .property-banner .owl-theme .owl-nav [class*=owl-]{background:rgba(0,0,0,.51)!important;height:40px!important;width:40px!important;display:flex!important;justify-content:center!important;align-items:center!important;font-size:19px!important}  .bar1 .mat-progress-bar-fill:after{background-color:#00ba74!important}  .bar2 .mat-progress-bar-fill:after{background-color:#fbb851!important}  .bar3 .mat-progress-bar-fill:after{background-color:#83ce36!important}  .bar4 .mat-progress-bar-fill:after{background-color:#e6453c!important}"]}),i})();var zt=q(7155),qp=q(7579),$n=q(4144),Xs=q(266),zs=q(8739);let Vp=(()=>{class i{transform(t,e){return t?t.length>e?t.substr(0,e)+"...":t:" - "}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=s.Yjl({name:"excerpt",type:i,pure:!1}),i})(),Kp=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({}),i})();function Hp(i,n){1&i&&(s.TgZ(0,"span"),s._uU(1,"creado"),s.qZA())}function Jp(i,n){1&i&&(s.TgZ(0,"span"),s._uU(1,"actualizado"),s.qZA())}function Qp(i,n){if(1&i&&(s.TgZ(0,"fuse-alert",40)(1,"span",41),s._uU(2,"Exito"),s.qZA(),s._uU(3," La propiedad ha sido "),s.YNc(4,Hp,2,0,"span",42),s.YNc(5,Jp,2,0,"span",42),s._uU(6," exitosamente "),s.qZA()),2&i){const t=s.oxw();s.Q6J("type","success"),s.xp6(4),s.Q6J("ngIf","1"===t.m),s.xp6(1),s.Q6J("ngIf","2"===t.m)}}function $p(i,n){1&i&&(s.TgZ(0,"th",43),s._uU(1,"ID"),s.qZA())}function tv(i,n){if(1&i&&(s.TgZ(0,"td",44)(1,"span",45),s._uU(2),s.qZA()()),2&i){const t=n.$implicit;s.xp6(2),s.hij(" ",t.id," ")}}function ev(i,n){1&i&&(s.TgZ(0,"th",43),s._uU(1,"Nombre"),s.qZA())}function nv(i,n){if(1&i&&(s.TgZ(0,"td",46)(1,"span",45),s._uU(2),s.ALo(3,"excerpt"),s.qZA()()),2&i){const t=n.$implicit;s.Q6J("matTooltip",t.description)("matTooltipPosition","left"),s.xp6(2),s.hij(" ",s.xi3(3,3,t.name,100)," ")}}function rv(i,n){1&i&&(s.TgZ(0,"th",43),s._uU(1,"Direccion"),s.qZA())}function iv(i,n){if(1&i&&(s.TgZ(0,"td",47)(1,"span",45),s._uU(2),s.qZA()()),2&i){const t=n.$implicit;s.xp6(2),s.hij(" ",t.address," ")}}function ov(i,n){1&i&&(s.TgZ(0,"th",43),s._uU(1,"Precio"),s.qZA())}function av(i,n){if(1&i&&(s.TgZ(0,"td",48)(1,"span",45),s._uU(2),s.qZA()()),2&i){const t=n.$implicit;s.xp6(2),s.hij(" ",t.price||"-"," ")}}function sv(i,n){1&i&&(s.TgZ(0,"th",43),s._uU(1,"# Habitaciones"),s.qZA())}function lv(i,n){if(1&i&&(s.TgZ(0,"td",49)(1,"span",45),s._uU(2),s.qZA()()),2&i){const t=n.$implicit;s.xp6(2),s.hij(" ",t.bedrooms||"-"," ")}}function uv(i,n){1&i&&(s.TgZ(0,"th",43),s._uU(1,"# Ba\xf1os"),s.qZA())}function cv(i,n){if(1&i&&(s.TgZ(0,"td",50)(1,"span",45),s._uU(2),s.qZA()()),2&i){const t=n.$implicit;s.xp6(2),s.hij(" ",t.bathrooms||"-"," ")}}function hv(i,n){1&i&&(s.TgZ(0,"th",43),s._uU(1,"Estado"),s.qZA())}function fv(i,n){if(1&i&&(s.TgZ(0,"td",53)(1,"span",45),s._uU(2),s.qZA()()),2&i){const t=n.$implicit;s.xp6(1),s.ekj("text-green-500",!t.deleted_at)("text-red-500",t.deleted_at),s.xp6(1),s.hij(" ",t.deleted_at?"Eliminado":"Activo"," ")}}function dv(i,n){1&i&&(s.ynx(0,51),s.YNc(1,hv,2,0,"th",22),s.YNc(2,fv,3,5,"td",52),s.BQk())}function pv(i,n){1&i&&(s.TgZ(0,"th",43),s._uU(1,"Acciones"),s.qZA())}function vv(i,n){if(1&i){const t=s.EpF();s.TgZ(0,"td",54)(1,"div",55)(2,"div",56)(3,"mat-icon",57),s._uU(4,"edit"),s.qZA()(),s.TgZ(5,"div",56)(6,"mat-icon",58),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw();return s.KtG(a.newTab("propiedad/"+o.id))}),s._uU(7,"visibility"),s.qZA()(),s.TgZ(8,"div",56)(9,"mat-icon",59),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw();return s.KtG(a.deleteProperty(o.id))}),s._uU(10,"delete"),s.qZA()()()()}if(2&i){const t=n.$implicit;s.xp6(3),s.Q6J("routerLink","/propiedades/editar/"+t.id)}}function gv(i,n){1&i&&s._UZ(0,"tr",60)}function _v(i,n){1&i&&s._UZ(0,"tr",61)}const yv=function(){return[10,25,100]},mv=[{path:"lista",component:(()=>{class i{constructor(t,e,r){this._propertiesService=t,this._globalService=e,this._userService=r,this.columns=["id","description","address","location_type","price","published_at","acciones"],this.newColumns=["id","name","address","price","rooms","bathrooms","actions"],this.m=null,this._unsubscribeAll=new qp.x}ngOnInit(){this.getProperties(),this._userService.user$.subscribe(t=>{this.user=t,console.log(this.user),(1===t.role_id||2===t.role_id)&&(console.log("Hola que tal"),this.newColumns.splice(6,0,"state"))})}getProperties(t={},e={page:1,perPage:10}){this._propertiesService.getList(t,e).subscribe(r=>{this.dataSource=new zt.by(r.data.data),console.log(r),this.propertiesPaginated=r.data})}paginate(t){this.getProperties(this.getValues(),{page:t.pageIndex+1,perPage:t.pageSize})}getValues(){return null}newTab(t){const e=new URL(t,wt.N.front_url);window.open(e.toString(),"_blank")}deleteProperty(t){this._propertiesService.delete(t+"").subscribe(e=>{this.getProperties(),this._globalService.openSnackBar("Propiedad eliminada correctamente",5e3,"success")})}}return i.\u0275fac=function(t){return new(t||i)(s.Y36(fr.C),s.Y36(Ne.U),s.Y36(tn.K))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-properties-list"]],decls:56,vars:10,consts:[[1,"w-full"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-8","w-full","mb-6"],[1,"w-full","col-span-1"],[1,"text-3xl","font-bold"],[1,"text-secondary"],[1,"sm:text-right"],["mat-stroked-button","",1,"w-full","sm:w-fit","rounded","mr-1","px-3","bg-primary-300","text-on-primary-300",3,"routerLink"],[3,"type",4,"ngIf"],[1,"sm:col-span-6","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-12","sm:col-span-3","text-center","sm:text-left"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"col-span-12","sm:col-span-9"],[1,"flex","gap-3","justify-end"],[1,"w-full","sm:w-2/5"],["type","text","matInput",""],[1,"w-1/5"],[1,"flex","mt-7","gap-1"],["mat-stroked-button","",1,"rounded","w-full","p-0","bg-primary-300","text-on-primary-300"],[1,"flex","flex-col","flex-auto","mt-2","overflow-x-auto"],["mat-table","",1,"md:min-w-240","overflow-y-visible",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","data-label","id",4,"matCellDef"],["matColumnDef","name"],["data-label","Nombre","mat-cell","","class","px-4",3,"matTooltip","matTooltipPosition",4,"matCellDef"],["matColumnDef","address"],["data-label","Direcci\xf3n","mat-cell","","class","px-4",4,"matCellDef"],["matColumnDef","price"],["data-label","Precio","mat-cell","","class","px-4",4,"matCellDef"],["matColumnDef","rooms"],["data-label","Habitaciones","mat-cell","","class","px-4",4,"matCellDef"],["matColumnDef","bathrooms"],["data-label","Ba\xf1os","mat-cell","","class","px-4",4,"matCellDef"],["matColumnDef","state",4,"ngIf"],["matColumnDef","actions"],["data-label","Acciones","mat-cell","",4,"matCellDef"],["class","table-header","mat-header-row","",4,"matHeaderRowDef"],["class","cursor-pointer","mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions","page"],[3,"type"],["fuseAlertTitle",""],[4,"ngIf"],["mat-header-cell",""],["mat-cell","","data-label","id"],[1,"font-medium"],["data-label","Nombre","mat-cell","",1,"px-4",3,"matTooltip","matTooltipPosition"],["data-label","Direcci\xf3n","mat-cell","",1,"px-4"],["data-label","Precio","mat-cell","",1,"px-4"],["data-label","Habitaciones","mat-cell","",1,"px-4"],["data-label","Ba\xf1os","mat-cell","",1,"px-4"],["matColumnDef","state"],["data-label","Estado","mat-cell","","class","px-4",4,"matCellDef"],["data-label","Estado","mat-cell","",1,"px-4"],["data-label","Acciones","mat-cell",""],[1,"flex","justify-end","gap-2"],[1,"1/3"],[1,"text-on-primary-300",3,"routerLink"],[1,"text-on-primary-300",3,"click"],[1,"text-red-500",3,"click"],["mat-header-row","",1,"table-header"],["mat-row","",1,"cursor-pointer"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),s._uU(4,"Propiedades"),s.qZA(),s.TgZ(5,"div",4),s._uU(6,"Una lista de propiedades registradas en el sistema"),s.qZA()(),s.TgZ(7,"div",2)(8,"div",5)(9,"button",6),s._uU(10,"Crear Propiedad"),s.qZA()()(),s.TgZ(11,"div",2),s.YNc(12,Qp,7,3,"fuse-alert",7),s.qZA()(),s.TgZ(13,"div",8)(14,"div",9)(15,"div",10)(16,"div",11),s._uU(17,"Detalles de la propiedad"),s.qZA()(),s.TgZ(18,"div",12)(19,"div",13)(20,"div",14)(21,"mat-form-field",0)(22,"mat-label"),s._uU(23,"Buscar Propiedad"),s.qZA(),s._UZ(24,"input",15),s.qZA()(),s.TgZ(25,"div",16)(26,"div",17)(27,"button",18),s._uU(28,"Buscar"),s.qZA()()()()()(),s.TgZ(29,"div",19)(30,"table",20),s.ynx(31,21),s.YNc(32,$p,2,0,"th",22),s.YNc(33,tv,3,1,"td",23),s.BQk(),s.ynx(34,24),s.YNc(35,ev,2,0,"th",22),s.YNc(36,nv,4,6,"td",25),s.BQk(),s.ynx(37,26),s.YNc(38,rv,2,0,"th",22),s.YNc(39,iv,3,1,"td",27),s.BQk(),s.ynx(40,28),s.YNc(41,ov,2,0,"th",22),s.YNc(42,av,3,1,"td",29),s.BQk(),s.ynx(43,30),s.YNc(44,sv,2,0,"th",22),s.YNc(45,lv,3,1,"td",31),s.BQk(),s.ynx(46,32),s.YNc(47,uv,2,0,"th",22),s.YNc(48,cv,3,1,"td",33),s.BQk(),s.YNc(49,dv,3,0,"ng-container",34),s.ynx(50,35),s.YNc(51,pv,2,0,"th",22),s.YNc(52,vv,11,1,"td",36),s.BQk(),s.YNc(53,gv,1,0,"tr",37),s.YNc(54,_v,1,0,"tr",38),s.qZA(),s.TgZ(55,"mat-paginator",39),s.NdJ("page",function(o){return e.paginate(o)}),s.qZA()()()()),2&t&&(s.xp6(9),s.Q6J("routerLink","/propiedades/crear"),s.xp6(3),s.Q6J("ngIf",e.m),s.xp6(18),s.Q6J("dataSource",e.dataSource),s.xp6(19),s.Q6J("ngIf",1===e.user.role_id||2===e.user.role_id),s.xp6(4),s.Q6J("matHeaderRowDef",e.newColumns),s.xp6(1),s.Q6J("matRowDefColumns",e.newColumns),s.xp6(1),s.Q6J("length",null==e.propertiesPaginated?null:e.propertiesPaginated.total)("pageSize",null==e.propertiesPaginated?null:e.propertiesPaginated.per_page)("pageSizeOptions",s.DdM(9,yv)))},dependencies:[te.O5,m.lW,He.KE,He.hX,it.rH,$n.Nt,Xs.gM,zt.BZ,zt.fO,zt.as,zt.w1,zt.Dz,zt.nj,zt.ge,zt.ev,zt.XQ,zt.Gk,ue.Hw,Bs.W,zs.NW,Vp],styles:["tr.mat-row,   tr.mat-footer-row{height:100%!important}@media screen and (max-width: 960px){.mat-table[_ngcontent-%COMP%]{border:0;vertical-align:middle}.table-header[_ngcontent-%COMP%]{display:none}.mat-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1em}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{border-bottom:5px solid #ddd;display:block}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;display:block;font-size:1em;text-align:right;font-weight:700;height:30px;margin-bottom:4%}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;text-transform:uppercase;font-weight:400;font-size:.85em}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:last-child{border-bottom:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child{margin-top:4%}}"]}),i})()},{path:"crear",component:Ys},{path:"editar/:id",component:Ys},{path:"",pathMatch:"full",redirectTo:"lista"}];var Ws=q(4385),qs=q(7775),Vs=q(979),xv=q(3231);let Cv=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[te.ez,m.ot,He.lN,Ws.LD,ft.UX,it.Bz,ft.u5,$n.c,Xs.AV,$n.c,zt.p0,ue.Ps,xv.Co,qs.fC,Kp,zs.TU,Vs.c,He.lN,Ws.LD,$n.c]}),i})();var Ev=q(529),Ks=q(3238);let Tv=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[Ks.BQ,Ks.BQ]}),i})(),wv=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[te.ez,Tv]}),i})(),Ov=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[te.ez,ue.Ps,qt.bB,ft.u5,ye.To,m.ot,qt.bB,Ev.JF,E.Nh,wv,Us.rP,He.lN,js.Cv,$n.c,Vs.c,qs.fC,ft.UX]}),i})(),Iv=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=s.oAB({type:i}),i.\u0275inj=s.cJS({imports:[te.ez,it.Bz.forChild(mv),Cv,Ov]}),i})()},2402:function(yo){yo.exports=function(){"use strict";function Mn(m,E,R,L,F){!function P(Z,V,et,tt,pt){for(;tt>et;){if(tt-et>600){var at=tt-et+1,lt=V-et+1,en=Math.log(at),me=.5*Math.exp(2*en/3),xe=.5*Math.sqrt(en*me*(at-me)/at)*(lt-at/2<0?-1:1);P(Z,V,Math.max(et,Math.floor(V-lt*me/at+xe)),Math.min(tt,Math.floor(V+(at-lt)*me/at+xe)),pt)}var Ut=Z[V],ke=et,jt=tt;for(q(Z,et,V),pt(Z[tt],Ut)>0&&q(Z,et,tt);ke<jt;){for(q(Z,ke,jt),ke++,jt--;pt(Z[ke],Ut)<0;)ke++;for(;pt(Z[jt],Ut)>0;)jt--}0===pt(Z[et],Ut)?q(Z,et,jt):q(Z,++jt,tt),jt<=V&&(et=jt+1),V<=jt&&(tt=jt-1)}}(m,E,R||0,L||m.length-1,F||te)}function q(m,E,R){var L=m[E];m[E]=m[R],m[R]=L}function te(m,E){return m<E?-1:m>E?1:0}var it=function(m){void 0===m&&(m=9),this._maxEntries=Math.max(4,m),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function hr(m,E,R){if(!R)return E.indexOf(m);for(var L=0;L<E.length;L++)if(R(m,E[L]))return L;return-1}function le(m,E){ft(m,0,m.children.length,E,m)}function ft(m,E,R,L,F){F||(F=qt(null)),F.minX=1/0,F.minY=1/0,F.maxX=-1/0,F.maxY=-1/0;for(var P=E;P<R;P++){var Z=m.children[P];wt(F,m.leaf?L(Z):Z)}return F}function wt(m,E){return m.minX=Math.min(m.minX,E.minX),m.minY=Math.min(m.minY,E.minY),m.maxX=Math.max(m.maxX,E.maxX),m.maxY=Math.max(m.maxY,E.maxY),m}function s(m,E){return m.minX-E.minX}function fr(m,E){return m.minY-E.minY}function Pn(m){return(m.maxX-m.minX)*(m.maxY-m.minY)}function Ne(m){return m.maxX-m.minX+(m.maxY-m.minY)}function tn(m,E){return m.minX<=E.minX&&m.minY<=E.minY&&E.maxX<=m.maxX&&E.maxY<=m.maxY}function ue(m,E){return E.minX<=m.maxX&&E.minY<=m.maxY&&E.maxX>=m.minX&&E.maxY>=m.minY}function qt(m){return{children:m,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ye(m,E,R,L,F){for(var P=[E,R];P.length;)if(!((R=P.pop())-(E=P.pop())<=L)){var Z=E+Math.ceil((R-E)/L/2)*L;Mn(m,Z,E,R,F),P.push(E,Z,Z,R)}}return it.prototype.all=function(){return this._all(this.data,[])},it.prototype.search=function(m){var E=this.data,R=[];if(!ue(m,E))return R;for(var L=this.toBBox,F=[];E;){for(var P=0;P<E.children.length;P++){var Z=E.children[P],V=E.leaf?L(Z):Z;ue(m,V)&&(E.leaf?R.push(Z):tn(m,V)?this._all(Z,R):F.push(Z))}E=F.pop()}return R},it.prototype.collides=function(m){var E=this.data;if(!ue(m,E))return!1;for(var R=[];E;){for(var L=0;L<E.children.length;L++){var F=E.children[L],P=E.leaf?this.toBBox(F):F;if(ue(m,P)){if(E.leaf||tn(m,P))return!0;R.push(F)}}E=R.pop()}return!1},it.prototype.load=function(m){if(!m||!m.length)return this;if(m.length<this._minEntries){for(var E=0;E<m.length;E++)this.insert(m[E]);return this}var R=this._build(m.slice(),0,m.length-1,0);if(this.data.children.length)if(this.data.height===R.height)this._splitRoot(this.data,R);else{if(this.data.height<R.height){var L=this.data;this.data=R,R=L}this._insert(R,this.data.height-R.height-1,!0)}else this.data=R;return this},it.prototype.insert=function(m){return m&&this._insert(m,this.data.height-1),this},it.prototype.clear=function(){return this.data=qt([]),this},it.prototype.remove=function(m,E){if(!m)return this;for(var R,L,F,P=this.data,Z=this.toBBox(m),V=[],et=[];P||V.length;){if(P||(P=V.pop(),L=V[V.length-1],R=et.pop(),F=!0),P.leaf){var tt=hr(m,P.children,E);if(-1!==tt)return P.children.splice(tt,1),V.push(P),this._condense(V),this}F||P.leaf||!tn(P,Z)?L?(R++,P=L.children[R],F=!1):P=null:(V.push(P),et.push(R),R=0,L=P,P=P.children[0])}return this},it.prototype.toBBox=function(m){return m},it.prototype.compareMinX=function(m,E){return m.minX-E.minX},it.prototype.compareMinY=function(m,E){return m.minY-E.minY},it.prototype.toJSON=function(){return this.data},it.prototype.fromJSON=function(m){return this.data=m,this},it.prototype._all=function(m,E){for(var R=[];m;)m.leaf?E.push.apply(E,m.children):R.push.apply(R,m.children),m=R.pop();return E},it.prototype._build=function(m,E,R,L){var F,P=R-E+1,Z=this._maxEntries;if(P<=Z)return le(F=qt(m.slice(E,R+1)),this.toBBox),F;L||(L=Math.ceil(Math.log(P)/Math.log(Z)),Z=Math.ceil(P/Math.pow(Z,L-1))),(F=qt([])).leaf=!1,F.height=L;var V=Math.ceil(P/Z),et=V*Math.ceil(Math.sqrt(Z));ye(m,E,R,et,this.compareMinX);for(var tt=E;tt<=R;tt+=et){var pt=Math.min(tt+et-1,R);ye(m,tt,pt,V,this.compareMinY);for(var at=tt;at<=pt;at+=V){var lt=Math.min(at+V-1,pt);F.children.push(this._build(m,at,lt,L-1))}}return le(F,this.toBBox),F},it.prototype._chooseSubtree=function(m,E,R,L){for(;L.push(E),!E.leaf&&L.length-1!==R;){for(var F=1/0,P=1/0,Z=void 0,V=0;V<E.children.length;V++){var et=E.children[V],tt=Pn(et),pt=(at=m,lt=et,(Math.max(lt.maxX,at.maxX)-Math.min(lt.minX,at.minX))*(Math.max(lt.maxY,at.maxY)-Math.min(lt.minY,at.minY))-tt);pt<P?(P=pt,F=tt<F?tt:F,Z=et):pt===P&&tt<F&&(F=tt,Z=et)}E=Z||E.children[0]}var at,lt;return E},it.prototype._insert=function(m,E,R){var L=R?m:this.toBBox(m),F=[],P=this._chooseSubtree(L,this.data,E,F);for(P.children.push(m),wt(P,L);E>=0&&F[E].children.length>this._maxEntries;)this._split(F,E),E--;this._adjustParentBBoxes(L,F,E)},it.prototype._split=function(m,E){var R=m[E],L=R.children.length,F=this._minEntries;this._chooseSplitAxis(R,F,L);var P=this._chooseSplitIndex(R,F,L),Z=qt(R.children.splice(P,R.children.length-P));Z.height=R.height,Z.leaf=R.leaf,le(R,this.toBBox),le(Z,this.toBBox),E?m[E-1].children.push(Z):this._splitRoot(R,Z)},it.prototype._splitRoot=function(m,E){this.data=qt([m,E]),this.data.height=m.height+1,this.data.leaf=!1,le(this.data,this.toBBox)},it.prototype._chooseSplitIndex=function(m,E,R){for(var L,F,P,Z,V,et,tt,pt=1/0,at=1/0,lt=E;lt<=R-E;lt++){var en=ft(m,0,lt,this.toBBox),me=ft(m,lt,R,this.toBBox),xe=(F=en,P=me,void 0,void 0,void 0,void 0,Z=Math.max(F.minX,P.minX),V=Math.max(F.minY,P.minY),et=Math.min(F.maxX,P.maxX),tt=Math.min(F.maxY,P.maxY),Math.max(0,et-Z)*Math.max(0,tt-V)),Dt=Pn(en)+Pn(me);xe<pt?(pt=xe,L=lt,at=Dt<at?Dt:at):xe===pt&&Dt<at&&(at=Dt,L=lt)}return L||R-E},it.prototype._chooseSplitAxis=function(m,E,R){var L=m.leaf?this.compareMinX:s,F=m.leaf?this.compareMinY:fr;this._allDistMargin(m,E,R,L)<this._allDistMargin(m,E,R,F)&&m.children.sort(L)},it.prototype._allDistMargin=function(m,E,R,L){m.children.sort(L);for(var F=this.toBBox,P=ft(m,0,E,F),Z=ft(m,R-E,R,F),V=Ne(P)+Ne(Z),et=E;et<R-E;et++){var tt=m.children[et];wt(P,m.leaf?F(tt):tt),V+=Ne(P)}for(var pt=R-E-1;pt>=E;pt--){var at=m.children[pt];wt(Z,m.leaf?F(at):at),V+=Ne(Z)}return V},it.prototype._adjustParentBBoxes=function(m,E,R){for(var L=R;L>=0;L--)wt(E[L],m)},it.prototype._condense=function(m){for(var E=m.length-1,R=void 0;E>=0;E--)0===m[E].children.length?E>0?(R=m[E-1].children).splice(R.indexOf(m[E]),1):this.clear():le(m[E],this.toBBox)},it}()}}]);
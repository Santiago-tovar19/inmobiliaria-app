(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[772],{6772:(C,E,r)=>{"use strict";r.r(E),r.d(E,{default:()=>D});var u=r(6223),I=r(1896),A=r(4748),b=r(8645),_=r(9773),p=r(5940),f=r(5986),l=r(617),i=r(2296),n=r(4516),e=r(1043),s=r(9925),o=r(6814),a=r(6890),t=r(5879),g=r(4855),y=r(3454);const U=["signInNgForm"];function F(c,x){if(1&c&&(t.TgZ(0,"fuse-alert",22),t._uU(1),t.qZA()),2&c){const m=t.oxw();t.Q6J("appearance","outline")("showIcon",!1)("type",m.alert.type)("@shake","error"===m.alert.type),t.xp6(1),t.hij(" ",m.alert.message," ")}}function w(c,x){1&c&&(t.TgZ(0,"mat-error",23),t._uU(1,"Este campo es obligatorio"),t.qZA())}function O(c,x){1&c&&t._UZ(0,"mat-icon",24),2&c&&t.Q6J("svgIcon","heroicons_solid:eye")}function M(c,x){1&c&&t._UZ(0,"mat-icon",24),2&c&&t.Q6J("svgIcon","heroicons_solid:eye-off")}function R(c,x){1&c&&(t.TgZ(0,"mat-error",25),t._uU(1,"La contrase\xf1a es obligatoria"),t.qZA())}function Z(c,x){1&c&&(t.TgZ(0,"span"),t._uU(1," Ingresar "),t.qZA())}function L(c,x){1&c&&t._UZ(0,"mat-progress-spinner",26),2&c&&t.Q6J("diameter",24)("mode","indeterminate")}const j=function(){return["/forgot-password"]},D=[{path:"",component:(()=>{class c{constructor(m,d,h,v,S,T){this._activatedRoute=m,this._authService=d,this._formBuilder=h,this._router=v,this._globalService=S,this._matSnackBar=T,this.alert={type:"success",message:""},this.showAlert=!1,this.submitted=!1,this._unsubscribeAll=new b.x}ngOnInit(){const m=this._activatedRoute.snapshot.queryParamMap?.get("message"),d=this._activatedRoute.snapshot.queryParamMap?.get("messageType");m&&d&&(this.alert={type:d,message:m},this.showAlert=!0),this.signInForm=this._formBuilder.group({email:["",[u.kI.required]],password:["",u.kI.required],rememberMe:[!1]})}signIn(){this.signInForm.invalid||(this.signInForm.disable(),this.signInForm.updateValueAndValidity(),this.showAlert=!1,this.submitted=!0,this._authService.signIn(this.signInForm.value).pipe((0,_.R)(this._unsubscribeAll)).subscribe(m=>{let v="dashboard";4===m.data.user.role_id&&(v="/"),this._router.navigateByUrl(v)},m=>{this.signInForm.enable(),this.signInForm=this._globalService.getValidationErrors(this.signInForm,m),this.alert={type:"error",message:`${m.message}`},this.showAlert=!0}))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}static#t=this.\u0275fac=function(d){return new(d||c)(t.Y36(I.gz),t.Y36(g.e),t.Y36(u.qu),t.Y36(I.F0),t.Y36(y.U),t.Y36(a.ux))};static#e=this.\u0275cmp=t.Xpm({type:c,selectors:[["auth-sign-in"]],viewQuery:function(d,h){if(1&d&&t.Gf(U,5),2&d){let v;t.iGM(v=t.CRH())&&(h.signInNgForm=v.first)}},standalone:!0,features:[t.jDz],decls:31,vars:16,consts:[[1,"flex","flex-col","flex-auto","items-center","sm:justify-center","min-w-0"],[1,"w-full","sm:w-auto","py-8","px-4","sm:p-12","sm:rounded-2xl","sm:shadow","sm:bg-card"],[1,"w-full","max-w-80","sm:w-80","mx-auto","sm:mx-0"],[1,"w-12"],[1,"mt-8","text-4xl","font-extrabold","tracking-tight","leading-tight"],["class","mt-8 -mb-4",3,"appearance","showIcon","type",4,"ngIf"],[1,"mt-8",3,"formGroup"],["signInNgForm","ngForm"],[1,"w-full"],["id","email","matInput","",3,"formControlName"],["id","email-error-required-msg",4,"ngIf"],["id","password","matInput","","type","password",3,"formControlName"],["passwordField",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],["id","password-error-required-msg",4,"ngIf"],[1,"inline-flex","items-end","justify-between","w-full","mt-1.5"],[3,"color","formControlName"],[1,"text-md","font-medium","text-primary-500","hover:underline",3,"routerLink"],["id","submit","mat-flat-button","",1,"fuse-mat-button-large","w-full","mt-6",3,"color","disabled","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[1,"mt-8","-mb-4",3,"appearance","showIcon","type"],["id","email-error-required-msg"],[1,"icon-size-5",3,"svgIcon"],["id","password-error-required-msg"],[3,"diameter","mode"]],template:function(d,h){if(1&d){const v=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"div",4),t._uU(5,"Login"),t.qZA(),t.YNc(6,F,2,5,"fuse-alert",5),t.TgZ(7,"form",6,7)(9,"mat-form-field",8)(10,"mat-label"),t._uU(11,"Email"),t.qZA(),t._UZ(12,"input",9),t.YNc(13,w,2,0,"mat-error",10),t.qZA(),t.TgZ(14,"mat-form-field",8)(15,"mat-label"),t._uU(16,"Password"),t.qZA(),t._UZ(17,"input",11,12),t.TgZ(19,"button",13),t.NdJ("click",function(){t.CHM(v);const T=t.MAs(18);return t.KtG(T.type="password"===T.type?"text":"password")}),t.YNc(20,O,1,1,"mat-icon",14),t.YNc(21,M,1,1,"mat-icon",14),t.qZA(),t.YNc(22,R,2,0,"mat-error",15),t.qZA(),t.TgZ(23,"div",16)(24,"mat-checkbox",17),t._uU(25," Recuerdame "),t.qZA(),t.TgZ(26,"a",18),t._uU(27,"\xbfOlvidaste tu contrase\xf1a? "),t.qZA()(),t.TgZ(28,"button",19),t.NdJ("click",function(){return h.signIn()}),t.YNc(29,Z,2,0,"span",20),t.YNc(30,L,1,2,"mat-progress-spinner",21),t.qZA()()()()()}if(2&d){const v=t.MAs(18);t.xp6(6),t.Q6J("ngIf",h.showAlert),t.xp6(1),t.Q6J("formGroup",h.signInForm),t.xp6(5),t.Q6J("formControlName","email"),t.xp6(1),t.Q6J("ngIf",h.signInForm.get("email").hasError("required")),t.xp6(4),t.Q6J("formControlName","password"),t.xp6(3),t.Q6J("ngIf","password"===v.type),t.xp6(1),t.Q6J("ngIf","text"===v.type),t.xp6(1),t.Q6J("ngIf",h.signInForm.get("password").hasError("required")),t.xp6(2),t.Q6J("color","primary")("formControlName","rememberMe"),t.xp6(2),t.Q6J("routerLink",t.DdM(15,j)),t.xp6(2),t.Q6J("color","primary")("disabled",h.signInForm.disabled),t.xp6(1),t.Q6J("ngIf",!h.signInForm.disabled),t.xp6(1),t.Q6J("ngIf",h.signInForm.disabled)}},dependencies:[o.O5,s.W,u.u5,u._Y,u.Fj,u.JJ,u.JL,u.UX,u.sg,u.u,e.lN,e.KE,e.hX,e.TO,e.R9,n.c,n.Nt,i.ot,i.lW,i.RK,l.Ps,l.Hw,f.p9,f.oG,I.rH,a.ZX,p.Cq,p.Ou],encapsulation:2,data:{animation:A.L}})}return c})()}]},3454:(C,E,r)=>{"use strict";r.d(E,{U:()=>_});var u=r(217),I=r.n(u),A=r(5879),b=r(8212);let _=(()=>{class p{constructor(l,i){this._userService=l,this._ngZone=i,this.httpValidationErrorMessage="Hay errores en el formulario",this.httpGeneralErrorMessage="Ocurrio un error inesperado"}getValidationErrors(l,i){return Object.entries(i.errors?i.errors:{}).map(e=>{try{const s={};e[1].forEach((o,a)=>{s[a]=o}),l.get(e[0]).setErrors(s)}catch{}}),l}getValidationErrorsFormArray(l,i){return Object.entries(i.errors?i.errors:{}).map(e=>{try{const s={},o=e[0].split(".")[1],a=e[0].split(".")[2];e[1].forEach((t,g)=>{s[g]=t.replace(e[0],a)}),l.controls[o].get(a).setErrors(s)}catch{}}),l}errorsLength(l){return l.errors&&Object.keys(l.errors).map((i,n)=>n.toFixed(0)),[]}openSnackBar(l,i,n=3e3,e="success"){l.open(i,null,{horizontalPosition:"center",verticalPosition:"top",duration:n,panelClass:"success"===e?["bg-green-700","text-white"]:["bg-red-700","text-red-100"]})}formatDataForChart(l,i,n,e,s){const o=i.map(t=>{let g=new Date(t[n]);return g=new Date(g.getTime()-144e5),{x:g,y:t[e]}}),a=JSON.parse(JSON.stringify(l));return a.series={main:[{name:s,data:o}]},a}saveDataAsCSV(l,i){const n=(g,y)=>null===y?"":y,e=Object.keys(l[0]),s=l.map(g=>e.map(y=>JSON.stringify(g[y],n)).join(";"));s.unshift(e.join(";"));const o=s.join("\r\n"),a=new Blob([o],{type:"text/csv"});let t=new Date;t=`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()} ${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}`,I()(a,`${i} ${t}.csv`)}static#t=this.\u0275fac=function(i){return new(i||p)(A.LFG(b.K),A.LFG(A.R0b))};static#e=this.\u0275prov=A.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},217:function(C,E){var r,I;void 0!==(I="function"==typeof(r=function(){"use strict";function b(n,e,s){var o=new XMLHttpRequest;o.open("GET",n),o.responseType="blob",o.onload=function(){i(o.response,e,s)},o.onerror=function(){console.error("could not download file")},o.send()}function _(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return 200<=e.status&&299>=e.status}function p(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,l=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(n,e,s){var o=f.URL||f.webkitURL,a=document.createElement("a");a.download=e=e||n.name||"download",a.rel="noopener","string"==typeof n?(a.href=n,a.origin===location.origin?p(a):_(a.href)?b(n,e,s):p(a,a.target="_blank")):(a.href=o.createObjectURL(n),setTimeout(function(){o.revokeObjectURL(a.href)},4e4),setTimeout(function(){p(a)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,s){if(e=e||n.name||"download","string"!=typeof n)navigator.msSaveOrOpenBlob(function A(n,e){return typeof e>"u"?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\ufeff",n],{type:n.type}):n}(n,s),e);else if(_(n))b(n,e,s);else{var o=document.createElement("a");o.href=n,o.target="_blank",setTimeout(function(){p(o)})}}:function(n,e,s,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof n)return b(n,e,s);var a="application/octet-stream"===n.type,t=/constructor/i.test(f.HTMLElement)||f.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||a&&t||l)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var w=y.result;w=g?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=w:location=w,o=null},y.readAsDataURL(n)}else{var U=f.URL||f.webkitURL,F=U.createObjectURL(n);o?o.location=F:location.href=F,o=null,setTimeout(function(){U.revokeObjectURL(F)},4e4)}});f.saveAs=i.saveAs=i,C.exports=i})?r.apply(E,[]):r)&&(C.exports=I)}}]);
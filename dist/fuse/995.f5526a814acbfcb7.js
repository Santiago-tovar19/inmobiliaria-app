(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[995],{8742:(N,A,l)=>{"use strict";l.r(A),l.d(A,{default:()=>Ee});var d=l(6223),T=l(553),Z=l(617),h=l(2296),y=l(6418),v=l(3680),_=l(8525),m=l(6814),u=l(4516),i=l(1043),s=l(5986),c=l(6890),e=l(5879),p=l(3454),f=l(1896),g=l(3496),U=l(9862);let S=(()=>{class t{constructor(r){this._http=r}getAllRoles(){return this._http.get(`${T.N.api}/get-all-roles`)}static#e=this.\u0275fac=function(a){return new(a||t)(e.LFG(U.eN))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),w=(()=>{class t{constructor(r){this._http=r}getAll(){return this._http.get(`${T.N.api}/brokers/get-all`)}static#e=this.\u0275fac=function(a){return new(a||t)(e.LFG(U.eN))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var F=l(8212);function Y(t,o){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Este campo es obligatorio"),e.qZA())}function D(t,o){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Este campo es obligatorio"),e.qZA())}function O(t,o){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=e.oxw().$implicit,a=e.oxw();e.xp6(1),e.hij(" ",a.userForm.get("first_name").errors[r]," ")}}function I(t,o){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,O,2,1,"ng-container",14),e.qZA()),2&t){const r=o.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.userForm.get("code").hasError(r))}}function J(t,o){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Este campo es obligatorio"),e.qZA())}function Q(t,o){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Este campo es obligatorio"),e.qZA())}function k(t,o){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=e.oxw().$implicit,a=e.oxw();e.xp6(1),e.hij(" ",a.userForm.get("last_name").errors[r]," ")}}function q(t,o){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,k,2,1,"ng-container",14),e.qZA()),2&t){const r=o.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.userForm.get("code").hasError(r))}}function j(t,o){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=e.oxw().$implicit,a=e.oxw();e.xp6(1),e.hij(" ",a.userForm.get("email").errors[r]," ")}}function R(t,o){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,j,2,1,"ng-container",14),e.qZA()),2&t){const r=o.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.userForm.get("email").hasError(r))}}function B(t,o){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=e.oxw().$implicit,a=e.oxw();e.xp6(1),e.hij(" ",a.userForm.get("phone").errors[r]," ")}}function $(t,o){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,B,2,1,"ng-container",14),e.qZA()),2&t){const r=o.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.userForm.get("phone").hasError(r))}}function P(t,o){if(1&t&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&t){const r=o.$implicit;e.Q6J("value",r.id),e.xp6(1),e.Oqu(r.name)}}function G(t,o){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=e.oxw().$implicit,a=e.oxw();e.xp6(1),e.hij(" ",a.userForm.get("role_id").errors[r]," ")}}function z(t,o){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,G,2,1,"ng-container",14),e.qZA()),2&t){const r=o.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.userForm.get("role_id").hasError(r))}}function V(t,o){if(1&t&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&t){const r=o.$implicit;e.Q6J("value",r.id),e.xp6(1),e.Oqu(r.name)}}function H(t,o){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=e.oxw().$implicit,a=e.oxw(2);e.xp6(1),e.hij(" ",a.userForm.get("role_id").errors[r]," ")}}function K(t,o){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,H,2,1,"ng-container",14),e.qZA()),2&t){const r=o.$implicit,a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",a.userForm.get("role_id").hasError(r))}}function W(t,o){if(1&t&&(e.TgZ(0,"div",19)(1,"mat-form-field",12)(2,"mat-label"),e._uU(3,"Broker"),e.qZA(),e.TgZ(4,"mat-select",20),e.YNc(5,V,2,2,"mat-option",21),e.qZA(),e.YNc(6,K,2,1,"mat-error",15),e.qZA()()),2&t){const r=e.oxw();e.xp6(5),e.Q6J("ngForOf",r.brokers),e.xp6(1),e.Q6J("ngForOf",r._globalService.errorsLength(r.userForm.get("role_id")))}}function X(t,o){if(1&t&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&t){const r=o.$implicit;e.Q6J("value",r.id),e.xp6(1),e.Oqu(r.name)}}function ee(t,o){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=e.oxw().$implicit,a=e.oxw(2);e.xp6(1),e.hij(" ",a.userForm.get("broker_id").errors[r]," ")}}function te(t,o){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,ee,2,1,"ng-container",14),e.qZA()),2&t){const r=o.$implicit,a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",a.userForm.get("broker_id").hasError(r))}}function re(t,o){if(1&t&&(e.TgZ(0,"div",19)(1,"mat-form-field",12)(2,"mat-label"),e._uU(3,"Corredora"),e.qZA(),e.TgZ(4,"mat-select",28),e.YNc(5,X,2,2,"mat-option",21),e.qZA(),e.YNc(6,te,2,1,"mat-error",15),e.qZA()()),2&t){const r=e.oxw();e.xp6(5),e.Q6J("ngForOf",r.brokers),e.xp6(1),e.Q6J("ngForOf",r._globalService.errorsLength(r.userForm.get("broker_id")))}}function oe(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"div")(1,"div",29),e._UZ(2,"img",30,31),e.TgZ(4,"button",32),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.removeImg())}),e.TgZ(5,"mat-icon"),e._uU(6,"delete"),e.qZA()()()()}if(2&t){const r=e.oxw();e.xp6(2),e.Q6J("src",r.userImg,e.LSH)}}let M=(()=>{class t{constructor(r,a,n,x,C,E,Me,Le){this._globalService=r,this._activateRoute=a,this._formBuilder=n,this._router=x,this._usersService=C,this._entityPropertiesService=E,this._brokersService=Me,this._userService=Le,this.alert={type:"success",message:""},this.showAlert=!1,this.userID=""}ngOnInit(){this._brokersService.getAll().subscribe(r=>{this.brokers=r.data,console.log(this.brokers)}),this._entityPropertiesService.getAllRoles().subscribe(r=>{console.log(r,"rol"),this.roles=r.data}),this.initForm(),this._activateRoute.params.subscribe(r=>{r.id&&(this.userID=r.id,this.getUser())}),this._userService.user$.subscribe(r=>{console.log(r.role.id),this.user_rol=r.role.id})}onFileChange(r){this.userForm.get("img").setValue(r),this.userForm.get("img_changed").setValue(!0);const a=new FileReader;r&&(a.readAsDataURL(r),a.onload=()=>{this.userImg=a.result})}initForm(){this.userForm=this._formBuilder.group({first_name:[""],last_name:[""],email:[""],phone:[""],broker_id:[""],role_id:[""],img:[""],verified:[!1],img_changed:[!1]})}getUser(){this._usersService.get(this.userID).subscribe(r=>{this.userForm.patchValue(r.data),r.data.img&&(this.userImg=T.N.assets+"/files/"+r.data.img)})}createUser(){this.userForm.invalid?this.userForm.markAllAsTouched():(this.userForm.disable(),this.userForm.updateValueAndValidity(),this.showAlert=!1,this._usersService.create(this.userForm.value).subscribe(()=>{this.userForm.enable(),this._router.navigate(["/usuarios/lista",{m:1}])},r=>{this.userForm.enable(),r.message===this._globalService.httpValidationErrorMessage&&(this.userForm=this._globalService.getValidationErrors(this.userForm,r),this.alert={type:"error",message:`${r.message}`},this.showAlert=!0)}))}updateUser(){this.userForm.markAllAsTouched(),!this.userForm.invalid&&(this.userForm.disable(),this.showAlert=!1,this._usersService.update(this.userID,this.userForm.value).pipe().subscribe(()=>{this.userForm.enable(),this._router.navigate(["/usuarios/lista",{m:2}])},r=>{this.userForm.enable(),r.message===this._globalService.httpValidationErrorMessage&&(this.userForm=this._globalService.getValidationErrors(this.userForm,r),this.alert={type:"error",message:`${r.message}`},this.showAlert=!0)}))}removeImg(){this.userForm.get("img").setValue(""),this.userForm.get("img_changed").setValue(!0),this.userImg=""}static#e=this.\u0275fac=function(a){return new(a||t)(e.Y36(p.U),e.Y36(f.gz),e.Y36(d.qu),e.Y36(f.F0),e.Y36(g.f),e.Y36(S),e.Y36(w),e.Y36(F.K))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-manage-user"]],standalone:!0,features:[e.jDz],decls:59,vars:18,consts:[[1,"w-full","max-w-3xl","m-auto"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-8","w-full","mb-8"],[1,"w-full","col-span-1","text-center","sm:text-left"],[1,"text-3xl","font-bold"],[1,"text-secondary"],[1,"w-full","col-span-1",3,"formGroup"],[1,"w-fit","mx-auto","sm:w-full"],["formControlName","verified",1,"flex","w-full","justify-end","items-center"],[1,"col-span-1","relative"],[1,"absolute","-translate-y-2/4","top-2/4","left-0","right-0"],[1,"grid","sm:grid-cols-2","gap-y-1","gap-x-5","w-full","mt-8",3,"formGroup"],[1,"col-span-2","sm:col-span-1"],[1,"w-full"],["id","first_name","type","text","formControlName","first_name","matInput",""],[4,"ngIf"],[4,"ngFor","ngForOf"],["id","last_name","type","text","formControlName","last_name","matInput",""],["id","email","type","text","formControlName","email","matInput",""],["id","phone","type","text","formControlName","phone","matInput",""],[1,"col-span-2"],["formControlName","role_id"],[3,"value",4,"ngFor","ngForOf"],["class","col-span-2",4,"ngIf"],[3,"label","multiple","fileChange"],[1,"mt-11","mb-10","border-t"],[1,"flex","items-center","justify-end"],["mat-flat-button","","type","button",1,"ml-4",3,"color","click"],[3,"value"],["formControlName","broker_id"],[1,"relative","w-fit","m-auto","mt-4"],["alt","",1,"h-56","w-auto","m-auto",3,"src"],["userImgTagRef",""],["mat-mini-fab","",1,"mt-2","bg-red-500","text-white","m-auto","absolute","top-3","right-4",3,"click"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"form")(2,"div",1)(3,"div",2)(4,"div",3),e._uU(5,"Crear Usuario"),e.qZA(),e.TgZ(6,"div",4),e._uU(7,"Ingresa la informacion para crear un usuario"),e.qZA()(),e.TgZ(8,"div",5)(9,"div",6)(10,"mat-checkbox",7),e._uU(11,"Usuario verificado"),e.qZA()()(),e.TgZ(12,"div",8),e._UZ(13,"div",9),e.qZA()(),e.TgZ(14,"div",10)(15,"div",11)(16,"mat-form-field",12)(17,"mat-label"),e._uU(18,"Nombres"),e.qZA(),e._UZ(19,"input",13),e.YNc(20,Y,2,0,"mat-error",14),e.YNc(21,D,2,0,"mat-error",14),e.YNc(22,I,2,1,"mat-error",15),e.qZA()(),e.TgZ(23,"div",11)(24,"mat-form-field",12)(25,"mat-label"),e._uU(26,"Apellidos"),e.qZA(),e._UZ(27,"input",16),e.YNc(28,J,2,0,"mat-error",14),e.YNc(29,Q,2,0,"mat-error",14),e.YNc(30,q,2,1,"mat-error",15),e.qZA()(),e.TgZ(31,"div",11)(32,"mat-form-field",12)(33,"mat-label"),e._uU(34,"Email"),e.qZA(),e._UZ(35,"input",17),e.YNc(36,R,2,1,"mat-error",15),e.qZA()(),e.TgZ(37,"div",11)(38,"mat-form-field",12)(39,"mat-label"),e._uU(40,"Telefono"),e.qZA(),e._UZ(41,"input",18),e.YNc(42,$,2,1,"mat-error",15),e.qZA()(),e.TgZ(43,"div",19)(44,"mat-form-field",12)(45,"mat-label"),e._uU(46,"Rol de usuario"),e.qZA(),e.TgZ(47,"mat-select",20),e.YNc(48,P,2,2,"mat-option",21),e.qZA(),e.YNc(49,z,2,1,"mat-error",15),e.qZA()(),e.YNc(50,W,7,2,"div",22),e.YNc(51,re,7,2,"div",22),e.TgZ(52,"div",19)(53,"file-input",23),e.NdJ("fileChange",function(C){return n.onFileChange(C)}),e.qZA(),e.YNc(54,oe,7,1,"div",14),e.qZA()(),e._UZ(55,"div",24),e.TgZ(56,"div",25)(57,"button",26),e.NdJ("click",function(){return n.userID?n.updateUser():n.createUser()}),e._uU(58,"Guardar"),e.qZA()()()()),2&a&&(e.xp6(8),e.Q6J("formGroup",n.userForm),e.xp6(6),e.Q6J("formGroup",n.userForm),e.xp6(6),e.Q6J("ngIf",n.userForm.get("first_name").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.userForm.get("first_name").hasError("first_name")),e.xp6(1),e.Q6J("ngForOf",n._globalService.errorsLength(n.userForm.get("first_name"))),e.xp6(6),e.Q6J("ngIf",n.userForm.get("last_name").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.userForm.get("last_name").hasError("last_name")),e.xp6(1),e.Q6J("ngForOf",n._globalService.errorsLength(n.userForm.get("last_name"))),e.xp6(6),e.Q6J("ngForOf",n._globalService.errorsLength(n.userForm.get("email"))),e.xp6(6),e.Q6J("ngForOf",n._globalService.errorsLength(n.userForm.get("phone"))),e.xp6(6),e.Q6J("ngForOf",n.roles),e.xp6(1),e.Q6J("ngForOf",n._globalService.errorsLength(n.userForm.get("role_id"))),e.xp6(1),e.Q6J("ngIf",1===n.user_rol),e.xp6(1),e.Q6J("ngIf",3===n.userForm.get("role_id").value),e.xp6(2),e.Q6J("label","Imagen de perfil")("multiple",!1),e.xp6(1),e.Q6J("ngIf",n.userImg),e.xp6(3),e.Q6J("color","primary"))},dependencies:[d.u5,d._Y,d.Fj,d.JJ,d.JL,d.F,d.UX,d.sg,d.u,s.p9,s.oG,i.lN,i.KE,i.hX,i.TO,u.c,u.Nt,m.O5,m.ax,_.LD,_.gD,v.ey,v.Ng,y.Y,h.ot,h.lW,h.nh,Z.Ps,Z.Hw,c.ZX],encapsulation:2})}return t})();var b=l(5313),ae=l(8645),ie=l(9773),L=l(1476),ne=l(2596),se=l(348),le=l(3427);function ce(t,o){1&t&&(e.TgZ(0,"th",41),e._uU(1,"ID"),e.qZA())}function me(t,o){if(1&t&&(e.TgZ(0,"td",42)(1,"span",43),e._uU(2),e.qZA()()),2&t){const r=o.$implicit;e.xp6(2),e.hij(" ",r.id," ")}}function ue(t,o){1&t&&(e.TgZ(0,"th",41),e._uU(1,"Nombres y apellidos"),e.qZA())}function pe(t,o){if(1&t&&(e.TgZ(0,"td",44)(1,"span",43),e._uU(2),e.qZA()()),2&t){const r=o.$implicit;e.xp6(2),e.hij(" ",r.full_name," ")}}function de(t,o){1&t&&(e.TgZ(0,"th",41),e._uU(1,"Email"),e.qZA())}function fe(t,o){if(1&t&&(e.TgZ(0,"td",45)(1,"span",43),e._uU(2),e.qZA()()),2&t){const r=o.$implicit;e.xp6(2),e.hij(" ",r.email," ")}}function _e(t,o){1&t&&(e.TgZ(0,"th",41),e._uU(1,"Rol"),e.qZA())}function ge(t,o){if(1&t&&(e.TgZ(0,"td",46)(1,"span",43),e._uU(2),e.qZA()()),2&t){const r=o.$implicit;e.xp6(2),e.hij(" ",(null==r.role?null:r.role.name)||"-"," ")}}function he(t,o){1&t&&(e.TgZ(0,"th",41),e._uU(1,"Telefono Corredora"),e.qZA())}function ve(t,o){if(1&t&&(e.TgZ(0,"td",47)(1,"span",43),e._uU(2),e.qZA()()),2&t){const r=o.$implicit;e.xp6(2),e.hij(" ",r.broker_phone||"-"," ")}}function xe(t,o){1&t&&(e.TgZ(0,"th",41),e._uU(1,"Direccion Corredora"),e.qZA())}function be(t,o){if(1&t&&(e.TgZ(0,"td",48)(1,"span",43),e._uU(2),e.qZA()()),2&t){const r=o.$implicit;e.xp6(2),e.hij(" ",r.broker_address||"-"," ")}}function Ue(t,o){1&t&&(e.TgZ(0,"th",41),e._uU(1,"Status Registro"),e.qZA())}function Ze(t,o){1&t&&(e.TgZ(0,"div",52),e._uU(1,"Pendiente"),e.qZA())}function Te(t,o){1&t&&(e.TgZ(0,"div",53),e._uU(1,"Completado"),e.qZA())}function Ce(t,o){if(1&t&&(e.TgZ(0,"td",49)(1,"span",43),e.YNc(2,Ze,2,0,"div",50),e.YNc(3,Te,2,0,"div",51),e.qZA()()),2&t){const r=o.$implicit;e.xp6(2),e.Q6J("ngIf",!r.email_verified_at),e.xp6(1),e.Q6J("ngIf",r.email_verified_at)}}function Fe(t,o){1&t&&(e.TgZ(0,"th",41),e._uU(1,"Acciones"),e.qZA())}function Ae(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"div",56)(1,"button",57),e.NdJ("click",function(){e.CHM(r);const n=e.oxw().$implicit,x=e.oxw();return e.KtG(x.resendSignUpEmail(n.id))}),e._uU(2,"Reenviar Correo"),e.qZA()()}}function ye(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"td",54)(1,"div",55)(2,"div",56)(3,"button",57),e.NdJ("click",function(){const x=e.CHM(r).$implicit,C=e.oxw();return e.KtG(C.goToUser(x.id))}),e._uU(4,"Editar"),e.qZA()(),e.YNc(5,Ae,3,0,"div",58),e.qZA()()}if(2&t){const r=o.$implicit;e.xp6(5),e.Q6J("ngIf",!r.email_verified_at)}}function we(t,o){1&t&&e._UZ(0,"tr",59)}function Ne(t,o){1&t&&e._UZ(0,"tr",60)}const Se=function(){return[10,25,100]},Ee=[{path:"lista",component:(()=>{class t{constructor(r,a,n,x,C,E){this._usersService=r,this._activatedRoute=a,this._router=n,this._formBuilder=x,this._globalService=C,this._matSnachBar=E,this.columns=["id","nombres","email","role","broker_phone","broker_address","status","acciones"],this.m=null,this._unsubscribeAll=new ae.x}paginate(r){this.getUsers(this.seachFormGroup.value,{page:r.pageIndex+1,perPage:r.pageSize})}ngOnInit(){this.seachFormGroup=this._formBuilder.group({termino:[""]}),this._activatedRoute.params.pipe((0,ie.R)(this._unsubscribeAll)).subscribe(r=>{r.m&&(this.m=r.m)}),this.getUsers({})}getUsers(r,a={page:1,perPage:10}){this._usersService.getList(r,a).subscribe(n=>{this.dataSource=new b.by(n.data.data),this.usersPaginated=n.data})}filter(r,a){const n=r.toLowerCase();return a.filter(x=>(x||"").toLowerCase().includes(n))}fileChange(r){this.file=r}goToUser(r){this._router.navigate(["usuarios","editar",r])}uploadFile(){this._usersService.uploadFile(this.file).subscribe(r=>{console.log(r)})}filterUsers(){this.getUsers(this.seachFormGroup.value),console.log(this.seachFormGroup.value)}getValues(){const r={};return this.seachFormGroup.value.fileSelect&&"Seleccionar"!==this.seachFormGroup.value.fileSelect&&(r.file=this.seachFormGroup.value.fileSelect),this.seachFormGroup.value.citySelect&&"Seleccionar"!==this.seachFormGroup.value.citySelect&&(r.city=this.seachFormGroup.value.citySelect),this.seachFormGroup.value.companySelect&&"Seleccionar"!==this.seachFormGroup.value.companySelect&&(r.company=this.seachFormGroup.value.companySelect),this.seachFormGroup.value.professionSelect&&"Seleccionar"!==this.seachFormGroup.value.professionSelect&&(r.profession=this.seachFormGroup.value.professionSelect),r}resendSignUpEmail(r){this._usersService.resendSignUpEmail(r).subscribe(a=>{this._globalService.openSnackBar(this._matSnachBar,"Correo enviado",5e3,"success"),console.log(a)})}static#e=this.\u0275fac=function(a){return new(a||t)(e.Y36(g.f),e.Y36(f.gz),e.Y36(f.F0),e.Y36(d.qu),e.Y36(p.U),e.Y36(c.ux))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-users-list"]],standalone:!0,features:[e.jDz],decls:57,vars:9,consts:[[1,"w-full"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-8","w-full","mb-6"],[1,"w-full","col-span-1","text-center","sm:text-left"],[1,"text-3xl","font-bold"],[1,"text-secondary"],[1,"w-full","col-span-1"],[1,"sm:text-right"],["mat-stroked-button","",1,"w-full","sm:w-fit","rounded","mr-1","px-3","bg-primary-300","text-on-primary-300",3,"routerLink"],[1,"sm:col-span-6","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-12","sm:col-span-3","text-center","sm:text-left"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"col-span-12","sm:col-span-9"],[1,"flex","gap-3","justify-end",3,"formGroup"],[1,"w-full","sm:w-2/5"],["type","text","matInput","","formControlName","termino"],[1,"w-1/5"],[1,"flex","mt-7","gap-1"],["mat-stroked-button","",1,"rounded","w-full","p-0","bg-primary-300","text-on-primary-300",3,"click"],[1,"flex","flex-col","flex-auto","mt-2","overflow-x-auto"],["mat-table","",1,"md:min-w-240","overflow-y-visible",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["data-label","ID","mat-cell","",4,"matCellDef"],["matColumnDef","nombres"],["data-label","Nombres","mat-cell","",4,"matCellDef"],["matColumnDef","email"],["data-label","Email","mat-cell","",4,"matCellDef"],["matColumnDef","role"],["data-label","Rol","mat-cell","",4,"matCellDef"],["matColumnDef","broker_phone"],["data-label","Telefono Corredora","mat-cell","",4,"matCellDef"],["matColumnDef","broker_address"],["data-label","Direccion corredora","mat-cell","",4,"matCellDef"],["matColumnDef","status"],["data-label","Status","mat-cell","","class","px-5",4,"matCellDef"],["matColumnDef","acciones"],["data-label","Acciones","mat-cell","",4,"matCellDef"],["class","table-header header","mat-header-row","",4,"matHeaderRowDef"],["class","cursor-pointer","mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell",""],["data-label","ID","mat-cell",""],[1,"font-medium"],["data-label","Nombres","mat-cell",""],["data-label","Email","mat-cell",""],["data-label","Rol","mat-cell",""],["data-label","Telefono Corredora","mat-cell",""],["data-label","Direccion corredora","mat-cell",""],["data-label","Status","mat-cell","",1,"px-5"],["class","text-orange-600 font-semibold",4,"ngIf"],["class","text-green-600 font-semibold",4,"ngIf"],[1,"text-orange-600","font-semibold"],[1,"text-green-600","font-semibold"],["data-label","Acciones","mat-cell",""],[1,"flex","justify-end","gap-2"],[1,"1/2"],["mat-stroked-button","",1,"rounded","bg-primary-300","text-on-primary-300",3,"click"],["class","1/2",4,"ngIf"],["mat-header-row","",1,"table-header","header"],["mat-row","",1,"cursor-pointer"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4,"Usuarios"),e.qZA(),e.TgZ(5,"div",4),e._uU(6,"Una lista de usuarios registradas en el sistema"),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"button",7),e._uU(10,"Crear Usuario"),e.qZA()()(),e._UZ(11,"div",5),e.qZA(),e.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11),e._uU(16,"Detalles de usuario"),e.qZA()(),e.TgZ(17,"div",12)(18,"div",13)(19,"div",14)(20,"mat-form-field",0)(21,"mat-label"),e._uU(22,"Buscar Usuario"),e.qZA(),e._UZ(23,"input",15),e.qZA()(),e.TgZ(24,"div",16)(25,"div",17)(26,"button",18),e.NdJ("click",function(){return n.filterUsers()}),e._uU(27,"Buscar"),e.qZA()()()()()(),e.TgZ(28,"div",19)(29,"table",20),e.ynx(30,21),e.YNc(31,ce,2,0,"th",22),e.YNc(32,me,3,1,"td",23),e.BQk(),e.ynx(33,24),e.YNc(34,ue,2,0,"th",22),e.YNc(35,pe,3,1,"td",25),e.BQk(),e.ynx(36,26),e.YNc(37,de,2,0,"th",22),e.YNc(38,fe,3,1,"td",27),e.BQk(),e.ynx(39,28),e.YNc(40,_e,2,0,"th",22),e.YNc(41,ge,3,1,"td",29),e.BQk(),e.ynx(42,30),e.YNc(43,he,2,0,"th",22),e.YNc(44,ve,3,1,"td",31),e.BQk(),e.ynx(45,32),e.YNc(46,xe,2,0,"th",22),e.YNc(47,be,3,1,"td",33),e.BQk(),e.ynx(48,34),e.YNc(49,Ue,2,0,"th",22),e.YNc(50,Ce,4,2,"td",35),e.BQk(),e.ynx(51,36),e.YNc(52,Fe,2,0,"th",22),e.YNc(53,ye,6,1,"td",37),e.BQk(),e.YNc(54,we,1,0,"tr",38),e.YNc(55,Ne,1,0,"tr",39),e.qZA(),e.TgZ(56,"mat-paginator",40),e.NdJ("page",function(C){return n.paginate(C)}),e.qZA()()()()),2&a&&(e.xp6(9),e.Q6J("routerLink","/usuarios/crear"),e.xp6(9),e.Q6J("formGroup",n.seachFormGroup),e.xp6(11),e.Q6J("dataSource",n.dataSource),e.xp6(25),e.Q6J("matHeaderRowDef",n.columns),e.xp6(1),e.Q6J("matRowDefColumns",n.columns),e.xp6(1),e.Q6J("length",null==n.usersPaginated?null:n.usersPaginated.total)("pageSize",null==n.usersPaginated?null:n.usersPaginated.per_page)("pageSizeOptions",e.DdM(8,Se)))},dependencies:[m.ez,m.O5,h.ot,h.lW,i.lN,i.KE,i.hX,_.LD,d.UX,d.Fj,d.JJ,d.JL,d.sg,d.u,f.Bz,f.rH,d.u5,u.c,u.Nt,ne.AV,b.p0,b.BZ,b.fO,b.as,b.w1,b.Dz,b.nj,b.ge,b.ev,b.XQ,b.Gk,le.Co,L.TU,L.NW,c.ZX,se.c],styles:["tr.mat-row,   tr.mat-footer-row{height:100%!important}@media screen and (max-width: 960px){.mat-table[_ngcontent-%COMP%]{border:0;vertical-align:middle}.table-header[_ngcontent-%COMP%]{display:none}.mat-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1em}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{border-bottom:5px solid #ddd;display:block}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;display:block;font-size:1em;text-align:right;font-weight:700;height:30px;margin-bottom:4%}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;text-transform:uppercase;font-weight:400;font-size:.85em}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:last-child{border-bottom:0}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child{margin-top:4%}}"]})}return t})()},{path:"crear",component:M},{path:"editar/:id",component:M},{path:"",pathMatch:"full",redirectTo:"lista"}]},3454:(N,A,l)=>{"use strict";l.d(A,{U:()=>y});var d=l(217),T=l.n(d),Z=l(5879),h=l(8212);let y=(()=>{class v{constructor(m,u){this._userService=m,this._ngZone=u,this.httpValidationErrorMessage="Hay errores en el formulario",this.httpGeneralErrorMessage="Ocurrio un error inesperado"}getValidationErrors(m,u){return Object.entries(u.errors?u.errors:{}).map(s=>{try{const c={};s[1].forEach((e,p)=>{c[p]=e}),m.get(s[0]).setErrors(c)}catch{}}),m}getValidationErrorsFormArray(m,u){return Object.entries(u.errors?u.errors:{}).map(s=>{try{const c={},e=s[0].split(".")[1],p=s[0].split(".")[2];s[1].forEach((f,g)=>{c[g]=f.replace(s[0],p)}),m.controls[e].get(p).setErrors(c)}catch{}}),m}errorsLength(m){return m.errors&&Object.keys(m.errors).map((u,i)=>i.toFixed(0)),[]}openSnackBar(m,u,i=3e3,s="success"){m.open(u,null,{horizontalPosition:"center",verticalPosition:"top",duration:i,panelClass:"success"===s?["bg-green-700","text-white"]:["bg-red-700","text-red-100"]})}formatDataForChart(m,u,i,s,c){const e=u.map(f=>{let g=new Date(f[i]);return g=new Date(g.getTime()-144e5),{x:g,y:f[s]}}),p=JSON.parse(JSON.stringify(m));return p.series={main:[{name:c,data:e}]},p}saveDataAsCSV(m,u){const i=(g,U)=>null===U?"":U,s=Object.keys(m[0]),c=m.map(g=>s.map(U=>JSON.stringify(g[U],i)).join(";"));c.unshift(s.join(";"));const e=c.join("\r\n"),p=new Blob([e],{type:"text/csv"});let f=new Date;f=`${f.getFullYear()}-${f.getMonth()+1}-${f.getDate()} ${f.getHours()}:${f.getMinutes()}:${f.getSeconds()}`,T()(p,`${u} ${f}.csv`)}static#e=this.\u0275fac=function(u){return new(u||v)(Z.LFG(h.K),Z.LFG(Z.R0b))};static#t=this.\u0275prov=Z.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})()},217:function(N,A){var l,T;void 0!==(T="function"==typeof(l=function(){"use strict";function h(i,s,c){var e=new XMLHttpRequest;e.open("GET",i),e.responseType="blob",e.onload=function(){u(e.response,s,c)},e.onerror=function(){console.error("could not download file")},e.send()}function y(i){var s=new XMLHttpRequest;s.open("HEAD",i,!1);try{s.send()}catch{}return 200<=s.status&&299>=s.status}function v(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(s)}}var _="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,m=_.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=_.saveAs||("object"!=typeof window||window!==_?function(){}:"download"in HTMLAnchorElement.prototype&&!m?function(i,s,c){var e=_.URL||_.webkitURL,p=document.createElement("a");p.download=s=s||i.name||"download",p.rel="noopener","string"==typeof i?(p.href=i,p.origin===location.origin?v(p):y(p.href)?h(i,s,c):v(p,p.target="_blank")):(p.href=e.createObjectURL(i),setTimeout(function(){e.revokeObjectURL(p.href)},4e4),setTimeout(function(){v(p)},0))}:"msSaveOrOpenBlob"in navigator?function(i,s,c){if(s=s||i.name||"download","string"!=typeof i)navigator.msSaveOrOpenBlob(function Z(i,s){return typeof s>"u"?s={autoBom:!1}:"object"!=typeof s&&(console.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\ufeff",i],{type:i.type}):i}(i,c),s);else if(y(i))h(i,s,c);else{var e=document.createElement("a");e.href=i,e.target="_blank",setTimeout(function(){v(e)})}}:function(i,s,c,e){if((e=e||open("","_blank"))&&(e.document.title=e.document.body.innerText="downloading..."),"string"==typeof i)return h(i,s,c);var p="application/octet-stream"===i.type,f=/constructor/i.test(_.HTMLElement)||_.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||p&&f||m)&&typeof FileReader<"u"){var U=new FileReader;U.onloadend=function(){var F=U.result;F=g?F:F.replace(/^data:[^;]*;/,"data:attachment/file;"),e?e.location.href=F:location=F,e=null},U.readAsDataURL(i)}else{var S=_.URL||_.webkitURL,w=S.createObjectURL(i);e?e.location=w:location.href=w,e=null,setTimeout(function(){S.revokeObjectURL(w)},4e4)}});_.saveAs=u.saveAs=u,N.exports=u})?l.apply(A,[]):l)&&(N.exports=T)}}]);